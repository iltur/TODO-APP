"use strict";(self.webpackChunkTODO_app=self.webpackChunkTODO_app||[]).push([[179],{2011:(mt,Se,P)=>{P.d(Se,{hO:()=>Ke,xv:()=>ge,Dh:()=>de,GT:()=>ve,cc:()=>Ne,on:()=>W,pX:()=>te});var h=P(5e3),$=P(127),N=P(5813);mt=P.hmd(mt);const re=["ngOnDestroy"],te=(be,nt,$e,Re={})=>new Proxy(be,{get:(Me,Ee)=>$e.runOutsideAngular(()=>{var Qe;if(be[Ee])return(null===(Qe=null==Re?void 0:Re.spy)||void 0===Qe?void 0:Qe.get)&&Re.spy.get(Ee,be[Ee]),be[Ee];if(re.indexOf(Ee)>-1)return()=>{};const ee=nt.toPromise().then(et=>{const Xe=et&&et[Ee];return"function"==typeof Xe?Xe.bind(et):Xe&&Xe.then?Xe.then(ie=>$e.run(()=>ie)):$e.run(()=>Xe)});return new Proxy(()=>{},{get:(et,Xe)=>ee[Xe],apply:(et,Xe,ie)=>ee.then(oe=>{var le;const De=oe&&oe(...ie);return(null===(le=null==Re?void 0:Re.spy)||void 0===le?void 0:le.apply)&&Re.spy.apply(Ee,ie,De),De})})})}),ve=(be,nt)=>{nt.forEach($e=>{Object.getOwnPropertyNames($e.prototype||$e).forEach(Re=>{Object.defineProperty(be.prototype,Re,Object.getOwnPropertyDescriptor($e.prototype||$e,Re))})})};class ce{constructor(nt){return nt}}const de=new h.OlP("angularfire2.app.options"),ge=new h.OlP("angularfire2.app.name");function W(be,nt,$e){const Me="object"==typeof $e&&$e||{};Me.name=Me.name||"string"==typeof $e&&$e||"[DEFAULT]";const Qe=$.Z.apps.filter(ee=>ee&&ee.name===Me.name)[0]||nt.runOutsideAngular(()=>$.Z.initializeApp(be,Me));try{JSON.stringify(be)!==JSON.stringify(Qe.options)&&z("error",`${Qe.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ee){}return new ce(Qe)}const z=(be,...nt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[be](...nt)},X={provide:ce,useFactory:W,deps:[de,h.R0b,[new h.FiY,ge]]};let Ke=(()=>{class be{constructor($e){$.Z.registerVersion("angularfire",N.q4.full,"core"),$.Z.registerVersion("angularfire",N.q4.full,"app-compat"),$.Z.registerVersion("angular",h.q4F.full,$e.toString())}static initializeApp($e,Re){return{ngModule:be,providers:[{provide:de,useValue:$e},{provide:ge,useValue:Re}]}}}return be.\u0275fac=function($e){return new($e||be)(h.LFG(h.Lbi))},be.\u0275mod=h.oAB({type:be}),be.\u0275inj=h.cJS({providers:[X]}),be})();function Ne(be,nt,$e,Re,Me){const[,Ee,Qe]=globalThis.\u0275AngularfireInstanceCache.find(ee=>ee[0]===be)||[];if(Ee)return function ke(be,nt){try{return be.toString()===nt.toString()}catch($e){return be===nt}}(Me,Qe)||(me("error",`${nt} was already initialized on the ${$e} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:Me,was:Qe})),Ee;{const ee=Re();return globalThis.\u0275AngularfireInstanceCache.push([be,ee,Me]),ee}}const Le=!!mt.hot,me=(be,...nt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[be](...nt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(mt,Se,P)=>{P.d(Se,{q4:()=>za,iC:()=>zs,HU:()=>id,vb:()=>Tu,JM:()=>xp,u3:()=>sd});var h=P(5e3),$=P(5867),N=P(5861),re=P(9681),te=P(2090),ve=P(4859),ce=P(1877);const de="@firebase/installations",z="w:0.5.8",X="FIS_v2",be=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function nt(I){return I instanceof te.ZR&&I.code.includes("request-failed")}function $e({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Re(I){return{token:I.token,requestStatus:2,expiresIn:ie(I.expiresIn),creationTime:Date.now()}}function Me(I,C){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,N.Z)(function*(I,C){const U=(yield C.json()).error;return be.create("request-failed",{requestName:I,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function Qe({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function ee(I,{refreshToken:C}){const R=Qe(I);return R.append("Authorization",function oe(I){return`${X} ${I}`}(C)),R}function et(I){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,N.Z)(function*(I){const C=yield I();return C.status>=500&&C.status<600?I():C})).apply(this,arguments)}function ie(I){return Number(I.replace("s","000"))}function le(I,C){return De.apply(this,arguments)}function De(){return(De=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:C},{fid:R}){const U=$e(I),Y=Qe(I),ne=C.getImmediate({optional:!0});if(ne){const bt=yield ne.getHeartbeatsHeader();bt&&Y.append("x-firebase-client",bt)}const Be={method:"POST",headers:Y,body:JSON.stringify({fid:R,authVersion:X,appId:I.appId,sdkVersion:z})},At=yield et(()=>fetch(U,Be));if(At.ok){const bt=yield At.json();return{fid:bt.fid||R,registrationStatus:2,refreshToken:bt.refreshToken,authToken:Re(bt.authToken)}}throw yield Me("Create Installation",At)})).apply(this,arguments)}function pe(I){return new Promise(C=>{setTimeout(C,I)})}const Rt=/^[cdef][\w-]{21}$/;function on(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function Ge(I){return function Fe(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Rt.test(R)?R:""}catch(I){return""}}function Jt(I){return`${I.appName}!${I.appId}`}const tr=new Map;function xn(I,C){const R=Jt(I);rn(R,C),function Rn(I,C){const R=function Sr(){return!fr&&"BroadcastChannel"in self&&(fr=new BroadcastChannel("[Firebase] FID Change"),fr.onmessage=I=>{rn(I.data.key,I.data.fid)}),fr}();R&&R.postMessage({key:I,fid:C}),function wr(){0===tr.size&&fr&&(fr.close(),fr=null)}()}(R,C)}function rn(I,C){const R=tr.get(I);if(R)for(const U of R)U(C)}let fr=null;const pr="firebase-installations-store";let br=null;function as(){return br||(br=(0,te.X3)("firebase-installations-database",1,(I,C)=>{0===C&&I.createObjectStore(pr)})),br}function ft(I,C){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,N.Z)(function*(I,C){const R=Jt(I),Y=(yield as()).transaction(pr,"readwrite"),ne=Y.objectStore(pr),_e=yield ne.get(R);return yield ne.put(C,R),yield Y.complete,(!_e||_e.fid!==C.fid)&&xn(I,C.fid),C})).apply(this,arguments)}function Fn(I){return an.apply(this,arguments)}function an(){return(an=(0,N.Z)(function*(I){const C=Jt(I),U=(yield as()).transaction(pr,"readwrite");yield U.objectStore(pr).delete(C),yield U.complete})).apply(this,arguments)}function Gn(I,C){return di.apply(this,arguments)}function di(){return(di=(0,N.Z)(function*(I,C){const R=Jt(I),Y=(yield as()).transaction(pr,"readwrite"),ne=Y.objectStore(pr),_e=yield ne.get(R),Be=C(_e);return void 0===Be?yield ne.delete(R):yield ne.put(Be,R),yield Y.complete,Be&&(!_e||_e.fid!==Be.fid)&&xn(I,Be.fid),Be})).apply(this,arguments)}function Ln(I){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,N.Z)(function*(I){let C;const R=yield Gn(I.appConfig,U=>{const Y=$r(U),ne=Js(I,Y);return C=ne.registrationPromise,ne.installationEntry});return""===R.fid?{installationEntry:yield C}:{installationEntry:R,registrationPromise:C}})).apply(this,arguments)}function $r(I){return Wt(I||{fid:on(),registrationStatus:0})}function Js(I,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(be.create("app-offline"))};const R={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},U=function Gt(I,C){return pt.apply(this,arguments)}(I,R);return{installationEntry:R,registrationPromise:U}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:at(I)}:{installationEntry:C}}function pt(){return(pt=(0,N.Z)(function*(I,C){try{const R=yield le(I,C);return ft(I.appConfig,R)}catch(R){throw nt(R)&&409===R.customData.serverCode?yield Fn(I.appConfig):yield ft(I.appConfig,{fid:C.fid,registrationStatus:0}),R}})).apply(this,arguments)}function at(I){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,N.Z)(function*(I){let C=yield ji(I.appConfig);for(;1===C.registrationStatus;)yield pe(100),C=yield ji(I.appConfig);if(0===C.registrationStatus){const{installationEntry:R,registrationPromise:U}=yield Ln(I);return U||R}return C})).apply(this,arguments)}function ji(I){return Gn(I,C=>{if(!C)throw be.create("installation-not-found");return Wt(C)})}function Wt(I){return function $i(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Vn(I,C){return ln.apply(this,arguments)}function ln(){return(ln=(0,N.Z)(function*({appConfig:I,heartbeatServiceProvider:C},R){const U=yt(I,R),Y=ee(I,R),ne=C.getImmediate({optional:!0});if(ne){const bt=yield ne.getHeartbeatsHeader();bt&&Y.append("x-firebase-client",bt)}const Be={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:z,appId:I.appId}})},At=yield et(()=>fetch(U,Be));if(At.ok)return Re(yield At.json());throw yield Me("Generate Auth Token",At)})).apply(this,arguments)}function yt(I,{fid:C}){return`${$e(I)}/${C}/authTokens:generate`}function Un(I){return qt.apply(this,arguments)}function qt(){return(qt=(0,N.Z)(function*(I,C=!1){let R;const U=yield Gn(I.appConfig,ne=>{if(!Lt(ne))throw be.create("not-registered");const _e=ne.authToken;if(!C&&q(_e))return ne;if(1===_e.requestStatus)return R=We(I,C),ne;{if(!navigator.onLine)throw be.create("app-offline");const Be=Z(ne);return R=gt(I,Be),Be}});return R?yield R:U.authToken})).apply(this,arguments)}function We(I,C){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,N.Z)(function*(I,C){let R=yield rt(I.appConfig);for(;1===R.authToken.requestStatus;)yield pe(100),R=yield rt(I.appConfig);const U=R.authToken;return 0===U.requestStatus?Un(I,C):U})).apply(this,arguments)}function rt(I){return Gn(I,C=>{if(!Lt(C))throw be.create("not-registered");return function fe(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function gt(I,C){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,N.Z)(function*(I,C){try{const R=yield Vn(I,C),U=Object.assign(Object.assign({},C),{authToken:R});return yield ft(I.appConfig,U),R}catch(R){if(!nt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const U=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield ft(I.appConfig,U)}else yield Fn(I.appConfig);throw R}})).apply(this,arguments)}function Lt(I){return void 0!==I&&2===I.registrationStatus}function q(I){return 2===I.requestStatus&&!function B(I){const C=Date.now();return C<I.creationTime||I.creationTime+I.expiresIn<C+36e5}(I)}function Z(I){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:C})}function V(){return(V=(0,N.Z)(function*(I){const C=I,{installationEntry:R,registrationPromise:U}=yield Ln(C);return U?U.catch(console.error):Un(C).catch(console.error),R.fid})).apply(this,arguments)}function ue(){return(ue=(0,N.Z)(function*(I,C=!1){const R=I;return yield Ve(R),(yield Un(R,C)).token})).apply(this,arguments)}function Ve(I){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,N.Z)(function*(I){const{registrationPromise:C}=yield Ln(I);C&&(yield C)})).apply(this,arguments)}function Yn(I){return be.create("missing-app-config-values",{valueName:I})}const hu="installations",Je=I=>{const C=I.getProvider("app").getImmediate(),R=function bi(I){if(!I||!I.options)throw Yn("App Configuration");if(!I.name)throw Yn("App Name");const C=["projectId","apiKey","appId"];for(const R of C)if(!I.options[R])throw Yn(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(C);return{app:C,appConfig:R,heartbeatServiceProvider:(0,re._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},zt=I=>{const C=I.getProvider("app").getImmediate(),R=(0,re._getProvider)(C,hu).getImmediate();return{getId:()=>function O(I){return V.apply(this,arguments)}(R),getToken:Y=>function j(I){return ue.apply(this,arguments)}(R,Y)}};(function hn(){(0,re._registerComponent)(new ve.wA(hu,Je,"PUBLIC")),(0,re._registerComponent)(new ve.wA("installations-internal",zt,"PRIVATE"))})(),(0,re.registerVersion)(de,"0.5.8"),(0,re.registerVersion)(de,"0.5.8","esm2017");const Rr="@firebase/remote-config",Bn=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class pl{constructor(C,R,U,Y){this.client=C,this.storage=R,this.storageCache=U,this.logger=Y}isCachedDataFresh(C,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-R,Y=U<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Y}.`),Y}fetch(C){var R=this;return(0,N.Z)(function*(){const[U,Y]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(Y&&R.isCachedDataFresh(C.cacheMaxAgeMillis,U))return Y;C.eTag=Y&&Y.eTag;const ne=yield R.client.fetch(C),_e=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&_e.push(R.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(_e),ne})()}}function gu(I=navigator){return I.languages&&I.languages[0]||I.language}class Ps{constructor(C,R,U,Y,ne,_e){this.firebaseInstallations=C,this.sdkVersion=R,this.namespace=U,this.projectId=Y,this.apiKey=ne,this.appId=_e}fetch(C){var R=this;return(0,N.Z)(function*(){const[U,Y]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),_e=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Be={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},At={sdk_version:R.sdkVersion,app_instance_id:U,app_instance_id_token:Y,app_id:R.appId,language_code:gu()},bt={method:"POST",headers:Be,body:JSON.stringify(At)},Zt=fetch(_e,bt),Tt=new Promise((gi,Ni)=>{C.signal.addEventListener(()=>{const Mu=new Error("The operation was aborted.");Mu.name="AbortError",Ni(Mu)})});let Pr;try{yield Promise.race([Zt,Tt]),Pr=yield Zt}catch(gi){let Ni="fetch-client-network";throw"AbortError"===gi.name&&(Ni="fetch-timeout"),Bn.create(Ni,{originalErrorMessage:gi.message})}let ar=Pr.status;const ws=Pr.headers.get("ETag")||void 0;let Xi,Ri;if(200===Pr.status){let gi;try{gi=yield Pr.json()}catch(Ni){throw Bn.create("fetch-client-parse",{originalErrorMessage:Ni.message})}Xi=gi.entries,Ri=gi.state}if("INSTANCE_STATE_UNSPECIFIED"===Ri?ar=500:"NO_CHANGE"===Ri?ar=304:("NO_TEMPLATE"===Ri||"EMPTY_CONFIG"===Ri)&&(Xi={}),304!==ar&&200!==ar)throw Bn.create("fetch-status",{httpStatus:ar});return{status:ar,eTag:ws,config:Xi}})()}}class ls{constructor(C,R){this.client=C,this.storage=R}fetch(C){var R=this;return(0,N.Z)(function*(){const U=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(C,U)})()}attemptFetch(C,{throttleEndTimeMillis:R,backoffCount:U}){var Y=this;return(0,N.Z)(function*(){yield function Xr(I,C){return new Promise((R,U)=>{const Y=Math.max(C-Date.now(),0),ne=setTimeout(R,Y);I.addEventListener(()=>{clearTimeout(ne),U(Bn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,R);try{const ne=yield Y.client.fetch(C);return yield Y.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function Ep(I){if(!(I instanceof te.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ne))throw ne;const _e={throttleEndTimeMillis:Date.now()+(0,te.$s)(U),backoffCount:U+1};return yield Y.storage.setThrottleMetadata(_e),Y.attemptFetch(C,_e)}})()}}class $c{constructor(C,R,U,Y,ne){this.app=C,this._client=R,this._storageCache=U,this._storage=Y,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ma(I,C){const R=I.target.error||void 0;return Bn.create(C,{originalErrorMessage:R&&R.message})}const Uo="app_namespace_store";class gl{constructor(C,R,U,Y=function Dp(){return new Promise((I,C)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=U=>{C(Ma(U,"storage-open"))},R.onsuccess=U=>{I(U.target.result)},R.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Uo,{keyPath:"compositeKey"})}}catch(R){C(Bn.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=C,this.appName=R,this.namespace=U,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var R=this;return(0,N.Z)(function*(){const U=yield R.openDbPromise;return new Promise((Y,ne)=>{const Be=U.transaction([Uo],"readonly").objectStore(Uo),At=R.createCompositeKey(C);try{const bt=Be.get(At);bt.onerror=Zt=>{ne(Ma(Zt,"storage-get"))},bt.onsuccess=Zt=>{const Tt=Zt.target.result;Y(Tt?Tt.value:void 0)}}catch(bt){ne(Bn.create("storage-get",{originalErrorMessage:bt&&bt.message}))}})})()}set(C,R){var U=this;return(0,N.Z)(function*(){const Y=yield U.openDbPromise;return new Promise((ne,_e)=>{const At=Y.transaction([Uo],"readwrite").objectStore(Uo),bt=U.createCompositeKey(C);try{const Zt=At.put({compositeKey:bt,value:R});Zt.onerror=Tt=>{_e(Ma(Tt,"storage-set"))},Zt.onsuccess=()=>{ne()}}catch(Zt){_e(Bn.create("storage-set",{originalErrorMessage:Zt&&Zt.message}))}})})()}delete(C){var R=this;return(0,N.Z)(function*(){const U=yield R.openDbPromise;return new Promise((Y,ne)=>{const Be=U.transaction([Uo],"readwrite").objectStore(Uo),At=R.createCompositeKey(C);try{const bt=Be.delete(At);bt.onerror=Zt=>{ne(Ma(Zt,"storage-delete"))},bt.onsuccess=()=>{Y()}}catch(bt){ne(Bn.create("storage-delete",{originalErrorMessage:bt&&bt.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class Bo{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,N.Z)(function*(){const R=C.storage.getLastFetchStatus(),U=C.storage.getLastSuccessfulFetchTimestampMillis(),Y=C.storage.getActiveConfig(),ne=yield R;ne&&(C.lastFetchStatus=ne);const _e=yield U;_e&&(C.lastSuccessfulFetchTimestampMillis=_e);const Be=yield Y;Be&&(C.activeConfig=Be)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function Gc(){return mu.apply(this,arguments)}function mu(){return(mu=(0,N.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Ip(){(0,re._registerComponent)(new ve.wA("remote-config",function I(C,{instanceIdentifier:R}){const U=C.getProvider("app").getImmediate(),Y=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Bn.create("registration-window");if(!(0,te.hl)())throw Bn.create("indexed-db-unavailable");const{projectId:ne,apiKey:_e,appId:Be}=U.options;if(!ne)throw Bn.create("registration-project-id");if(!_e)throw Bn.create("registration-api-key");if(!Be)throw Bn.create("registration-app-id");const At=new gl(Be,U.name,R=R||"firebase"),bt=new Bo(At),Zt=new ce.Yd(Rr);Zt.logLevel=ce.in.ERROR;const Tt=new Ps(Y,re.SDK_VERSION,R,ne,_e,Be),Pr=new ls(Tt,At),ar=new pl(Pr,At,bt,Zt),ws=new $c(U,ar,bt,At,Zt);return function Or(I){const C=(0,te.m9)(I);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(ws),ws},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Rr,"0.3.7"),(0,re.registerVersion)(Rr,"0.3.7","esm2017")}();const cs="/firebase-messaging-sw.js",xa="/firebase-cloud-messaging-push-scope",hi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",jo="google.c.a.c_id",yu="google.c.a.c_l",ph="google.c.a.ts",Ra="google.c.a.e";var Ci=(()=>{return(I=Ci||(Ci={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ci;var I})();function ds(I){const C=new Uint8Array(I);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _u(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(R),Y=new Uint8Array(U.length);for(let ne=0;ne<U.length;++ne)Y[ne]=U.charCodeAt(ne);return Y}const Na="fcm_token_details_db",$o="fcm_token_object_Store";function Cp(I){return Ho.apply(this,arguments)}function Ho(){return Ho=(0,N.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Na))return null;let C=null;return(yield(0,te.X3)(Na,5,function(){var U=(0,N.Z)(function*(Y,ne,_e,Be){var At;if(ne<2||!Y.objectStoreNames.contains($o))return;const bt=Be.objectStore($o),Zt=yield bt.index("fcmSenderId").get(I);if(yield bt.clear(),Zt)if(2===ne){const Tt=Zt;if(!Tt.auth||!Tt.p256dh||!Tt.endpoint)return;C={token:Tt.fcmToken,createTime:null!==(At=Tt.createTime)&&void 0!==At?At:Date.now(),subscriptionOptions:{auth:Tt.auth,p256dh:Tt.p256dh,endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:"string"==typeof Tt.vapidKey?Tt.vapidKey:ds(Tt.vapidKey)}}}else if(3===ne){const Tt=Zt;C={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:ds(Tt.auth),p256dh:ds(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:ds(Tt.vapidKey)}}}else if(4===ne){const Tt=Zt;C={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:ds(Tt.auth),p256dh:ds(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:ds(Tt.vapidKey)}}}});return function(Y,ne,_e,Be){return U.apply(this,arguments)}}())).close(),yield(0,te.Lj)(Na),yield(0,te.Lj)("fcm_vapid_details_db"),yield(0,te.Lj)("undefined"),ml(C)?C:null}),Ho.apply(this,arguments)}function ml(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:C}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const Fs="firebase-messaging-store";let to=null;function yl(){return to||(to=(0,te.X3)("firebase-messaging-database",1,(I,C)=>{0===C&&I.createObjectStore(Fs)})),to}function En(I){return no.apply(this,arguments)}function no(){return(no=(0,N.Z)(function*(I){const C=Ls(I),U=yield(yield yl()).transaction(Fs).objectStore(Fs).get(C);if(U)return U;{const Y=yield Cp(I.appConfig.senderId);if(Y)return yield ro(I,Y),Y}})).apply(this,arguments)}function ro(I,C){return fn.apply(this,arguments)}function fn(){return(fn=(0,N.Z)(function*(I,C){const R=Ls(I),Y=(yield yl()).transaction(Fs,"readwrite");return yield Y.objectStore(Fs).put(C,R),yield Y.complete,C})).apply(this,arguments)}function _l(I){return Go.apply(this,arguments)}function Go(){return(Go=(0,N.Z)(function*(I){const C=Ls(I),U=(yield yl()).transaction(Fs,"readwrite");yield U.objectStore(Fs).delete(C),yield U.complete})).apply(this,arguments)}function Ls({appConfig:I}){return I.appId}const Qn=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Eu(I,C){return fi.apply(this,arguments)}function fi(){return(fi=(0,N.Z)(function*(I,C){const R=yield Wi(I),U=wt(C),Y={method:"POST",headers:R,body:JSON.stringify(U)};let ne;try{ne=yield(yield fetch(Ti(I.appConfig),Y)).json()}catch(_e){throw Qn.create("token-subscribe-failed",{errorInfo:_e})}if(ne.error)throw Qn.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw Qn.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function Hr(I,C){return hs.apply(this,arguments)}function hs(){return(hs=(0,N.Z)(function*(I,C){const R=yield Wi(I),U=wt(C.subscriptionOptions),Y={method:"PATCH",headers:R,body:JSON.stringify(U)};let ne;try{ne=yield(yield fetch(`${Ti(I.appConfig)}/${C.token}`,Y)).json()}catch(_e){throw Qn.create("token-update-failed",{errorInfo:_e})}if(ne.error)throw Qn.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw Qn.create("token-update-no-token");return ne.token})).apply(this,arguments)}function io(I,C){return zo.apply(this,arguments)}function zo(){return(zo=(0,N.Z)(function*(I,C){const U={method:"DELETE",headers:yield Wi(I)};try{const ne=yield(yield fetch(`${Ti(I.appConfig)}/${C}`,U)).json();if(ne.error)throw Qn.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(Y){throw Qn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function Ti({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Wi(I){return fs.apply(this,arguments)}function fs(){return(fs=(0,N.Z)(function*({appConfig:I,installations:C}){const R=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function wt({p256dh:I,auth:C,endpoint:R,vapidKey:U}){const Y={web:{endpoint:R,auth:C,p256dh:I}};return U!==hi&&(Y.web.applicationPubKey=U),Y}const Oa=6048e5;function Wc(I){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,N.Z)(function*(I){const C=yield mh(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:C.endpoint,auth:ds(C.getKey("auth")),p256dh:ds(C.getKey("p256dh"))},U=yield En(I.firebaseDependencies);if(U){if(wu(U.subscriptionOptions,R))return Date.now()>=U.createTime+Oa?gh(I,{token:U.token,createTime:Date.now(),subscriptionOptions:R}):U.token;try{yield io(I.firebaseDependencies,U.token)}catch(Y){console.warn(Y)}return Te(I.firebaseDependencies,R)}return Te(I.firebaseDependencies,R)})).apply(this,arguments)}function qc(I){return qo.apply(this,arguments)}function qo(){return(qo=(0,N.Z)(function*(I){const C=yield En(I.firebaseDependencies);C&&(yield io(I.firebaseDependencies,C.token),yield _l(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function gh(I,C){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,N.Z)(function*(I,C){try{const R=yield Hr(I.firebaseDependencies,C),U=Object.assign(Object.assign({},C),{token:R,createTime:Date.now()});return yield ro(I.firebaseDependencies,U),R}catch(R){throw yield qc(I),R}})).apply(this,arguments)}function Te(I,C){return $t.apply(this,arguments)}function $t(){return($t=(0,N.Z)(function*(I,C){const U={token:yield Eu(I,C),createTime:Date.now(),subscriptionOptions:C};return yield ro(I,U),U.token})).apply(this,arguments)}function mh(I,C){return _n.apply(this,arguments)}function _n(){return(_n=(0,N.Z)(function*(I,C){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_u(C)})})).apply(this,arguments)}function wu(I,C){return C.vapidKey===I.vapidKey&&C.endpoint===I.endpoint&&C.auth===I.auth&&C.p256dh===I.p256dh}function Vs(I){const C={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function Ai(I,C){if(!C.notification)return;I.notification={};const R=C.notification.title;R&&(I.notification.title=R);const U=C.notification.body;U&&(I.notification.body=U);const Y=C.notification.image;Y&&(I.notification.image=Y)}(C,I),function vl(I,C){!C.data||(I.data=C.data)}(C,I),function ka(I,C){if(!C.fcmOptions)return;I.fcmOptions={};const R=C.fcmOptions.link;R&&(I.fcmOptions.link=R);const U=C.fcmOptions.analytics_label;U&&(I.fcmOptions.analyticsLabel=U)}(C,I),C}function Tp(I){return"object"==typeof I&&!!I&&jo in I}function El(I,C){const R=[];for(let U=0;U<I.length;U++)R.push(I.charAt(U)),U<C.length&&R.push(C.charAt(U));return R.join("")}function Zo(I){return Qn.create("missing-app-config-values",{valueName:I})}El("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),El("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class sr{constructor(C,R,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function Ko(I){if(!I||!I.options)throw Zo("App Configuration Object");if(!I.name)throw Zo("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const U of C)if(!R[U])throw Zo(U);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Y,installations:R,analyticsProvider:U}}_delete(){return Promise.resolve()}}function qi(I){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,N.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(cs,{scope:xa}),I.swRegistration.update().catch(()=>{})}catch(C){throw Qn.create("failed-service-worker-registration",{browserErrorMessage:C.message})}})).apply(this,arguments)}function Qo(I,C){return ei.apply(this,arguments)}function ei(){return(ei=(0,N.Z)(function*(I,C){if(!C&&!I.swRegistration&&(yield qi(I)),C||!I.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Qn.create("invalid-sw-registration");I.swRegistration=C}})).apply(this,arguments)}function yh(I,C){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,N.Z)(function*(I,C){C?I.vapidKey=C:I.vapidKey||(I.vapidKey=hi)})).apply(this,arguments)}function Fa(){return(Fa=(0,N.Z)(function*(I,C){if(!navigator)throw Qn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Qn.create("permission-blocked");return yield yh(I,null==C?void 0:C.vapidKey),yield Qo(I,null==C?void 0:C.serviceWorkerRegistration),Wc(I)})).apply(this,arguments)}function wl(I,C,R){return Us.apply(this,arguments)}function Us(){return(Us=(0,N.Z)(function*(I,C,R){const U=_h(C);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:R[jo],message_name:R[yu],message_time:R[ph],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function _h(I){switch(I){case Ci.NOTIFICATION_CLICKED:return"notification_open";case Ci.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Dl(){return(Dl=(0,N.Z)(function*(I,C){const R=C.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===Ci.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Vs(R)):I.onMessageHandler.next(Vs(R)));const U=R.data;Tp(U)&&"1"===U[Ra]&&(yield wl(I,R.messageType,U))})).apply(this,arguments)}const bu="@firebase/messaging",so=I=>{const C=new sr(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function bl(I,C){return Dl.apply(this,arguments)}(C,R)),C},Il=I=>{const C=I.getProvider("messaging").getImmediate();return{getToken:U=>function Kc(I,C){return Fa.apply(this,arguments)}(C,U)}};function Zc(){return oo.apply(this,arguments)}function oo(){return(oo=(0,N.Z)(function*(){try{yield(0,te.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function vh(){(0,re._registerComponent)(new ve.wA("messaging",so,"PUBLIC")),(0,re._registerComponent)(new ve.wA("messaging-internal",Il,"PRIVATE")),(0,re.registerVersion)(bu,"0.9.12"),(0,re.registerVersion)(bu,"0.9.12","esm2017")}();const Tl="analytics",Yc="firebase_id",Al="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Du="https://www.googletagmanager.com/gtag/js",Jn=new ce.Yd("@firebase/analytics");function Qc(I){return Promise.all(I.map(C=>C.catch(R=>R)))}function Jc(I,C){const R=document.createElement("script");R.src=`${Du}?l=${I}&id=${C}`,R.async=!0,document.head.appendChild(R)}function Iu(I,C,R,U,Y,ne){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,N.Z)(function*(I,C,R,U,Y,ne){const _e=U[Y];try{if(_e)yield C[_e];else{const At=(yield Qc(R)).find(bt=>bt.measurementId===Y);At&&(yield C[At.appId])}}catch(Be){Jn.error(Be)}I("config",Y,ne)})).apply(this,arguments)}function wh(I,C,R,U,Y){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,N.Z)(function*(I,C,R,U,Y){try{let ne=[];if(Y&&Y.send_to){let _e=Y.send_to;Array.isArray(_e)||(_e=[_e]);const Be=yield Qc(R);for(const At of _e){const bt=Be.find(Tt=>Tt.measurementId===At),Zt=bt&&C[bt.appId];if(!Zt){ne=[];break}ne.push(Zt)}}0===ne.length&&(ne=Object.values(C)),yield Promise.all(ne),I("event",U,Y||{})}catch(ne){Jn.error(ne)}})).apply(this,arguments)}function Gm(){const I=window.document.getElementsByTagName("script");for(const C of Object.values(I))if(C.src&&C.src.includes(Du))return C;return null}const Ir=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),or=new class ti{constructor(C={},R=1e3){this.throttleMetadata=C,this.intervalMillis=R}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,R){this.throttleMetadata[C]=R}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function ed(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function zn(I){return $s.apply(this,arguments)}function $s(){return($s=(0,N.Z)(function*(I){var C;const{appId:R,apiKey:U}=I,Y={method:"GET",headers:ed(U)},ne=Al.replace("{app-id}",R),_e=yield fetch(ne,Y);if(200!==_e.status&&304!==_e.status){let Be="";try{const At=yield _e.json();(null===(C=At.error)||void 0===C?void 0:C.message)&&(Be=At.error.message)}catch(At){}throw Ir.create("config-fetch-failed",{httpStatus:_e.status,responseMessage:Be})}return _e.json()})).apply(this,arguments)}function Sl(I){return gs.apply(this,arguments)}function gs(){return(gs=(0,N.Z)(function*(I,C=or,R){const{appId:U,apiKey:Y,measurementId:ne}=I.options;if(!U)throw Ir.create("no-app-id");if(!Y){if(ne)return{measurementId:ne,appId:U};throw Ir.create("no-api-key")}const _e=C.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Be=new td;return setTimeout((0,N.Z)(function*(){Be.abort()}),void 0!==R?R:6e4),ea({appId:U,apiKey:Y,measurementId:ne},_e,Be,C)})).apply(this,arguments)}function ea(I,C,R){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,N.Z)(function*(I,{throttleEndTimeMillis:C,backoffCount:R},U,Y=or){const{appId:ne,measurementId:_e}=I;try{yield jt(U,C)}catch(Be){if(_e)return Jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_e} provided in the "measurementId" field in the local Firebase config. [${Be.message}]`),{appId:ne,measurementId:_e};throw Be}try{const Be=yield zn(I);return Y.deleteThrottleMetadata(ne),Be}catch(Be){if(!Ml(Be)){if(Y.deleteThrottleMetadata(ne),_e)return Jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${_e} provided in the "measurementId" field in the local Firebase config. [${Be.message}]`),{appId:ne,measurementId:_e};throw Be}const At=503===Number(Be.customData.httpStatus)?(0,te.$s)(R,Y.intervalMillis,30):(0,te.$s)(R,Y.intervalMillis),bt={throttleEndTimeMillis:Date.now()+At,backoffCount:R+1};return Y.setThrottleMetadata(ne,bt),Jn.debug(`Calling attemptFetch again in ${At} millis`),ea(I,bt,U,Y)}})).apply(this,arguments)}function jt(I,C){return new Promise((R,U)=>{const Y=Math.max(C-Date.now(),0),ne=setTimeout(R,Y);I.addEventListener(()=>{clearTimeout(ne),U(Ir.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function Ml(I){if(!(I instanceof te.ZR&&I.customData))return!1;const C=Number(I.customData.httpStatus);return 429===C||500===C||503===C||504===C}class td{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}function ta(){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,N.Z)(function*(){if(!(0,te.hl)())return Jn.warn(Ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(I){return Jn.warn(Ir.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Hs(){return(Hs=(0,N.Z)(function*(I,C,R,U,Y,ne,_e){var Be;const At=Sl(I);At.then(ar=>{R[ar.measurementId]=ar.appId,I.options.measurementId&&ar.measurementId!==I.options.measurementId&&Jn.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${ar.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ar=>Jn.error(ar)),C.push(At);const bt=ta().then(ar=>{if(ar)return U.getId()}),[Zt,Tt]=yield Promise.all([At,bt]);Gm()||Jc(ne,Zt.measurementId),Y("js",new Date);const Pr=null!==(Be=null==_e?void 0:_e.config)&&void 0!==Be?Be:{};return Pr.origin="firebase",Pr.update=!0,null!=Tt&&(Pr[Yc]=Tt),Y("config",Zt.measurementId,Pr),Zt.measurementId})).apply(this,arguments)}class xl{constructor(C){this.app=C}_delete(){return delete zr[this.app.options.appId],Promise.resolve()}}let zr={},uo=[];const ni={};let lo,ms,Gs="dataLayer",Rl=!1;function na(I,C,R){!function ys(){const I=[];if((0,te.ru)()&&I.push("This is a browser extension environment."),(0,te.zI)()||I.push("Cookies are not available."),I.length>0){const C=I.map((U,Y)=>`(${Y+1}) ${U}`).join(" "),R=Ir.create("invalid-analytics-context",{errorInfo:C});Jn.warn(R.message)}}();const U=I.options.appId;if(!U)throw Ir.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Ir.create("no-api-key");Jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zr[U])throw Ir.create("already-exists",{id:U});if(!Rl){!function ps(I){let C=[];Array.isArray(window[I])?C=window[I]:window[I]=C}(Gs);const{wrappedGtag:ne,gtagCore:_e}=function bh(I,C,R,U,Y){let ne=function(..._e){window[U].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ne=window[Y]),window[Y]=function Xc(I,C,R,U){function ne(){return(ne=(0,N.Z)(function*(_e,Be,At){try{"event"===_e?yield wh(I,C,R,Be,At):"config"===_e?yield Iu(I,C,R,U,Be,At):I("set",Be)}catch(bt){Jn.error(bt)}})).apply(this,arguments)}return function Y(_e,Be,At){return ne.apply(this,arguments)}}(ne,I,C,R),{gtagCore:ne,wrappedGtag:window[Y]}}(zr,uo,ni,Gs,"gtag");ms=ne,lo=_e,Rl=!0}return zr[U]=function Pn(I,C,R,U,Y,ne,_e){return Hs.apply(this,arguments)}(I,uo,ni,C,lo,Gs,R),new xl(I)}function ia(){return(ia=(0,N.Z)(function*(I,C,R,U,Y){if(Y&&Y.global)I("event",R,U);else{const ne=yield C;I("event",R,Object.assign(Object.assign({},U),{send_to:ne}))}})).apply(this,arguments)}function Cn(){return sa.apply(this,arguments)}function sa(){return(sa=(0,N.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(I){return!1}})).apply(this,arguments)}const co="@firebase/analytics";!function Mp(){(0,re._registerComponent)(new ve.wA(Tl,(C,{options:R})=>na(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,re._registerComponent)(new ve.wA("analytics-internal",function I(C){try{const R=C.getProvider(Tl).getImmediate();return{logEvent:(U,Y,ne)=>function Ih(I,C,R,U){I=(0,te.m9)(I),function ra(I,C,R,U,Y){return ia.apply(this,arguments)}(ms,zr[I.app.options.appId],C,R,U).catch(Y=>Jn.error(Y))}(R,U,Y,ne)}}catch(R){throw Ir.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,re.registerVersion)(co,"0.7.8"),(0,re.registerVersion)(co,"0.7.8","esm2017")}();var Ji=P(4408),oa=P(7565);const Ha=new class qn extends oa.v{}(class ho extends Ji.o{constructor(C,R){super(C,R),this.scheduler=C,this.work=R}schedule(C,R=0){return R>0?super.schedule(C,R):(this.delay=R,this.state=C,this.scheduler.flush(this),this)}execute(C,R){return R>0||this.closed?super.execute(C,R):this._execute(C,R)}requestAsyncId(C,R,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(C,R,U):C.flush(this)}});var rd=P(4986),Ga=P(8306),Wr=P(8505),Mi=P(9468),aa=P(5363);const za=new h.GfV("7.3.0"),ii="__angularfire_symbol__analyticsIsSupportedValue",ua="__angularfire_symbol__analyticsIsSupported",Ol="__angularfire_symbol__remoteConfigIsSupportedValue",Pl="__angularfire_symbol__remoteConfigIsSupported",kl="__angularfire_symbol__messagingIsSupportedValue",Vt="__angularfire_symbol__messagingIsSupported";function xp(I,C,R){if(C){if(1===C.length)return C[0];const ne=C.filter(_e=>_e.app===R);if(1===ne.length)return ne[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[ua]||(globalThis[ua]=Cn().then(I=>globalThis[ii]=I).catch(()=>globalThis[ii]=!1)),globalThis[Vt]||(globalThis[Vt]=Zc().then(I=>globalThis[kl]=I).catch(()=>globalThis[kl]=!1)),globalThis[Pl]||(globalThis[Pl]=Gc().then(I=>globalThis[Ol]=I).catch(()=>globalThis[Ol]=!1));const Tu=(I,C)=>{const R=C?[C]:(0,$.C6)(),U=[];return R.forEach(Y=>{Y.container.getProvider(I).instances.forEach(_e=>{U.includes(_e)||U.push(_e)})}),U};function la(){}class si{constructor(C,R=Ha){this.zone=C,this.delegate=R}now(){return this.delegate.now()}schedule(C,R,U){const Y=this.zone;return this.delegate.schedule(function(_e){Y.runGuarded(()=>{C.apply(this,[_e])})},R,U)}}class Au{constructor(C){this.zone=C,this.task=null}call(C,R){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",la,{},la,la)),R.pipe((0,Wr.b)({next:U,complete:U,error:U})).subscribe(C).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let id=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new si(Zone.current)),this.insideAngular=R.run(()=>new si(Zone.current,rd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(h.LFG(h.R0b))},I.\u0275prov=h.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function xi(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Ch(I){return xi().ngZone.runOutsideAngular(()=>I())}function wn(I){return xi().ngZone.run(()=>I())}function zs(I){return xi(),function Su(I){return function(R){return(R=R.lift(new Au(I.ngZone))).pipe((0,Mi.R)(I.outsideAngular),(0,aa.Q)(I.insideAngular))}}(xi())(I)}const ca=(I,C)=>function(){const U=arguments;return C&&setTimeout(()=>{"scheduled"===C.state&&C.invoke()},10),wn(()=>I.apply(void 0,U))},sd=(I,C)=>function(){let R;const U=arguments;for(let ne=0;ne<arguments.length;ne++)"function"==typeof U[ne]&&(C&&(R||(R=wn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",la,{},la,la)))),U[ne]=ca(U[ne],R));const Y=Ch(()=>I.apply(this,U));if(!C){if(Y instanceof Ga.y){const ne=xi();return Y.pipe((0,Mi.R)(ne.outsideAngular),(0,aa.Q)(ne.insideAngular))}return wn(()=>Y)}return Y instanceof Ga.y?Y.pipe(zs):Y instanceof Promise?wn(()=>new Promise((ne,_e)=>Y.then(Be=>wn(()=>ne(Be)),Be=>wn(()=>_e(Be))))):"function"==typeof Y&&R?function(){return setTimeout(()=>{R&&"scheduled"===R.state&&R.invoke()},10),Y.apply(this,arguments)}:wn(()=>Y)}},573:(mt,Se,P)=>{P.d(Se,{$:()=>Wc,A:()=>z,E:()=>zt,G:()=>Nr,I:()=>ls,K:()=>B,L:()=>mu,M:()=>fh,N:()=>jo,P:()=>za,Q:()=>yu,R:()=>ri,T:()=>hi,U:()=>Ci,V:()=>ds,W:()=>Cp,X:()=>Dr,Y:()=>Eu,Z:()=>Hr,_:()=>Ti,a:()=>vt,a0:()=>qc,a1:()=>gh,a2:()=>Te,a3:()=>mh,a4:()=>wu,a5:()=>Ai,a6:()=>vl,a7:()=>Tp,a8:()=>El,a9:()=>qi,aA:()=>Tt,aB:()=>Su,aC:()=>dn,aG:()=>or,aJ:()=>Ra,aa:()=>Qo,ab:()=>yh,ae:()=>wl,af:()=>_h,ag:()=>bl,aj:()=>Fs,ak:()=>Cl,am:()=>Al,an:()=>Iu,ao:()=>Dn,ap:()=>Xe,aq:()=>Mt,ar:()=>Ye,as:()=>$e,at:()=>Ka,au:()=>xu,av:()=>Re,aw:()=>ee,ax:()=>oe,ay:()=>Z,az:()=>Ri,b:()=>On,c:()=>Fl,d:()=>la,e:()=>xp,f:()=>I,g:()=>_e,h:()=>U,i:()=>ys,j:()=>bt,k:()=>mo,l:()=>qn,m:()=>Qm,o:()=>de,r:()=>Cu,s:()=>ho,u:()=>Mi,z:()=>Ne});var h=P(5861),$=P(2090),N=P(9681),re=P(655),te=P(1877),ve=P(4859);const de={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function X(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ke=function Ke(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Le=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),be=new te.Yd("@firebase/auth");function nt(v,...g){be.logLevel<=te.in.ERROR&&be.error(`Auth (${N.SDK_VERSION}): ${v}`,...g)}function $e(v,...g){throw Qe(v,...g)}function Re(v,...g){return Qe(v,...g)}function Me(v,g,m){const w=Object.assign(Object.assign({},ke()),{[g]:m});return new $.LL("auth","Firebase",w).create(g,{appName:v.name})}function Ee(v,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&$e(v,"argument-error"),Me(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qe(v,...g){if("string"!=typeof v){const m=g[0],w=[...g.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(m,...w)}return Le.create(v,...g)}function ee(v,g,...m){if(!v)throw Qe(g,...m)}function et(v){const g="INTERNAL ASSERTION FAILED: "+v;throw nt(g),new Error(g)}function Xe(v,g){v||et(g)}const ie=new Map;function oe(v){Xe(v instanceof Function,"Expected a class definition");let g=ie.get(v);return g?(Xe(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,ie.set(v,g),g)}function pe(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Fe(){return"http:"===Rt()||"https:"===Rt()}function Rt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ge{constructor(g,m){this.shortDelay=g,this.longDelay=m,Xe(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function Qt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Fe()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jt(v,g){Xe(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class tr{static initialize(g,m,w){this.fetchImpl=g,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const xn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nn=new Ge(3e4,6e4);function Xt(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function rn(v,g,m,w){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,h.Z)(function*(v,g,m,w,M={}){return fr(v,M,(0,h.Z)(function*(){let k={},J={};w&&("GET"===g?J=w:k={body:JSON.stringify(w)});const xe=(0,$.xO)(Object.assign({key:v.config.apiKey},J)).slice(1),ct=yield v._getAdditionalHeaders();return ct["Content-Type"]="application/json",v.languageCode&&(ct["X-Firebase-Locale"]=v.languageCode),tr.fetch()(ci(v,v.config.apiHost,m,xe),Object.assign({method:g,headers:ct,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function fr(v,g,m){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,h.Z)(function*(v,g,m){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},xn),g);try{const M=new pr(v),k=yield Promise.race([m(),M.promise]);M.clearNetworkTimeout();const J=yield k.json();if("needConfirmation"in J)throw br(v,"account-exists-with-different-credential",J);if(k.ok&&!("errorMessage"in J))return J;{const xe=k.ok?J.errorMessage:J.error.message,[ct,Dt]=xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ct)throw br(v,"credential-already-in-use",J);if("EMAIL_EXISTS"===ct)throw br(v,"email-already-in-use",J);const Ut=w[ct]||ct.toLowerCase().replace(/[_\s]+/g,"-");if(Dt)throw Me(v,Ut,Dt);$e(v,Ut)}}catch(M){if(M instanceof $.ZR)throw M;$e(v,"network-request-failed")}})).apply(this,arguments)}function wr(v,g,m,w){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,h.Z)(function*(v,g,m,w,M={}){const k=yield rn(v,g,m,w,M);return"mfaPendingCredential"in k&&$e(v,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function ci(v,g,m,w){const M=`${g}${m}?${w}`;return v.config.emulator?Jt(v.config,M):`${v.config.apiScheme}://${M}`}class pr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(Re(this.auth,"network-request-failed")),nn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function br(v,g,m){const w={appName:v.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const M=Re(v,g,w);return M.customData._tokenResponse=m,M}function ft(){return(ft=(0,h.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Mr(v,g){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,h.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function an(v,g){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,h.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function di(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function $r(){return($r=(0,h.Z)(function*(v,g=!1){const m=(0,$.m9)(v),w=yield m.getIdToken(g),M=Gt(w);ee(M&&M.exp&&M.auth_time&&M.iat,m.auth,"internal-error");const k="object"==typeof M.firebase?M.firebase:void 0,J=null==k?void 0:k.sign_in_provider;return{claims:M,token:w,authTime:di(Js(M.auth_time)),issuedAtTime:di(Js(M.iat)),expirationTime:di(Js(M.exp)),signInProvider:J||null,signInSecondFactor:(null==k?void 0:k.sign_in_second_factor)||null}})).apply(this,arguments)}function Js(v){return 1e3*Number(v)}function Gt(v){const[g,m,w]=v.split(".");if(void 0===g||void 0===m||void 0===w)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,$.tV)(m);return M?JSON.parse(M):(nt("Failed to decode base64 JWT payload"),null)}catch(M){return nt("Caught error parsing JWT payload as JSON",M),null}}function at(v,g){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,h.Z)(function*(v,g,m=!1){if(m)return g;try{return yield g}catch(w){throw w instanceof $.ZR&&ji(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function ji({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Wt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const M=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(g);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),w)}iteration(){var g=this;return(0,h.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&g.schedule(!0))}g.schedule()})()}}class $i{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=di(this.lastLoginAt),this.creationTime=di(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vn(v){return ln.apply(this,arguments)}function ln(){return(ln=(0,h.Z)(function*(v){var g;const m=v.auth,w=yield v.getIdToken(),M=yield at(v,an(m,{idToken:w}));ee(null==M?void 0:M.users.length,m,"internal-error");const k=M.users[0];v._notifyReloadListener(k);const J=(null===(g=k.providerUserInfo)||void 0===g?void 0:g.length)?We(k.providerUserInfo):[],xe=qt(v.providerData,J),Ut=!!v.isAnonymous&&!(v.email&&k.passwordHash||(null==xe?void 0:xe.length)),cn={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:xe,metadata:new $i(k.createdAt,k.lastLoginAt),isAnonymous:Ut};Object.assign(v,cn)})).apply(this,arguments)}function Un(){return(Un=(0,h.Z)(function*(v){const g=(0,$.m9)(v);yield Vn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function qt(v,g){return[...v.filter(w=>!g.some(M=>M.providerId===w.providerId)),...g]}function We(v){return v.map(g=>{var{providerId:m}=g,w=(0,re._T)(g,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function rt(){return(rt=(0,h.Z)(function*(v,g){const m=yield fr(v,{},(0,h.Z)(function*(){const w=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:M,apiKey:k}=v.config,J=ci(v,M,"/v1/token",`key=${k}`),xe=yield v._getAdditionalHeaders();return xe["Content-Type"]="application/x-www-form-urlencoded",tr.fetch()(J,{method:"POST",headers:xe,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class gt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ee(g.idToken,"internal-error"),ee(void 0!==g.idToken,"internal-error"),ee(void 0!==g.refreshToken,"internal-error");const m="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function pt(v){const g=Gt(v);return ee(g,"internal-error"),ee(void 0!==g.exp,"internal-error"),ee(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var w=this;return(0,h.Z)(function*(){return ee(!w.accessToken||w.refreshToken,g,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(g,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var w=this;return(0,h.Z)(function*(){const{accessToken:M,refreshToken:k,expiresIn:J}=yield function Ce(v,g){return rt.apply(this,arguments)}(g,m);w.updateTokensAndExpiration(M,k,Number(J))})()}updateTokensAndExpiration(g,m,w){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(g,m){const{refreshToken:w,accessToken:M,expirationTime:k}=m,J=new gt;return w&&(ee("string"==typeof w,"internal-error",{appName:g}),J.refreshToken=w),M&&(ee("string"==typeof M,"internal-error",{appName:g}),J.accessToken=M),k&&(ee("number"==typeof k,"internal-error",{appName:g}),J.expirationTime=k),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new gt,this.toJSON())}_performRefresh(){return et("not implemented")}}function Ft(v,g){ee("string"==typeof v||void 0===v,"internal-error",{appName:g})}class Lt{constructor(g){var{uid:m,auth:w,stsTokenManager:M}=g,k=(0,re._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new $i(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,h.Z)(function*(){const w=yield at(m,m.stsTokenManager.getToken(m.auth,g));return ee(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(g){return function Nn(v){return $r.apply(this,arguments)}(this,g)}reload(){return function yt(v){return Un.apply(this,arguments)}(this)}_assign(g){this!==g&&(ee(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Lt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var w=this;return(0,h.Z)(function*(){let M=!1;g.idToken&&g.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(g),M=!0),m&&(yield Vn(w)),yield w.auth._persistUserIfCurrent(w),M&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var g=this;return(0,h.Z)(function*(){const m=yield g.getIdToken();return yield at(g,function as(v,g){return ft.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var w,M,k,J,xe,ct,Dt,Ut;const cn=null!==(w=m.displayName)&&void 0!==w?w:void 0,yo=null!==(M=m.email)&&void 0!==M?M:void 0,Oi=null!==(k=m.phoneNumber)&&void 0!==k?k:void 0,Pu=null!==(J=m.photoURL)&&void 0!==J?J:void 0,cd=null!==(xe=m.tenantId)&&void 0!==xe?xe:void 0,$l=null!==(ct=m._redirectEventId)&&void 0!==ct?ct:void 0,ey=null!==(Dt=m.createdAt)&&void 0!==Dt?Dt:void 0,Hl=null!==(Ut=m.lastLoginAt)&&void 0!==Ut?Ut:void 0,{uid:ha,emailVerified:Fp,isAnonymous:ku,providerData:Gl,stsTokenManager:Lp}=m;ee(ha&&Lp,g,"internal-error");const kh=gt.fromJSON(this.name,Lp);ee("string"==typeof ha,g,"internal-error"),Ft(cn,g.name),Ft(yo,g.name),ee("boolean"==typeof Fp,g,"internal-error"),ee("boolean"==typeof ku,g,"internal-error"),Ft(Oi,g.name),Ft(Pu,g.name),Ft(cd,g.name),Ft($l,g.name),Ft(ey,g.name),Ft(Hl,g.name);const Za=new Lt({uid:ha,auth:g,email:yo,emailVerified:Fp,displayName:cn,isAnonymous:ku,photoURL:Pu,phoneNumber:Oi,tenantId:cd,stsTokenManager:kh,createdAt:ey,lastLoginAt:Hl});return Gl&&Array.isArray(Gl)&&(Za.providerData=Gl.map(ty=>Object.assign({},ty))),$l&&(Za._redirectEventId=$l),Za}static _fromIdTokenResponse(g,m,w=!1){return(0,h.Z)(function*(){const M=new gt;M.updateFromServerResponse(m);const k=new Lt({uid:m.localId,auth:g,stsTokenManager:M,isAnonymous:w});return yield Vn(k),k})()}}const B=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,w){var M=this;return(0,h.Z)(function*(){M.storage[m]=w})()}_get(m){var w=this;return(0,h.Z)(function*(){const M=w.storage[m];return void 0===M?null:M})()}_remove(m){var w=this;return(0,h.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return v.type="NONE",v})();function Z(v,g,m){return`firebase:${v}:${g}:${m}`}class fe{constructor(g,m,w){this.persistence=g,this.auth=m,this.userKey=w;const{config:M,name:k}=this.auth;this.fullUserKey=Z(this.userKey,M.apiKey,k),this.fullPersistenceKey=Z("persistence",M.apiKey,k),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,h.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?Lt._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,h.Z)(function*(){if(m.persistence===g)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,w="authUser"){return(0,h.Z)(function*(){if(!m.length)return new fe(oe(B),g,w);const M=(yield Promise.all(m.map(function(){var Dt=(0,h.Z)(function*(Ut){if(yield Ut._isAvailable())return Ut});return function(Ut){return Dt.apply(this,arguments)}}()))).filter(Dt=>Dt);let k=M[0]||oe(B);const J=Z(w,g.config.apiKey,g.name);let xe=null;for(const Dt of m)try{const Ut=yield Dt._get(J);if(Ut){const cn=Lt._fromJSON(g,Ut);Dt!==k&&(xe=cn),k=Dt;break}}catch(Ut){}const ct=M.filter(Dt=>Dt._shouldAllowMigration);return k._shouldAllowMigration&&ct.length?(k=ct[0],xe&&(yield k._set(J,xe.toJSON())),yield Promise.all(m.map(function(){var Dt=(0,h.Z)(function*(Ut){if(Ut!==k)try{yield Ut._remove(J)}catch(cn){}});return function(Ut){return Dt.apply(this,arguments)}}())),new fe(k,g,w)):new fe(k,g,w)})()}}function O(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ve(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(V(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Ct(g))return"Blackberry";if(st(g))return"Webos";if(j(g))return"Safari";if((g.includes("chrome/")||ue(g))&&!g.includes("edge/"))return"Chrome";if(Ye(g))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function V(v=(0,$.z$)()){return/firefox\//i.test(v)}function j(v=(0,$.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ue(v=(0,$.z$)()){return/crios\//i.test(v)}function Ve(v=(0,$.z$)()){return/iemobile/i.test(v)}function Ye(v=(0,$.z$)()){return/android/i.test(v)}function Ct(v=(0,$.z$)()){return/blackberry/i.test(v)}function st(v=(0,$.z$)()){return/webos/i.test(v)}function Mt(v=(0,$.z$)()){return/iphone|ipad|ipod/i.test(v)}function Dn(v=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function xr(v=(0,$.z$)()){return Mt(v)||Ye(v)||st(v)||Ct(v)||/windows phone/i.test(v)||Ve(v)}function Yn(v,g=[]){let m;switch(v){case"Browser":m=O((0,$.z$)());break;case"Worker":m=`${O((0,$.z$)())}-${v}`;break;default:m=v}const w=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${N.SDK_VERSION}/${w}`}class hu{constructor(g,m,w){this.app=g,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Je(this),this.idTokenSubscription=new Je(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Le,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(g,m){var w=this;return m&&(this._popupRedirectResolver=oe(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var M,k;if(!w._deleted&&(w.persistenceManager=yield fe.create(w,g),!w._deleted)){if(null===(M=w._popupRedirectResolver)||void 0===M?void 0:M._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(J){}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(k=w.currentUser)||void 0===k?void 0:k.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,h.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m)}})()}initializeCurrentUser(g){var m=this;return(0,h.Z)(function*(){var w;let M=yield m.assertedPersistence.getCurrentUser();if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const k=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,J=null==M?void 0:M._redirectEventId,xe=yield m.tryRedirectSignIn(g);(!k||k===J)&&(null==xe?void 0:xe.user)&&(M=xe.user)}return M?M._redirectEventId?(ee(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===M._redirectEventId?m.directlySetCurrentUser(M):m.reloadAndSetCurrentUserOrClear(M)):m.reloadAndSetCurrentUserOrClear(M):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var m=this;return(0,h.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch(M){yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,h.Z)(function*(){try{yield Vn(g)}catch(w){if("auth/network-request-failed"!==w.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function on(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,h.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,h.Z)(function*(){const w=g?(0,$.m9)(g):null;return w&&ee(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(g){var m=this;return(0,h.Z)(function*(){if(!m._deleted)return g&&ee(m.tenantId===g.tenantId,m,"tenant-id-mismatch"),m.queue((0,h.Z)(function*(){yield m.directlySetCurrentUser(g),m.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,h.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(oe(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,m,w){return this.registerStateListener(this.authStateSubscription,g,m,w)}onIdTokenChanged(g,m,w){return this.registerStateListener(this.idTokenSubscription,g,m,w)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var w=this;return(0,h.Z)(function*(){const M=yield w.getOrInitRedirectPersistenceManager(m);return null===g?M.removeCurrentUser():M.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const w=g&&oe(g)||m._popupRedirectResolver;ee(w,m,"argument-error"),m.redirectPersistenceManager=yield fe.create(m,[oe(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,h.Z)(function*(){var w,M;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===g?m._currentUser:(null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,h.Z)(function*(){if(g===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,w,M){if(this._deleted)return()=>{};const k="function"==typeof m?m:m.next.bind(m),J=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(J,this,"internal-error"),J.then(()=>k(this.currentUser)),"function"==typeof m?g.addObserver(m,w,M):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==g&&(m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh()),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Yn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,h.Z)(function*(){var m;const w={"X-Client-Version":g.clientVersion};g.app.options.appId&&(w["X-Firebase-gmpid"]=g.app.options.appId);const M=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return M&&(w["X-Firebase-Client"]=M),w})()}}function dn(v){return(0,$.m9)(v)}class Je{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(m=>this.observer=m)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function zt(v,g,m){const w=dn(v);ee(w._canInitEmulator,w,"emulator-config-failed"),ee(/^https?:\/\//.test(g),w,"invalid-emulator-scheme");const M=!!(null==m?void 0:m.disableWarnings),k=hn(g),{host:J,port:xe}=function Rr(v){const g=hn(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(w);if(M){const k=M[1];return{host:k,port:us(w.substr(k.length+1))}}{const[k,J]=w.split(":");return{host:k,port:us(J)}}}(g);w.config.emulator={url:`${k}//${J}${null===xe?"":`:${xe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:J,port:xe,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function rr(){function v(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function hn(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function us(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Nr{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return et("not implemented")}_getIdTokenResponse(g){return et("not implemented")}_linkToIdToken(g,m){return et("not implemented")}_getReauthenticationResolver(g){return et("not implemented")}}function In(v,g){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,h.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:resetPassword",Xt(v,g))})).apply(this,arguments)}function Xs(v,g){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,h.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function fu(v,g){return Di.apply(this,arguments)}function Di(){return(Di=(0,h.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:update",Xt(v,g))})).apply(this,arguments)}function Hi(){return(Hi=(0,h.Z)(function*(v,g){return wr(v,"POST","/v1/accounts:signInWithPassword",Xt(v,g))})).apply(this,arguments)}function ir(v,g){return Os.apply(this,arguments)}function Os(){return(Os=(0,h.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:sendOobCode",Xt(v,g))})).apply(this,arguments)}function eo(v,g){return Or.apply(this,arguments)}function Or(){return(Or=(0,h.Z)(function*(v,g){return ir(v,g)})).apply(this,arguments)}function yn(v,g){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,h.Z)(function*(v,g){return ir(v,g)})).apply(this,arguments)}function Bc(v,g){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,h.Z)(function*(v,g){return ir(v,g)})).apply(this,arguments)}function Gi(v,g){return pu.apply(this,arguments)}function pu(){return(pu=(0,h.Z)(function*(v,g){return ir(v,g)})).apply(this,arguments)}function Vo(){return(Vo=(0,h.Z)(function*(v,g){return wr(v,"POST","/v1/accounts:signInWithEmailLink",Xt(v,g))})).apply(this,arguments)}function pl(){return(pl=(0,h.Z)(function*(v,g){return wr(v,"POST","/v1/accounts:signInWithEmailLink",Xt(v,g))})).apply(this,arguments)}class gu extends Nr{constructor(g,m,w,M=null){super("password",w),this._email=g,this._password=m,this._tenantId=M}static _fromEmailAndPassword(g,m){return new gu(g,m,"password")}static _fromEmailAndCode(g,m,w=null){return new gu(g,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function fl(v,g){return Hi.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Lo(v,g){return Vo.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:$e(g,"internal-error")}})()}_linkToIdToken(g,m){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return Xs(g,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Ii(v,g){return pl.apply(this,arguments)}(g,{idToken:m,email:w._email,oobCode:w._password});default:$e(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ps(v,g){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,h.Z)(function*(v,g){return wr(v,"POST","/v1/accounts:signInWithIdp",Xt(v,g))})).apply(this,arguments)}class ls extends Nr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new ls(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):$e("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:M}=m,k=(0,re._T)(m,["providerId","signInMethod"]);if(!w||!M)return null;const J=new ls(w,M);return J.idToken=k.idToken||void 0,J.accessToken=k.accessToken||void 0,J.secret=k.secret,J.nonce=k.nonce,J.pendingToken=k.pendingToken||null,J}_getIdTokenResponse(g){return Ps(g,this.buildRequest())}_linkToIdToken(g,m){const w=this.buildRequest();return w.idToken=m,Ps(g,w)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Ps(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,$.xO)(m)}return g}}function wp(v,g){return jc.apply(this,arguments)}function jc(){return(jc=(0,h.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:sendVerificationCode",Xt(v,g))})).apply(this,arguments)}function Ma(){return(Ma=(0,h.Z)(function*(v,g){return wr(v,"POST","/v1/accounts:signInWithPhoneNumber",Xt(v,g))})).apply(this,arguments)}function Hc(){return(Hc=(0,h.Z)(function*(v,g){const m=yield wr(v,"POST","/v1/accounts:signInWithPhoneNumber",Xt(v,g));if(m.temporaryProof)throw br(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const bp={USER_NOT_FOUND:"user-not-found"};function gl(){return(gl=(0,h.Z)(function*(v,g){return wr(v,"POST","/v1/accounts:signInWithPhoneNumber",Xt(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),bp)})).apply(this,arguments)}class Bo extends Nr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new Bo({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new Bo({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function $c(v,g){return Ma.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function Uo(v,g){return Hc.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Dp(v,g){return gl.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:w,verificationCode:M}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:w,code:M}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:w,phoneNumber:M,temporaryProof:k}=g;return w||m||M||k?new Bo({verificationId:m,verificationCode:w,phoneNumber:M,temporaryProof:k}):null}}class ks{constructor(g){var m,w,M,k,J,xe;const ct=(0,$.zd)((0,$.pd)(g)),Dt=null!==(m=ct.apiKey)&&void 0!==m?m:null,Ut=null!==(w=ct.oobCode)&&void 0!==w?w:null,cn=function Ip(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=ct.mode)&&void 0!==M?M:null);ee(Dt&&Ut&&cn,"argument-error"),this.apiKey=Dt,this.operation=cn,this.code=Ut,this.continueUrl=null!==(k=ct.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(J=ct.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(xe=ct.tenantId)&&void 0!==xe?xe:null}static parseLink(g){const m=function Hm(v){const g=(0,$.zd)((0,$.pd)(v)).link,m=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,w=(0,$.zd)((0,$.pd)(v)).deep_link_id;return(w?(0,$.zd)((0,$.pd)(w)).link:null)||w||m||g||v}(g);try{return new ks(m)}catch(w){return null}}}let mu=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,w){return gu._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const M=ks.parseLink(w);return ee(M,"argument-error"),gu._fromEmailAndCode(m,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class cs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class xa extends cs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class hi extends xa{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return ee("providerId"in m&&"signInMethod"in m,"argument-error"),ls._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ee(g.idToken||g.accessToken,"argument-error"),ls._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return hi.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return hi.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:k,nonce:J,providerId:xe}=g;if(!w&&!M&&!m&&!k||!xe)return null;try{return new hi(xe)._credential({idToken:m,accessToken:w,nonce:J,pendingToken:k})}catch(ct){return null}}}let fh=(()=>{class v extends xa{constructor(){super("facebook.com")}static credential(m){return ls._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),jo=(()=>{class v extends xa{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return ls._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:M}=m;if(!w&&!M)return null;try{return v.credential(w,M)}catch(k){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),yu=(()=>{class v extends xa{constructor(){super("github.com")}static credential(m){return ls._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ra extends Nr{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Ps(g,this.buildRequest())}_linkToIdToken(g,m){const w=this.buildRequest();return w.idToken=m,Ps(g,w)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Ps(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:w,signInMethod:M,pendingToken:k}=m;return w&&M&&k&&w===M?new Ra(w,k):null}static _create(g,m){return new Ra(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ci extends cs{constructor(g){ee(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Ci.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Ci.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=Ra.fromJSON(g);return ee(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:w}=g;if(!m||!w)return null;try{return Ra._create(w,m)}catch(M){return null}}}let ds=(()=>{class v extends xa{constructor(){super("twitter.com")}static credential(m,w){return ls._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:M}=m;if(!w||!M)return null;try{return v.credential(w,M)}catch(k){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function _u(v,g){return Na.apply(this,arguments)}function Na(){return(Na=(0,h.Z)(function*(v,g){return wr(v,"POST","/v1/accounts:signUp",Xt(v,g))})).apply(this,arguments)}class An{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,w,M=!1){return(0,h.Z)(function*(){const k=yield Lt._fromIdTokenResponse(g,w,M),J=$o(w);return new An({user:k,providerId:J,_tokenResponse:w,operationType:m})})()}static _forOperation(g,m,w){return(0,h.Z)(function*(){yield g._updateTokensIfNecessary(w,!0);const M=$o(w);return new An({user:g,providerId:M,_tokenResponse:w,operationType:m})})()}}function $o(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Cp(v){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,h.Z)(function*(v){var g;const m=dn(v);if(yield m._initializationPromise,null===(g=m.currentUser)||void 0===g?void 0:g.isAnonymous)return new An({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield _u(m,{returnSecureToken:!0}),M=yield An._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class ml extends $.ZR{constructor(g,m,w,M){var k;super(m.code,m.message),this.operationType=w,this.user=M,Object.setPrototypeOf(this,ml.prototype),this.customData={appName:g.name,tenantId:null!==(k=g.tenantId)&&void 0!==k?k:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(g,m,w,M){return new ml(g,m,w,M)}}function zc(v,g,m,w){return("reauthenticate"===g?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?ml._fromErrorAndOperation(v,k,g,w):k})}function vu(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function Fs(v,g){return to.apply(this,arguments)}function to(){return(to=(0,h.Z)(function*(v,g){const m=(0,$.m9)(v);yield no(!0,m,g);const{providerUserInfo:w}=yield Mr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),M=vu(w||[]);return m.providerData=m.providerData.filter(k=>M.has(k.providerId)),M.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function yl(v,g){return En.apply(this,arguments)}function En(){return(En=(0,h.Z)(function*(v,g,m=!1){const w=yield at(v,g._linkToIdToken(v.auth,yield v.getIdToken()),m);return An._forOperation(v,"link",w)})).apply(this,arguments)}function no(v,g,m){return ro.apply(this,arguments)}function ro(){return(ro=(0,h.Z)(function*(v,g,m){yield Vn(g);const M=!1===v?"provider-already-linked":"no-such-provider";ee(vu(g.providerData).has(m)===v,g.auth,M)})).apply(this,arguments)}function fn(v,g){return _l.apply(this,arguments)}function _l(){return(_l=(0,h.Z)(function*(v,g,m=!1){const{auth:w}=v,M="reauthenticate";try{const k=yield at(v,zc(w,M,g,v),m);ee(k.idToken,w,"internal-error");const J=Gt(k.idToken);ee(J,w,"internal-error");const{sub:xe}=J;return ee(v.uid===xe,w,"user-mismatch"),An._forOperation(v,M,k)}catch(k){throw"auth/user-not-found"===(null==k?void 0:k.code)&&$e(w,"user-mismatch"),k}})).apply(this,arguments)}function Go(v,g){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,h.Z)(function*(v,g,m=!1){const w="signIn",M=yield zc(v,w,g),k=yield An._fromIdTokenResponse(v,w,M);return m||(yield v._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Dr(v,g){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,h.Z)(function*(v,g){return Go(dn(v),g)})).apply(this,arguments)}function Eu(v,g){return fi.apply(this,arguments)}function fi(){return(fi=(0,h.Z)(function*(v,g){const m=(0,$.m9)(v);return yield no(!1,m,g.providerId),yl(m,g)})).apply(this,arguments)}function Hr(v,g){return hs.apply(this,arguments)}function hs(){return(hs=(0,h.Z)(function*(v,g){return fn((0,$.m9)(v),g)})).apply(this,arguments)}function io(v,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,h.Z)(function*(v,g){return wr(v,"POST","/v1/accounts:signInWithCustomToken",Xt(v,g))})).apply(this,arguments)}function Ti(v,g){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,h.Z)(function*(v,g){const m=dn(v),w=yield io(m,{token:g,returnSecureToken:!0}),M=yield An._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class fs{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?wt._fromServerResponse(g,m):$e(g,"internal-error")}}class wt extends fs{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new wt(m)}}function Oa(v,g,m){var w;ee((null===(w=m.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),ee(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ee(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(ee(m.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function Wc(v,g,m){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,h.Z)(function*(v,g,m){const w=(0,$.m9)(v),M={requestType:"PASSWORD_RESET",email:g};m&&Oa(w,M,m),yield yn(w,M)})).apply(this,arguments)}function qc(v,g,m){return qo.apply(this,arguments)}function qo(){return(qo=(0,h.Z)(function*(v,g,m){yield In((0,$.m9)(v),{oobCode:g,newPassword:m})})).apply(this,arguments)}function gh(v,g){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,h.Z)(function*(v,g){yield fu((0,$.m9)(v),{oobCode:g})})).apply(this,arguments)}function Te(v,g){return $t.apply(this,arguments)}function $t(){return($t=(0,h.Z)(function*(v,g){const m=(0,$.m9)(v),w=yield In(m,{oobCode:g}),M=w.requestType;switch(ee(M,m,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(w.mfaInfo,m,"internal-error");default:ee(w.email,m,"internal-error")}let k=null;return w.mfaInfo&&(k=fs._fromServerResponse(dn(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:k},operation:M}})).apply(this,arguments)}function mh(v,g){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(v,g){const{data:m}=yield Te((0,$.m9)(v),g);return m.email})).apply(this,arguments)}function wu(v,g,m){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,h.Z)(function*(v,g,m){const w=dn(v),M=yield _u(w,{returnSecureToken:!0,email:g,password:m}),k=yield An._fromIdTokenResponse(w,"signIn",M);return yield w._updateCurrentUser(k.user),k})).apply(this,arguments)}function Ai(v,g,m){return Dr((0,$.m9)(v),mu.credential(g,m))}function vl(v,g,m){return ka.apply(this,arguments)}function ka(){return(ka=(0,h.Z)(function*(v,g,m){const w=(0,$.m9)(v),M={requestType:"EMAIL_SIGNIN",email:g};ee(m.handleCodeInApp,w,"argument-error"),m&&Oa(w,M,m),yield Bc(w,M)})).apply(this,arguments)}function Tp(v,g){const m=ks.parseLink(g);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}function El(v,g,m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,h.Z)(function*(v,g,m){const w=(0,$.m9)(v),M=mu.credentialWithLink(g,m||pe());return ee(M._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Dr(w,M)})).apply(this,arguments)}function Zo(v,g){return sr.apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:createAuthUri",Xt(v,g))})).apply(this,arguments)}function qi(v,g){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,h.Z)(function*(v,g){const w={identifier:g,continueUri:Fe()?pe():"http://localhost"},{signinMethods:M}=yield Zo((0,$.m9)(v),w);return M||[]})).apply(this,arguments)}function Qo(v,g){return ei.apply(this,arguments)}function ei(){return(ei=(0,h.Z)(function*(v,g){const m=(0,$.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Oa(m.auth,M,g);const{email:k}=yield eo(m.auth,M);k!==v.email&&(yield v.reload())})).apply(this,arguments)}function yh(v,g,m){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,h.Z)(function*(v,g,m){const w=(0,$.m9)(v),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};m&&Oa(w.auth,k,m);const{email:J}=yield Gi(w.auth,k);J!==v.email&&(yield v.reload())})).apply(this,arguments)}function Kc(v,g){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,h.Z)(function*(v,g){return rn(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function wl(v,g){return Us.apply(this,arguments)}function Us(){return(Us=(0,h.Z)(function*(v,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const w=(0,$.m9)(v),k={idToken:yield w.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},J=yield at(w,Kc(w.auth,k));w.displayName=J.displayName||null,w.photoURL=J.photoUrl||null;const xe=w.providerData.find(({providerId:ct})=>"password"===ct);xe&&(xe.displayName=w.displayName,xe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(J)})).apply(this,arguments)}function _h(v,g){return Dl((0,$.m9)(v),g,null)}function bl(v,g){return Dl((0,$.m9)(v),null,g)}function Dl(v,g,m){return bu.apply(this,arguments)}function bu(){return(bu=(0,h.Z)(function*(v,g,m){const{auth:w}=v,k={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(k.email=g),m&&(k.password=m);const J=yield at(v,Xs(w,k));yield v._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class so{constructor(g,m,w={}){this.isNewUser=g,this.providerId=m,this.profile=w}}class Il extends so{constructor(g,m,w,M){super(g,m,w),this.username=M}}class vh extends so{constructor(g,m){super(g,"facebook.com",m)}}class Zc extends Il{constructor(g,m){super(g,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class oo extends so{constructor(g,m){super(g,"google.com",m)}}class Bs extends Il{constructor(g,m,w){super(g,"twitter.com",m,w)}}function Cl(v){const{user:g,_tokenResponse:m}=v;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function La(v){var g,m;if(!v)return null;const{providerId:w}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},k=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const J=null===(m=null===(g=Gt(v.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(J)return new so(k,"anonymous"!==J&&"custom"!==J?J:null)}if(!w)return null;switch(w){case"facebook.com":return new vh(k,M);case"github.com":return new Zc(k,M);case"google.com":return new oo(k,M);case"twitter.com":return new Bs(k,M,v.screenName||null);case"custom":case"anonymous":return new so(k,null);default:return new so(k,w,M)}}(m)}class ao{constructor(g,m){this.type=g,this.credential=m}static _fromIdtoken(g){return new ao("enroll",g)}static _fromMfaPendingCredential(g){return new ao("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,w;if(null==g?void 0:g.multiFactorSession){if(null===(m=g.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ao._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(w=g.multiFactorSession)||void 0===w?void 0:w.idToken)return ao._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Va{constructor(g,m,w){this.session=g,this.hints=m,this.signInResolver=w}static _fromError(g,m){const w=dn(g),M=m.customData._serverResponse,k=(M.mfaInfo||[]).map(xe=>fs._fromServerResponse(w,xe));ee(M.mfaPendingCredential,w,"internal-error");const J=ao._fromMfaPendingCredential(M.mfaPendingCredential);return new Va(J,k,function(){var xe=(0,h.Z)(function*(ct){const Dt=yield ct._process(w,J);delete M.mfaInfo,delete M.mfaPendingCredential;const Ut=Object.assign(Object.assign({},M),{idToken:Dt.idToken,refreshToken:Dt.refreshToken});switch(m.operationType){case"signIn":const cn=yield An._fromIdTokenResponse(w,m.operationType,Ut);return yield w._updateCurrentUser(cn.user),cn;case"reauthenticate":return ee(m.user,w,"internal-error"),An._forOperation(m.user,m.operationType,Ut);default:$e(w,"internal-error")}});return function(ct){return xe.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,h.Z)(function*(){return m.signInResolver(g)})()}}function Al(v,g){var m;const w=(0,$.m9)(v),M=g;return ee(g.customData.operationType,w,"argument-error"),ee(null===(m=M.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),Va._fromError(w,M)}function Du(v,g){return rn(v,"POST","/v2/accounts/mfaEnrollment:start",Xt(v,g))}class Jc{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>fs._fromServerResponse(g.auth,w)))})}static _fromUser(g){return new Jc(g)}getSession(){var g=this;return(0,h.Z)(function*(){return ao._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,m){var w=this;return(0,h.Z)(function*(){const M=g,k=yield w.getSession(),J=yield at(w.user,M._process(w.user.auth,k,m));return yield w.user._updateTokensIfNecessary(J),w.user.reload()})()}unenroll(g){var m=this;return(0,h.Z)(function*(){const w="string"==typeof g?g:g.uid,M=yield m.user.getIdToken(),k=yield at(m.user,function Qc(v,g){return rn(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Xt(v,g))}(m.user.auth,{idToken:M,mfaEnrollmentId:w}));m.enrolledFactors=m.enrolledFactors.filter(({uid:J})=>J!==w),yield m.user._updateTokensIfNecessary(k);try{yield m.user.reload()}catch(J){if("auth/user-token-expired"!==J.code)throw J}})()}}const ps=new WeakMap;function Iu(v){const g=(0,$.m9)(v);return ps.has(g)||ps.set(g,Jc._fromUser(g)),ps.get(g)}const Ua="__sak";class wh{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Ua,"1"),this.storage.removeItem(Ua),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const On=(()=>{class v extends wh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Xo(){const v=(0,$.z$)();return j(v)||Mt(v)}()&&function bi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=xr(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const M=this.storage.getItem(w),k=this.localCache[w];M!==k&&m(w,k,M)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((xe,ct,Dt)=>{this.notifyListeners(xe,Dt)});const M=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const xe=this.storage.getItem(M);if(m.newValue!==xe)null!==m.newValue?this.storage.setItem(M,m.newValue):this.storage.removeItem(M);else if(this.localCache[M]===m.newValue&&!w)return}const k=()=>{const xe=this.storage.getItem(M);!w&&this.localCache[M]===xe||this.notifyListeners(M,xe)},J=this.storage.getItem(M);!function Yt(){return(0,$.w1)()&&10===document.documentMode}()||J===m.newValue||m.newValue===m.oldValue?k():setTimeout(k,10)}notifyListeners(m,w){this.localCache[m]=w;const M=this.listeners[m];if(M)for(const k of Array.from(M))k(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var M=()=>super._set,k=this;return(0,h.Z)(function*(){yield M().call(k,m,w),k.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,M=this;return(0,h.Z)(function*(){const k=yield w().call(M,m);return M.localCache[m]=JSON.stringify(k),k})()}_remove(m){var w=()=>super._remove,M=this;return(0,h.Z)(function*(){yield w().call(M,m),delete M.localCache[m]})()}}return v.type="LOCAL",v})(),vt=(()=>{class v extends wh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return v.type="SESSION",v})();let ti=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(k=>k.isListeningto(m));if(w)return w;const M=new v(m);return this.receivers.push(M),M}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,h.Z)(function*(){const M=m,{eventId:k,eventType:J,data:xe}=M.data,ct=w.handlersMap[J];if(!(null==ct?void 0:ct.size))return;M.ports[0].postMessage({status:"ack",eventId:k,eventType:J});const Dt=Array.from(ct).map(function(){var cn=(0,h.Z)(function*(yo){return yo(M.origin,xe)});return function(yo){return cn.apply(this,arguments)}}()),Ut=yield function Ki(v){return Promise.all(v.map(function(){var g=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return g.apply(this,arguments)}}()))}(Dt);M.ports[0].postMessage({status:"done",eventId:k,eventType:J,response:Ut})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function or(v="",g=10){let m="";for(let w=0;w<g;w++)m+=Math.floor(10*Math.random());return v+m}class ed{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,w=50){var M=this;return(0,h.Z)(function*(){const k="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let J,xe;return new Promise((ct,Dt)=>{const Ut=or("",20);k.port1.start();const cn=setTimeout(()=>{Dt(new Error("unsupported_event"))},w);xe={messageChannel:k,onMessage(yo){const Oi=yo;if(Oi.data.eventId===Ut)switch(Oi.data.status){case"ack":clearTimeout(cn),J=setTimeout(()=>{Dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),ct(Oi.data.response);break;default:clearTimeout(cn),clearTimeout(J),Dt(new Error("invalid_response"))}}},M.handlers.add(xe),k.port1.addEventListener("message",xe.onMessage),M.target.postMessage({eventType:g,eventId:Ut,data:m},[k.port2])}).finally(()=>{xe&&M.removeMessageHandler(xe)})})()}}function zn(){return window}function Sl(){return void 0!==zn().WorkerGlobalScope&&"function"==typeof zn().importScripts}function ea(){return(ea=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Ml="firebaseLocalStorageDb",ta="firebaseLocalStorage",Ba="fbase_key";class Pn{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function Hs(v,g){return v.transaction([ta],g?"readwrite":"readonly").objectStore(ta)}function zr(){const v=indexedDB.open(Ml,1);return new Promise((g,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(ta,{keyPath:Ba})}catch(M){m(M)}}),v.addEventListener("success",(0,h.Z)(function*(){const w=v.result;w.objectStoreNames.contains(ta)?g(w):(w.close(),yield function xl(){const v=indexedDB.deleteDatabase(Ml);return new Pn(v).toPromise()}(),g(yield zr()))}))})}function uo(v,g,m){return ni.apply(this,arguments)}function ni(){return(ni=(0,h.Z)(function*(v,g,m){const w=Hs(v,!0).put({[Ba]:g,value:m});return new Pn(w).toPromise()})).apply(this,arguments)}function ja(){return(ja=(0,h.Z)(function*(v,g){const m=Hs(v,!1).get(g),w=yield new Pn(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function lo(v,g){const m=Hs(v,!0).delete(g);return new Pn(m).toPromise()}const ys=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield zr()),m.db})()}_withRetries(m){var w=this;return(0,h.Z)(function*(){let M=0;for(;;)try{const k=yield w._openDb();return yield m(k)}catch(k){if(M++>3)throw k;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Sl()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=ti._getInstance(function jt(){return Sl()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(M,k){return{keyProcessed:(yield m._poll()).includes(k.key)}});return function(M,k){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(M,k){return["keyChanged"]});return function(M,k){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var w,M;if(m.activeServiceWorker=yield function gs(){return ea.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ed(m.activeServiceWorker);const k=yield m.sender._send("ping",{},800);!k||(null===(w=k[0])||void 0===w?void 0:w.fulfilled)&&(null===(M=k[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Zi(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch(M){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield zr();return yield uo(m,Ua,"1"),yield lo(m,Ua),!0}catch(m){}return!1})()}_withPendingWrite(m){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var M=this;return(0,h.Z)(function*(){return M._withPendingWrite((0,h.Z)(function*(){return yield M._withRetries(k=>uo(k,m,w)),M.localCache[m]=w,M.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,h.Z)(function*(){const M=yield w._withRetries(k=>function Gs(v,g){return ja.apply(this,arguments)}(k,m));return w.localCache[m]=M,M})()}_remove(m){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(M=>lo(M,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const w=yield m._withRetries(J=>{const xe=Hs(J,!1).getAll();return new Pn(xe).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const M=[],k=new Set;for(const{fbase_key:J,value:xe}of w)k.add(J),JSON.stringify(m.localCache[J])!==JSON.stringify(xe)&&(m.notifyListeners(J,xe),M.push(J));for(const J of Object.keys(m.localCache))m.localCache[J]&&!k.has(J)&&(m.notifyListeners(J,null),M.push(J));return M})()}notifyListeners(m,w){this.localCache[m]=w;const M=this.listeners[m];if(M)for(const k of Array.from(M))k(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function na(v,g){return rn(v,"POST","/v2/accounts/mfaSignIn:start",Xt(v,g))}function Cr(){return(Cr=(0,h.Z)(function*(v){return(yield rn(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nl(v){return new Promise((g,m)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=g,w.onerror=M=>{const k=Re("internal-error");k.customData=M,m(k)},w.type="text/javascript",w.charset="UTF-8",function _s(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(w)})}function Wn(v){return`__${v}${Math.floor(1e6*Math.random())}`}const vs=1e12;class pi{constructor(g){this.auth=g,this.counter=vs,this._widgets=new Map}render(g,m){const w=this.counter;return this._widgets.set(w,new Yi(g,this.auth.name,m||{})),this.counter++,w}reset(g){var m;const w=g||vs;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(g){var m;return(null===(m=this._widgets.get(g||vs))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,h.Z)(function*(){var w;return null===(w=m._widgets.get(g||vs))||void 0===w||w.execute(),""})()}}class Yi{constructor(g,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof g?document.getElementById(g):g;ee(M,"argument-error",{appName:m}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Qi(v){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cn=Wn("rcb"),sa=new Ge(3e4,6e4);class $n{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!zn().grecaptcha}load(g,m=""){return ee(function Ap(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(zn().grecaptcha):new Promise((w,M)=>{const k=zn().setTimeout(()=>{M(Re(g,"network-request-failed"))},sa.get());zn()[Cn]=()=>{zn().clearTimeout(k),delete zn()[Cn];const xe=zn().grecaptcha;if(!xe)return void M(Re(g,"internal-error"));const ct=xe.render;xe.render=(Dt,Ut)=>{const cn=ct(Dt,Ut);return this.counter++,cn},this.hostLanguage=m,w(xe)},Nl(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Cn,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(k),M(Re(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!zn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Sp{load(g){return(0,h.Z)(function*(){return new pi(g)})()}clearedOneInstance(){}}const Ih="recaptcha",co={theme:"light",type:"image"};class ri{constructor(g,m=Object.assign({},co),w){this.parameters=m,this.type=Ih,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dn(w),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;ee(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Sp:new $n,this.validateStartingState()}verify(){var g=this;return(0,h.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),w=g.getAssertedRecaptcha();return w.getResponse(m)||new Promise(k=>{const J=xe=>{!xe||(g.tokenChangeListeners.delete(J),k(xe))};g.tokenChangeListeners.add(J),g.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof g)g(m);else if("string"==typeof g){const w=zn()[g];"function"==typeof w&&w(m)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,h.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,h.Z)(function*(){ee(Fe()&&!Sl(),g.auth,"internal-error"),yield function Mp(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function ia(v){return Cr.apply(this,arguments)}(g.auth);ee(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ji{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=Bo._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function ho(v,g,m){return oa.apply(this,arguments)}function oa(){return(oa=(0,h.Z)(function*(v,g,m){const w=dn(v),M=yield Ga(w,g,(0,$.m9)(m));return new Ji(M,k=>Dr(w,k))})).apply(this,arguments)}function qn(v,g,m){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,h.Z)(function*(v,g,m){const w=(0,$.m9)(v);yield no(!1,w,"phone");const M=yield Ga(w.auth,g,(0,$.m9)(m));return new Ji(M,k=>Eu(w,k))})).apply(this,arguments)}function Cu(v,g,m){return rd.apply(this,arguments)}function rd(){return(rd=(0,h.Z)(function*(v,g,m){const w=(0,$.m9)(v),M=yield Ga(w.auth,g,(0,$.m9)(m));return new Ji(M,k=>Hr(w,k))})).apply(this,arguments)}function Ga(v,g,m){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,h.Z)(function*(v,g,m){var w;const M=yield m.verify();try{let k;if(ee("string"==typeof M,v,"argument-error"),ee(m.type===Ih,v,"argument-error"),k="string"==typeof g?{phoneNumber:g}:g,"session"in k){const J=k.session;if("phoneNumber"in k)return ee("enroll"===J.type,v,"internal-error"),(yield Du(v,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ee("signin"===J.type,v,"internal-error");const xe=(null===(w=k.multiFactorHint)||void 0===w?void 0:w.uid)||k.multiFactorUid;return ee(xe,v,"missing-multi-factor-info"),(yield na(v,{mfaPendingCredential:J.credential,mfaEnrollmentId:xe,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield wp(v,{phoneNumber:k.phoneNumber,recaptchaToken:M});return J}}finally{m._reset()}})).apply(this,arguments)}function Mi(v,g){return aa.apply(this,arguments)}function aa(){return(aa=(0,h.Z)(function*(v,g){yield yl((0,$.m9)(v),g)})).apply(this,arguments)}let za=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=dn(m)}verifyPhoneNumber(m,w){return Ga(this.auth,m,(0,$.m9)(w))}static credential(m,w){return Bo._fromVerification(m,w)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:M}=m;return w&&M?Bo._fromTokenResponse(w,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function ii(v,g){return g?oe(g):(ee(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class ua extends Nr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ps(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Ps(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Ps(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function Ol(v){return Go(v.auth,new ua(v),v.bypassAuthState)}function Pl(v){const{auth:g,user:m}=v;return ee(m,g,"internal-error"),fn(m,new ua(v),v.bypassAuthState)}function kl(v){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,h.Z)(function*(v){const{auth:g,user:m}=v;return ee(m,g,"internal-error"),yl(m,new ua(v),v.bypassAuthState)})).apply(this,arguments)}class Wa{constructor(g,m,w,M,k=!1){this.auth=g,this.resolver=w,this.user=M,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,h.Z)(function*(w,M){g.pendingPromise={resolve:w,reject:M};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(k){g.reject(k)}});return function(w,M){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:M,postBody:k,tenantId:J,error:xe,type:ct}=g;if(xe)return void m.reject(xe);const Dt={auth:m.auth,requestUri:w,sessionId:M,tenantId:J||void 0,postBody:k||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(ct)(Dt))}catch(Ut){m.reject(Ut)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Ol;case"linkViaPopup":case"linkViaRedirect":return kl;case"reauthViaPopup":case"reauthViaRedirect":return Pl;default:$e(this.auth,"internal-error")}}resolve(g){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const gr=new Ge(2e3,1e4);function Fl(v,g,m){return Es.apply(this,arguments)}function Es(){return(Es=(0,h.Z)(function*(v,g,m){const w=dn(v);Ee(v,g,cs);const M=ii(w,m);return new Au(w,"signInViaPopup",g,M).executeNotNull()})).apply(this,arguments)}function xp(v,g,m){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,h.Z)(function*(v,g,m){const w=(0,$.m9)(v);Ee(w.auth,g,cs);const M=ii(w.auth,m);return new Au(w.auth,"reauthViaPopup",g,M,w).executeNotNull()})).apply(this,arguments)}function la(v,g,m){return si.apply(this,arguments)}function si(){return(si=(0,h.Z)(function*(v,g,m){const w=(0,$.m9)(v);Ee(w.auth,g,cs);const M=ii(w.auth,m);return new Au(w.auth,"linkViaPopup",g,M,w).executeNotNull()})).apply(this,arguments)}let Au=(()=>{class v extends Wa{constructor(m,w,M,k,J){super(m,w,k,J),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const w=yield m.execute();return ee(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,h.Z)(function*(){Xe(1===m.filter.length,"Popup operations only handle one event");const w=or();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(M=>{m.reject(M)}),m.resolver._isIframeWebStorageSupported(m.auth,M=>{M||m.reject(Re(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,M;this.pollId=(null===(M=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===M?void 0:M.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,gr.get())};m()}}return v.currentPopupAction=null,v})();const xi=new Map;class Ch extends Wa{constructor(g,m,w=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,h.Z)(function*(){let w=xi.get(m.auth._key());if(!w){try{const k=(yield function wn(v,g){return qr.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;w=()=>Promise.resolve(k)}catch(M){w=()=>Promise.reject(M)}xi.set(m.auth._key(),w)}return m.bypassAuthState||xi.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(w,g);if("unknown"!==g.type){if(g.eventId){const M=yield w.auth._redirectUserForId(g.eventId);if(M)return w.user=M,m().call(w,g);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function qr(){return(qr=(0,h.Z)(function*(v,g){const m=sd(g),w=ca(v);if(!(yield w._isAvailable()))return!1;const M="true"===(yield w._get(m));return yield w._remove(m),M})).apply(this,arguments)}function Th(v,g){return zs.apply(this,arguments)}function zs(){return(zs=(0,h.Z)(function*(v,g){return ca(v)._set(sd(g),"true")})).apply(this,arguments)}function Su(){xi.clear()}function ca(v){return oe(v._redirectPersistence)}function sd(v){return Z("pendingRedirect",v.config.apiKey,v.name)}function I(v,g,m){return function C(v,g,m){return R.apply(this,arguments)}(v,g,m)}function R(){return(R=(0,h.Z)(function*(v,g,m){const w=dn(v);Ee(v,g,cs);const M=ii(w,m);return yield Th(M,w),M._openRedirect(w,g,"signInViaRedirect")})).apply(this,arguments)}function U(v,g,m){return function Y(v,g,m){return ne.apply(this,arguments)}(v,g,m)}function ne(){return(ne=(0,h.Z)(function*(v,g,m){const w=(0,$.m9)(v);Ee(w.auth,g,cs);const M=ii(w.auth,m);yield Th(M,w.auth);const k=yield ar(w);return M._openRedirect(w.auth,g,"reauthViaRedirect",k)})).apply(this,arguments)}function _e(v,g,m){return function Be(v,g,m){return At.apply(this,arguments)}(v,g,m)}function At(){return(At=(0,h.Z)(function*(v,g,m){const w=(0,$.m9)(v);Ee(w.auth,g,cs);const M=ii(w.auth,m);yield no(!1,w,g.providerId),yield Th(M,w.auth);const k=yield ar(w);return M._openRedirect(w.auth,g,"linkViaRedirect",k)})).apply(this,arguments)}function bt(v,g){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,h.Z)(function*(v,g){return yield dn(v)._initializationPromise,Tt(v,g,!1)})).apply(this,arguments)}function Tt(v,g){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,h.Z)(function*(v,g,m=!1){const w=dn(v),M=ii(w,g),J=yield new Ch(w,M,m).execute();return J&&!m&&(delete J.user._redirectEventId,yield w._persistUserIfCurrent(J.user),yield w._setRedirectUser(null,g)),J})).apply(this,arguments)}function ar(v){return ws.apply(this,arguments)}function ws(){return(ws=(0,h.Z)(function*(v){const g=or(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class Ri{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(g,w)&&(m=!0,this.sendToConsumer(g,w),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Mu(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ni(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var w;if(g.error&&!Ni(g)){const M=(null===(w=g.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(Re(this.auth,M))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const w=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&w}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gi(g))}saveEventToCache(g){this.cachedEventUids.add(gi(g)),this.lastProcessedEventTime=Date.now()}}function gi(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Ni({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function xu(v){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,h.Z)(function*(v,g={}){return rn(v,"GET","/v1/projects",g)})).apply(this,arguments)}const Ll=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rp=/^https?/;function Ah(){return(Ah=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield xu(v);for(const m of g)try{if(fo(m))return}catch(w){}$e(v,"unauthorized-domain")})).apply(this,arguments)}function fo(v){const g=pe(),{protocol:m,hostname:w}=new URL(g);if(v.startsWith("chrome-extension://")){const J=new URL(v);return""===J.hostname&&""===w?"chrome-extension:"===m&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&J.hostname===w}if(!Rp.test(m))return!1;if(Ll.test(v))return w===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(w)}const Vl=new Ge(3e4,6e4);function Np(){const v=zn().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Ul=null;function Wm(v){return Ul=Ul||function w0(v){return new Promise((g,m)=>{var w,M,k;function J(){Np(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Np(),m(Re(v,"network-request-failed"))},timeout:Vl.get()})}if(null===(M=null===(w=zn().gapi)||void 0===w?void 0:w.iframes)||void 0===M?void 0:M.Iframe)g(gapi.iframes.getContext());else{if(!(null===(k=zn().gapi)||void 0===k?void 0:k.load)){const xe=Wn("iframefcb");return zn()[xe]=()=>{gapi.load?J():m(Re(v,"network-request-failed"))},Nl(`https://apis.google.com/js/api.js?onload=${xe}`).catch(ct=>m(ct))}J()}}).catch(g=>{throw Ul=null,g})}(v),Ul}const qm=new Ge(5e3,15e3),po={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},go=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function od(v){const g=v.config;ee(g.authDomain,v,"auth-domain-config-required");const m=g.emulator?Jt(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:g.apiKey,appName:v.name,v:N.SDK_VERSION},M=go.get(v.config.apiHost);M&&(w.eid=M);const k=v._getFrameworks();return k.length&&(w.fw=k.join(",")),`${m}?${(0,$.xO)(w).slice(1)}`}function xh(){return xh=(0,h.Z)(function*(v){const g=yield Wm(v),m=zn().gapi;return ee(m,v,"internal-error"),g.open({where:document.body,url:od(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:po,dontclear:!0},w=>new Promise(function(){var M=(0,h.Z)(function*(k,J){yield w.restyle({setHideOnLeave:!1});const xe=Re(v,"network-request-failed"),ct=zn().setTimeout(()=>{J(xe)},qm.get());function Dt(){zn().clearTimeout(ct),k(w)}w.ping(Dt).then(Dt,()=>{J(xe)})});return function(k,J){return M.apply(this,arguments)}}()))}),xh.apply(this,arguments)}const Nu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bl{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function Ka(v,g,m,w,M,k){ee(v.config.authDomain,v,"auth-domain-config-required"),ee(v.config.apiKey,v,"invalid-api-key");const J={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:w,v:N.SDK_VERSION,eventId:M};if(g instanceof cs){g.setDefaultLanguage(v.languageCode),J.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(J.customParameters=JSON.stringify(g.getCustomParameters()));for(const[ct,Dt]of Object.entries(k||{}))J[ct]=Dt}if(g instanceof xa){const ct=g.getScopes().filter(Dt=>""!==Dt);ct.length>0&&(J.scopes=ct.join(","))}v.tenantId&&(J.tid=v.tenantId);const xe=J;for(const ct of Object.keys(xe))void 0===xe[ct]&&delete xe[ct];return`${function Ym({config:v}){return v.emulator?Jt(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,$.xO)(xe).slice(1)}`}const Ph="webStorageSupport",mo=class da{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vt,this._completeRedirectFn=Tt}_openPopup(g,m,w,M){var k=this;return(0,h.Z)(function*(){var J;Xe(null===(J=k.eventManagers[g._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const xe=Ka(g,m,w,pe(),M);return function Nh(v,g,m,w=500,M=600){const k=Math.max((window.screen.availHeight-M)/2,0).toString(),J=Math.max((window.screen.availWidth-w)/2,0).toString();let xe="";const ct=Object.assign(Object.assign({},Nu),{width:w.toString(),height:M.toString(),top:k,left:J}),Dt=(0,$.z$)().toLowerCase();m&&(xe=ue(Dt)?"_blank":m),V(Dt)&&(g=g||"http://localhost",ct.scrollbars="yes");const Ut=Object.entries(ct).reduce((yo,[Oi,Pu])=>`${yo}${Oi}=${Pu},`,"");if(function nr(v=(0,$.z$)()){var g;return Mt(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Dt)&&"_self"!==xe)return function ud(v,g){const m=document.createElement("a");m.href=v,m.target=g;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(g||"",xe),new Bl(null);const cn=window.open(g||"",xe,Ut);ee(cn,v,"popup-blocked");try{cn.focus()}catch(yo){}return new Bl(cn)}(g,xe,or())})()}_openRedirect(g,m,w,M){var k=this;return(0,h.Z)(function*(){return yield k._originValidation(g),function $s(v){zn().location.href=v}(Ka(g,m,w,pe(),M)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:M,promise:k}=this.eventManagers[m];return M?Promise.resolve(M):(Xe(k,"If manager is not set, promise should be"),k)}const w=this.initAndGetManager(g);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(g){var m=this;return(0,h.Z)(function*(){const w=yield function qa(v){return xh.apply(this,arguments)}(g),M=new Ri(g);return w.register("authEvent",k=>(ee(null==k?void 0:k.authEvent,g,"invalid-auth-event"),{status:M.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:M},m.iframes[g._key()]=w,M})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(Ph,{type:Ph},M=>{var k;const J=null===(k=null==M?void 0:M[0])||void 0===k?void 0:k[Ph];void 0!==J&&m(!!J),$e(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function zm(v){return Ah.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return xr()||j()||Mt()}};class ld extends class jl{constructor(g){this.factorId=g}_process(g,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,w);case"signin":return this._finalizeSignIn(g,m.credential);default:return et("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new ld(g)}_finalizeEnroll(g,m,w){return function Jn(v,g){return rn(v,"POST","/v2/accounts/mfaEnrollment:finalize",Xt(v,g))}(g,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function ra(v,g){return rn(v,"POST","/v2/accounts/mfaSignIn:finalize",Xt(v,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qm=(()=>{class v{constructor(){}static assertion(m){return ld._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Op="@firebase/auth",Jm="0.19.12";class Pp{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(w=>{var M;g((null===(M=w)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function Xm(v){(0,N._registerComponent)(new ve.wA("auth",(g,{options:m})=>{const w=g.getProvider("app").getImmediate(),M=g.getProvider("heartbeat"),{apiKey:k,authDomain:J}=w.options;return((xe,ct)=>{ee(k&&!k.includes(":"),"invalid-api-key",{appName:xe.name}),ee(!(null==J?void 0:J.includes(":")),"argument-error",{appName:xe.name});const Dt={apiKey:k,authDomain:J,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yn(v)},Ut=new hu(xe,ct,Dt);return function De(v,g){const m=(null==g?void 0:g.persistence)||[],w=(Array.isArray(m)?m:[m]).map(oe);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(w,null==g?void 0:g.popupRedirectResolver)}(Ut,m),Ut})(w,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,w)=>{g.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ve.wA("auth-internal",g=>{const m=dn(g.getProvider("auth").getImmediate());return new Pp(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Op,Jm,function kp(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,N.registerVersion)(Op,Jm,"esm2017")}("Browser")},2090:(mt,Se,P)=>{P.d(Se,{BH:()=>Ne,LL:()=>Fe,ZR:()=>pe,zI:()=>oe,US:()=>ce,tV:()=>W,L:()=>ge,$s:()=>$i,r3:()=>rn,Sg:()=>ke,ne:()=>ft,vZ:()=>wr,ZB:()=>X,Lj:()=>Ft,pd:()=>br,m9:()=>yt,z$:()=>Le,jU:()=>nt,ru:()=>$e,d:()=>Me,xb:()=>fr,w1:()=>Ee,hl:()=>Xe,uI:()=>me,UG:()=>be,b$:()=>Re,G6:()=>et,Mn:()=>Qe,X3:()=>gt,xO:()=>ci,zd:()=>pr,eu:()=>ie});var h=P(5861);const te=function(q){const B=[];let Z=0;for(let fe=0;fe<q.length;fe++){let O=q.charCodeAt(fe);O<128?B[Z++]=O:O<2048?(B[Z++]=O>>6|192,B[Z++]=63&O|128):55296==(64512&O)&&fe+1<q.length&&56320==(64512&q.charCodeAt(fe+1))?(O=65536+((1023&O)<<10)+(1023&q.charCodeAt(++fe)),B[Z++]=O>>18|240,B[Z++]=O>>12&63|128,B[Z++]=O>>6&63|128,B[Z++]=63&O|128):(B[Z++]=O>>12|224,B[Z++]=O>>6&63|128,B[Z++]=63&O|128)}return B},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,B){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,fe=[];for(let O=0;O<q.length;O+=3){const V=q[O],j=O+1<q.length,ue=j?q[O+1]:0,Ve=O+2<q.length,Ye=Ve?q[O+2]:0;let Mt=(15&ue)<<2|Ye>>6,Dn=63&Ye;Ve||(Dn=64,j||(Mt=64)),fe.push(Z[V>>2],Z[(3&V)<<4|ue>>4],Z[Mt],Z[Dn])}return fe.join("")},encodeString(q,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(q):this.encodeByteArray(te(q),B)},decodeString(q,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(q):function(q){const B=[];let Z=0,fe=0;for(;Z<q.length;){const O=q[Z++];if(O<128)B[fe++]=String.fromCharCode(O);else if(O>191&&O<224){const V=q[Z++];B[fe++]=String.fromCharCode((31&O)<<6|63&V)}else if(O>239&&O<365){const Ve=((7&O)<<18|(63&q[Z++])<<12|(63&q[Z++])<<6|63&q[Z++])-65536;B[fe++]=String.fromCharCode(55296+(Ve>>10)),B[fe++]=String.fromCharCode(56320+(1023&Ve))}else{const V=q[Z++],j=q[Z++];B[fe++]=String.fromCharCode((15&O)<<12|(63&V)<<6|63&j)}}return B.join("")}(this.decodeStringToByteArray(q,B))},decodeStringToByteArray(q,B){this.init_();const Z=B?this.charToByteMapWebSafe_:this.charToByteMap_,fe=[];for(let O=0;O<q.length;){const V=Z[q.charAt(O++)],ue=O<q.length?Z[q.charAt(O)]:0;++O;const Ye=O<q.length?Z[q.charAt(O)]:64;++O;const st=O<q.length?Z[q.charAt(O)]:64;if(++O,null==V||null==ue||null==Ye||null==st)throw Error();fe.push(V<<2|ue>>4),64!==Ye&&(fe.push(ue<<4&240|Ye>>2),64!==st&&fe.push(Ye<<6&192|st))}return fe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},ge=function(q){return function(q){const B=te(q);return ce.encodeByteArray(B,!0)}(q).replace(/\./g,"")},W=function(q){try{return ce.decodeString(q,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function X(q,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return B}for(const Z in B)!B.hasOwnProperty(Z)||!Ke(Z)||(q[Z]=X(q[Z],B[Z]));return q}function Ke(q){return"__proto__"!==q}class Ne{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,Z)=>{this.resolve=B,this.reject=Z})}wrapCallback(B){return(Z,fe)=>{Z?this.reject(Z):this.resolve(fe),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(Z):B(Z,fe))}}}function ke(q,B){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const fe=B||"demo-project",O=q.iat||0,V=q.sub||q.user_id;if(!V)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const j=Object.assign({iss:`https://securetoken.google.com/${fe}`,aud:fe,iat:O,exp:O+3600,auth_time:O,sub:V,user_id:V,firebase:{sign_in_provider:"custom",identities:{}}},q);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(j)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function me(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(q){return!1}}function nt(){return"object"==typeof self&&self.self===self}function $e(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function Re(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){return Le().indexOf("Electron/")>=0}function Ee(){const q=Le();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Qe(){return Le().indexOf("MSAppHost/")>=0}function et(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xe(){return"object"==typeof indexedDB}function ie(){return new Promise((q,B)=>{try{let Z=!0;const fe="validate-browser-context-for-indexeddb-analytics-module",O=self.indexedDB.open(fe);O.onsuccess=()=>{O.result.close(),Z||self.indexedDB.deleteDatabase(fe),q(!0)},O.onupgradeneeded=()=>{Z=!1},O.onerror=()=>{var V;B((null===(V=O.error)||void 0===V?void 0:V.message)||"")}}catch(Z){B(Z)}})}function oe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class pe extends Error{constructor(B,Z,fe){super(Z),this.code=B,this.customData=fe,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fe.prototype.create)}}class Fe{constructor(B,Z,fe){this.service=B,this.serviceName=Z,this.errors=fe}create(B,...Z){const fe=Z[0]||{},O=`${this.service}/${B}`,V=this.errors[B],j=V?function Rt(q,B){return q.replace(Qt,(Z,fe)=>{const O=B[fe];return null!=O?String(O):`<${fe}?>`})}(V,fe):"Error";return new pe(O,`${this.serviceName}: ${j} (${O}).`,fe)}}const Qt=/\{\$([^}]+)}/g;function rn(q,B){return Object.prototype.hasOwnProperty.call(q,B)}function fr(q){for(const B in q)if(Object.prototype.hasOwnProperty.call(q,B))return!1;return!0}function wr(q,B){if(q===B)return!0;const Z=Object.keys(q),fe=Object.keys(B);for(const O of Z){if(!fe.includes(O))return!1;const V=q[O],j=B[O];if(Bi(V)&&Bi(j)){if(!wr(V,j))return!1}else if(V!==j)return!1}for(const O of fe)if(!Z.includes(O))return!1;return!0}function Bi(q){return null!==q&&"object"==typeof q}function ci(q){const B=[];for(const[Z,fe]of Object.entries(q))Array.isArray(fe)?fe.forEach(O=>{B.push(encodeURIComponent(Z)+"="+encodeURIComponent(O))}):B.push(encodeURIComponent(Z)+"="+encodeURIComponent(fe));return B.length?"&"+B.join("&"):""}function pr(q){const B={};return q.replace(/^\?/,"").split("&").forEach(fe=>{if(fe){const[O,V]=fe.split("=");B[decodeURIComponent(O)]=decodeURIComponent(V)}}),B}function br(q){const B=q.indexOf("?");if(!B)return"";const Z=q.indexOf("#",B);return q.substring(B,Z>0?Z:void 0)}function ft(q,B){const Z=new Mr(q,B);return Z.subscribe.bind(Z)}class Mr{constructor(B,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{B(this)}).catch(fe=>{this.error(fe)})}next(B){this.forEachObserver(Z=>{Z.next(B)})}error(B){this.forEachObserver(Z=>{Z.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,Z,fe){let O;if(void 0===B&&void 0===Z&&void 0===fe)throw new Error("Missing Observer.");O=function an(q,B){if("object"!=typeof q||null===q)return!1;for(const Z of B)if(Z in q&&"function"==typeof q[Z])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:Z,complete:fe},void 0===O.next&&(O.next=Gn),void 0===O.error&&(O.error=Gn),void 0===O.complete&&(O.complete=Gn);const V=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?O.error(this.finalError):O.complete()}catch(j){}}),this.observers.push(O),V}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,B)}sendOne(B,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{Z(this.observers[B])}catch(fe){"undefined"!=typeof console&&console.error&&console.error(fe)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gn(){}function $i(q,B=1e3,Z=2){const fe=B*Math.pow(Z,q),O=Math.round(.5*fe*(Math.random()-.5)*2);return Math.min(144e5,fe+O)}function yt(q){return q&&q._delegate?q._delegate:q}function Un(q,B){return new Promise((Z,fe)=>{q.onsuccess=O=>{Z(O.target.result)},q.onerror=O=>{var V;fe(`${B}: ${null===(V=O.target.error)||void 0===V?void 0:V.message}`)}})}class qt{constructor(B){this._db=B,this.objectStoreNames=this._db.objectStoreNames}transaction(B,Z="readonly"){return new We(this._db.transaction.call(this._db,B,Z))}createObjectStore(B,Z){return new Ce(this._db.createObjectStore(B,Z))}close(){this._db.close()}}class We{constructor(B){this._transaction=B,this.complete=new Promise((Z,fe)=>{this._transaction.oncomplete=function(){Z()},this._transaction.onerror=()=>{fe(this._transaction.error)},this._transaction.onabort=()=>{fe(this._transaction.error)}})}objectStore(B){return new Ce(this._transaction.objectStore(B))}}class Ce{constructor(B){this._store=B}index(B){return new rt(this._store.index(B))}createIndex(B,Z,fe){return new rt(this._store.createIndex(B,Z,fe))}get(B){return Un(this._store.get(B),"Error reading from IndexedDB")}put(B,Z){return Un(this._store.put(B,Z),"Error writing to IndexedDB")}delete(B){return Un(this._store.delete(B),"Error deleting from IndexedDB")}clear(){return Un(this._store.clear(),"Error clearing IndexedDB object store")}}class rt{constructor(B){this._index=B}get(B){return Un(this._index.get(B),"Error reading from IndexedDB")}}function gt(q,B,Z){return new Promise((fe,O)=>{try{const V=indexedDB.open(q,B);V.onsuccess=j=>{fe(new qt(j.target.result))},V.onerror=j=>{var ue;O(`Error opening indexedDB: ${null===(ue=j.target.error)||void 0===ue?void 0:ue.message}`)},V.onupgradeneeded=j=>{Z(new qt(V.result),j.oldVersion,j.newVersion,new We(V.transaction))}}catch(V){O(`Error opening indexedDB: ${V.message}`)}})}function Ft(q){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,h.Z)(function*(q){return new Promise((B,Z)=>{try{const fe=indexedDB.deleteDatabase(q);fe.onsuccess=()=>{B()},fe.onerror=O=>{var V;Z(`Error deleting indexedDB database "${q}": ${null===(V=O.target.error)||void 0===V?void 0:V.message}`)}}catch(fe){Z(`Error deleting indexedDB database "${q}": ${fe.message}`)}})})).apply(this,arguments)}},6817:(mt,Se,P)=>{var h=P(5e3);let $=null;function N(){return $}const ce=new h.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ge(){return(0,h.LFG)(z)}()},providedIn:"platform"}),n})();const W=new h.OlP("Location Initialized");let z=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ke(){return new z((0,h.LFG)(ce))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function be(n){const e=(0,h.LFG)(ce).location;return new $e((0,h.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const nt=new h.OlP("appBaseHref");let $e=(()=>{class n extends me{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Le(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Le(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de),h.LFG(nt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Le(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(de),h.LFG(nt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke(ee(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function Qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ee(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Ne,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(h.LFG(me),h.LFG(de))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ee(){return new Me((0,h.LFG)(me),(0,h.LFG)(de))}()},providedIn:"root"}),n})();function ee(n){return n.replace(/\/index.html$/,"")}var oe=(()=>((oe=oe||{})[oe.Format=0]="Format",oe[oe.Standalone=1]="Standalone",oe))(),le=(()=>((le=le||{})[le.Narrow=0]="Narrow",le[le.Abbreviated=1]="Abbreviated",le[le.Wide=2]="Wide",le[le.Short=3]="Short",le))(),De=(()=>((De=De||{})[De.Short=0]="Short",De[De.Medium=1]="Medium",De[De.Long=2]="Long",De[De.Full=3]="Full",De))(),pe=(()=>((pe=pe||{})[pe.Decimal=0]="Decimal",pe[pe.Group=1]="Group",pe[pe.List=2]="List",pe[pe.PercentSign=3]="PercentSign",pe[pe.PlusSign=4]="PlusSign",pe[pe.MinusSign=5]="MinusSign",pe[pe.Exponential=6]="Exponential",pe[pe.SuperscriptingExponent=7]="SuperscriptingExponent",pe[pe.PerMille=8]="PerMille",pe[pe.Infinity=9]="Infinity",pe[pe.NaN=10]="NaN",pe[pe.TimeSeparator=11]="TimeSeparator",pe[pe.CurrencyDecimal=12]="CurrencyDecimal",pe[pe.CurrencyGroup=13]="CurrencyGroup",pe))();function nn(n,e){return Fn((0,h.cg1)(n)[h.wAp.DateFormat],e)}function Xt(n,e){return Fn((0,h.cg1)(n)[h.wAp.TimeFormat],e)}function rn(n,e){return Fn((0,h.cg1)(n)[h.wAp.DateTimeFormat],e)}function Rn(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(void 0===r){if(e===pe.CurrencyDecimal)return t[h.wAp.NumberSymbols][pe.Decimal];if(e===pe.CurrencyGroup)return t[h.wAp.NumberSymbols][pe.Group]}return r}function br(n){if(!n[h.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[h.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Fn(n,e){for(let t=e;t>-1;t--)if(void 0!==n[t])return n[t];throw new Error("Locale data API: locale data undefined")}function an(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Nn=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,$r={},Js=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Gt=(()=>((Gt=Gt||{})[Gt.Short=0]="Short",Gt[Gt.ShortGMT=1]="ShortGMT",Gt[Gt.Long=2]="Long",Gt[Gt.Extended=3]="Extended",Gt))(),pt=(()=>((pt=pt||{})[pt.FullYear=0]="FullYear",pt[pt.Month=1]="Month",pt[pt.Date=2]="Date",pt[pt.Hours=3]="Hours",pt[pt.Minutes=4]="Minutes",pt[pt.Seconds=5]="Seconds",pt[pt.FractionalSeconds=6]="FractionalSeconds",pt[pt.Day=7]="Day",pt))(),at=(()=>((at=at||{})[at.DayPeriods=0]="DayPeriods",at[at.Days=1]="Days",at[at.Months=2]="Months",at[at.Eras=3]="Eras",at))();function Qr(n,e,t,r){let i=function ue(n){if(Ye(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,u=1,c=1]=n.split("-").map(f=>+f);return ji(i,u-1,c)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Nn))return function Ve(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,u=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const c=Number(n[4]||0)-t,f=Number(n[5]||0)-r,y=Number(n[6]||0),b=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(e,c,f,y,b),e}(r)}const e=new Date(n);if(!Ye(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Wt(t,e)||e;let f,c=[];for(;e;){if(f=Js.exec(e),!f){c.push(e);break}{c=c.concat(f.slice(1));const A=c.pop();if(!A)break;e=A}}let y=i.getTimezoneOffset();r&&(y=O(r,y),i=function j(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function V(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(O(e,i)-i))}(i,r,!0));let b="";return c.forEach(A=>{const S=function fe(n){if(Z[n])return Z[n];let e;switch(n){case"G":case"GG":case"GGG":e=qt(at.Eras,le.Abbreviated);break;case"GGGG":e=qt(at.Eras,le.Wide);break;case"GGGGG":e=qt(at.Eras,le.Narrow);break;case"y":e=yt(pt.FullYear,1,0,!1,!0);break;case"yy":e=yt(pt.FullYear,2,0,!0,!0);break;case"yyy":e=yt(pt.FullYear,3,0,!1,!0);break;case"yyyy":e=yt(pt.FullYear,4,0,!1,!0);break;case"Y":e=B(1);break;case"YY":e=B(2,!0);break;case"YYY":e=B(3);break;case"YYYY":e=B(4);break;case"M":case"L":e=yt(pt.Month,1,1);break;case"MM":case"LL":e=yt(pt.Month,2,1);break;case"MMM":e=qt(at.Months,le.Abbreviated);break;case"MMMM":e=qt(at.Months,le.Wide);break;case"MMMMM":e=qt(at.Months,le.Narrow);break;case"LLL":e=qt(at.Months,le.Abbreviated,oe.Standalone);break;case"LLLL":e=qt(at.Months,le.Wide,oe.Standalone);break;case"LLLLL":e=qt(at.Months,le.Narrow,oe.Standalone);break;case"w":e=q(1);break;case"ww":e=q(2);break;case"W":e=q(1,!0);break;case"d":e=yt(pt.Date,1);break;case"dd":e=yt(pt.Date,2);break;case"c":case"cc":e=yt(pt.Day,1);break;case"ccc":e=qt(at.Days,le.Abbreviated,oe.Standalone);break;case"cccc":e=qt(at.Days,le.Wide,oe.Standalone);break;case"ccccc":e=qt(at.Days,le.Narrow,oe.Standalone);break;case"cccccc":e=qt(at.Days,le.Short,oe.Standalone);break;case"E":case"EE":case"EEE":e=qt(at.Days,le.Abbreviated);break;case"EEEE":e=qt(at.Days,le.Wide);break;case"EEEEE":e=qt(at.Days,le.Narrow);break;case"EEEEEE":e=qt(at.Days,le.Short);break;case"a":case"aa":case"aaa":e=qt(at.DayPeriods,le.Abbreviated);break;case"aaaa":e=qt(at.DayPeriods,le.Wide);break;case"aaaaa":e=qt(at.DayPeriods,le.Narrow);break;case"b":case"bb":case"bbb":e=qt(at.DayPeriods,le.Abbreviated,oe.Standalone,!0);break;case"bbbb":e=qt(at.DayPeriods,le.Wide,oe.Standalone,!0);break;case"bbbbb":e=qt(at.DayPeriods,le.Narrow,oe.Standalone,!0);break;case"B":case"BB":case"BBB":e=qt(at.DayPeriods,le.Abbreviated,oe.Format,!0);break;case"BBBB":e=qt(at.DayPeriods,le.Wide,oe.Format,!0);break;case"BBBBB":e=qt(at.DayPeriods,le.Narrow,oe.Format,!0);break;case"h":e=yt(pt.Hours,1,-12);break;case"hh":e=yt(pt.Hours,2,-12);break;case"H":e=yt(pt.Hours,1);break;case"HH":e=yt(pt.Hours,2);break;case"m":e=yt(pt.Minutes,1);break;case"mm":e=yt(pt.Minutes,2);break;case"s":e=yt(pt.Seconds,1);break;case"ss":e=yt(pt.Seconds,2);break;case"S":e=yt(pt.FractionalSeconds,1);break;case"SS":e=yt(pt.FractionalSeconds,2);break;case"SSS":e=yt(pt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ce(Gt.Short);break;case"ZZZZZ":e=Ce(Gt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ce(Gt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ce(Gt.Long);break;default:return null}return Z[n]=e,e}(A);b+=S?S(i,t,y):"''"===A?"'":A.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),b}function ji(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Wt(n,e){const t=function Rt(n){return(0,h.cg1)(n)[h.wAp.LocaleId]}(n);if($r[t]=$r[t]||{},$r[t][e])return $r[t][e];let r="";switch(e){case"shortDate":r=nn(n,De.Short);break;case"mediumDate":r=nn(n,De.Medium);break;case"longDate":r=nn(n,De.Long);break;case"fullDate":r=nn(n,De.Full);break;case"shortTime":r=Xt(n,De.Short);break;case"mediumTime":r=Xt(n,De.Medium);break;case"longTime":r=Xt(n,De.Long);break;case"fullTime":r=Xt(n,De.Full);break;case"short":const i=Wt(n,"shortTime"),u=Wt(n,"shortDate");r=$i(rn(n,De.Short),[i,u]);break;case"medium":const c=Wt(n,"mediumTime"),f=Wt(n,"mediumDate");r=$i(rn(n,De.Medium),[c,f]);break;case"long":const y=Wt(n,"longTime"),b=Wt(n,"longDate");r=$i(rn(n,De.Long),[y,b]);break;case"full":const A=Wt(n,"fullTime"),S=Wt(n,"fullDate");r=$i(rn(n,De.Full),[A,S])}return r&&($r[t][e]=r),r}function $i(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Vn(n,e,t="-",r,i){let u="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,u=t));let c=String(n);for(;c.length<e;)c="0"+c;return r&&(c=c.substr(c.length-e)),u+c}function yt(n,e,t=0,r=!1,i=!1){return function(u,c){let f=function Un(n,e){switch(n){case pt.FullYear:return e.getFullYear();case pt.Month:return e.getMonth();case pt.Date:return e.getDate();case pt.Hours:return e.getHours();case pt.Minutes:return e.getMinutes();case pt.Seconds:return e.getSeconds();case pt.FractionalSeconds:return e.getMilliseconds();case pt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((t>0||f>-t)&&(f+=t),n===pt.Hours)0===f&&-12===t&&(f=12);else if(n===pt.FractionalSeconds)return function ln(n,e){return Vn(n,3).substr(0,e)}(f,e);const y=Rn(c,pe.MinusSign);return Vn(f,e,y,r,i)}}function qt(n,e,t=oe.Format,r=!1){return function(i,u){return function We(n,e,t,r,i,u){switch(t){case at.Months:return function Ge(n,e,t){const r=(0,h.cg1)(n),u=Fn([r[h.wAp.MonthsFormat],r[h.wAp.MonthsStandalone]],e);return Fn(u,t)}(e,i,r)[n.getMonth()];case at.Days:return function on(n,e,t){const r=(0,h.cg1)(n),u=Fn([r[h.wAp.DaysFormat],r[h.wAp.DaysStandalone]],e);return Fn(u,t)}(e,i,r)[n.getDay()];case at.DayPeriods:const c=n.getHours(),f=n.getMinutes();if(u){const b=function as(n){const e=(0,h.cg1)(n);return br(e),(e[h.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?an(r):[an(r[0]),an(r[1])])}(e),A=function ft(n,e,t){const r=(0,h.cg1)(n);br(r);const u=Fn([r[h.wAp.ExtraData][0],r[h.wAp.ExtraData][1]],e)||[];return Fn(u,t)||[]}(e,i,r),S=b.findIndex(L=>{if(Array.isArray(L)){const[H,K]=L,se=c>=H.hours&&f>=H.minutes,Ie=c<K.hours||c===K.hours&&f<K.minutes;if(H.hours<K.hours){if(se&&Ie)return!0}else if(se||Ie)return!0}else if(L.hours===c&&L.minutes===f)return!0;return!1});if(-1!==S)return A[S]}return function Qt(n,e,t){const r=(0,h.cg1)(n),u=Fn([r[h.wAp.DayPeriodsFormat],r[h.wAp.DayPeriodsStandalone]],e);return Fn(u,t)}(e,i,r)[c<12?0:1];case at.Eras:return function Jt(n,e){return Fn((0,h.cg1)(n)[h.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,u,n,e,t,r)}}function Ce(n){return function(e,t,r){const i=-1*r,u=Rn(t,pe.MinusSign),c=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Gt.Short:return(i>=0?"+":"")+Vn(c,2,u)+Vn(Math.abs(i%60),2,u);case Gt.ShortGMT:return"GMT"+(i>=0?"+":"")+Vn(c,1,u);case Gt.Long:return"GMT"+(i>=0?"+":"")+Vn(c,2,u)+":"+Vn(Math.abs(i%60),2,u);case Gt.Extended:return 0===r?"Z":(i>=0?"+":"")+Vn(c,2,u)+":"+Vn(Math.abs(i%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function Lt(n){return ji(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function q(n,e=!1){return function(t,r){let i;if(e){const u=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,c=t.getDate();i=1+Math.floor((c+u)/7)}else{const u=Lt(t),c=function Ft(n){const e=ji(n,0,1).getDay();return ji(n,0,1+(e<=4?4:11)-e)}(u.getFullYear()),f=u.getTime()-c.getTime();i=1+Math.round(f/6048e5)}return Vn(i,n,Rn(r,pe.MinusSign))}}function B(n,e=!1){return function(t,r){return Vn(Lt(t).getFullYear(),n,Rn(r,pe.MinusSign),e)}}const Z={};function O(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Ye(n){return n instanceof Date&&!isNaN(n.valueOf())}let Di=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,h.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,h.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.ZZ4),h.Y36(h.aQg),h.Y36(h.SBq),h.Y36(h.Qsj))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Hi{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ir=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Hi(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const f=r.get(u);r.move(f,c),Os(f,i)}});for(let i=0,u=r.length;i<u;i++){const f=r.get(i).context;f.index=i,f.count=u,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Os(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Os(n,e){n.context.$implicit=e.item}let Or=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new yn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Fo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Fo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class yn{constructor(){this.$implicit=null,this.ngIf=null}}function Fo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}function Xr(n,e){return new h.vHH(2100,"")}class Ep{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class ls{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const wp=new ls,jc=new Ep;let $c=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,h.QGY)(t))return wp;if((0,h.F4k)(t))return jc;throw Xr()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO,16))},n.\u0275pipe=h.Yjl({name:"async",type:n,pure:!1}),n})();const Dp=new h.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let gl=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,u){var c;if(null==t||""===t||t!=t)return null;try{return Qr(t,r,u||this.locale,null!==(c=null!=i?i:this.defaultTimezone)&&void 0!==c?c:void 0)}catch(f){throw Xr()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16),h.Y36(Dp,24))},n.\u0275pipe=h.Yjl({name:"date",type:n,pure:!0}),n})(),zi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Ci="browser";function $o(n){return"server"===n}let zc=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new vu((0,h.LFG)(ce),window)}),n})();class vu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function to(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Fs(this.window.history)||Fs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Fs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ro extends class no extends class ve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function te(n){$||($=n)}(new ro)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function _l(){return fn=fn||document.querySelector("base"),fn?fn.getAttribute("href"):null}();return null==t?null:function Ls(n){Go=Go||document.createElement("a"),Go.setAttribute("href",n);const e=Go.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){fn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function fu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Go,fn=null;const Dr=new h.OlP("TRANSITION_ID"),Eu=[{provide:h.ip1,useFactory:function Qn(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Dr,ce,h.zs3],multi:!0}];class fi{static init(){(0,h.VLi)(new fi)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const f=function(y){c=c||y,u--,0==u&&r(c)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Hr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const hs=new h.OlP("EventManagerPlugins");let io=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(hs),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class zo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ti=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Wi=(()=>{class n extends Ti{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(fs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(fs))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function fs(n){N().remove(n)}const wt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Oa=/%COMP%/g;function Te(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Te(n,i,t):(i=i.replace(Oa,n),t.push(i))}return t}function $t(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _n=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new wu(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new vl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new ka(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Te(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(io),h.LFG(Wi),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class wu{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(wt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=wt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=wt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,$t(r)):this.eventManager.addEventListener(e,t,$t(r))}}class vl extends wu{constructor(e,t,r,i){super(e),this.component=r;const u=Te(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function gh(n){return"_ngcontent-%COMP%".replace(Oa,n)}(i+"-"+r.id),this.hostAttr=function Pa(n){return"_nghost-%COMP%".replace(Oa,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ka extends wu{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Te(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const f=document.createElement("style");f.textContent=u[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Tp=(()=>{class n extends zo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const El=["alt","control","meta","shift"],Zo={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},qi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Yo=(()=>{class n extends zo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if(El.forEach(y=>{const b=r.indexOf(y);b>-1&&(r.splice(b,1),c+=y+".")}),c+=u,0!=r.length||0===u.length)return null;const f={};return f.domEventName=i,f.fullKey=c,f}static getEventFullKey(t){let r="",i=function Qo(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&sr.hasOwnProperty(e)&&(e=sr[e]))}return Zo[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),El.forEach(u=>{u!=i&&qi[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Fa=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:Ci},{provide:h.g9A,useValue:function ei(){ro.makeCurrent(),fi.init()},multi:!0},{provide:ce,useFactory:function Jo(){return(0,h.RDi)(document),document},deps:[]}]),wl=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function yh(){return new h.qLn},deps:[]},{provide:hs,useClass:Tp,multi:!0,deps:[ce,h.R0b,h.Lbi]},{provide:hs,useClass:Yo,multi:!0,deps:[ce]},{provide:_n,useClass:_n,deps:[io,Wi,h.AFp]},{provide:h.FYo,useExisting:_n},{provide:Ti,useExisting:Wi},{provide:Wi,useClass:Wi,deps:[ce]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:io,useClass:io,deps:[hs,h.R0b]},{provide:class En{},useClass:Hr,deps:[]}];let Us=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Dr,useExisting:h.AFp},Eu]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:wl,imports:[zi,h.hGG]}),n})();"undefined"!=typeof window&&window;var On=P(8996),Ir=P(7669);function vt(...n){const e=(0,Ir.yG)(n);return(0,On.D)(n,e)}var Ki=P(7579);class ti extends Ki.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var or=P(8306);const{isArray:ed}=Array,{getPrototypeOf:zn,prototype:$s,keys:Sl}=Object;function gs(n){if(1===n.length){const e=n[0];if(ed(e))return{args:e,keys:null};if(function ea(n){return n&&"object"==typeof n&&zn(n)===$s}(e)){const t=Sl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Zi=P(4671),jt=P(4004);const{isArray:Ml}=Array;function ta(n){return(0,jt.U)(e=>function td(n,e){return Ml(e)?n(...e):n(e)}(n,e))}function Ba(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Pn=P(5403),Hs=P(9672);function uo(n,e,t){n?(0,Hs.f)(t,n,e):e()}var ni=P(576);function Gs(n,e){const t=(0,ni.m)(n)?n:()=>n,r=i=>i.error(t());return new or.y(e?i=>e.schedule(r,0,i):r)}const lo=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ms=P(8189);function Dh(...n){return function Rl(){return(0,ms.J)(1)}()((0,On.D)(n,(0,Ir.yG)(n)))}var ys=P(8421);function na(n){return new or.y(e=>{(0,ys.Xf)(n()).subscribe(e)})}var ra=P(515),ia=P(727),Cr=P(4482);function _s(){return(0,Cr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Pn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Nl extends or.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Cr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ia.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Pn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ia.w0.EMPTY)}return e}refCount(){return _s()(this)}}function Wn(n,e){return(0,Cr.e)((t,r)=>{let i=null,u=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,Pn.x)(r,y=>{null==i||i.unsubscribe();let b=0;const A=u++;(0,ys.Xf)(n(y,A)).subscribe(i=(0,Pn.x)(r,S=>r.next(e?e(y,S,A,b++):S),()=>{i=null,f()}))},()=>{c=!0,f()}))})}var $a=P(5698);function Si(...n){const e=(0,Ir.yG)(n);return(0,Cr.e)((t,r)=>{(e?Dh(n,t,e):Dh(n,t)).subscribe(r)})}function vs(n,e,t,r,i){return(u,c)=>{let f=t,y=e,b=0;u.subscribe((0,Pn.x)(c,A=>{const S=b++;y=f?n(y,A,S):(f=!0,A),r&&c.next(y)},i&&(()=>{f&&c.next(y),c.complete()})))}}function pi(n,e){return(0,Cr.e)(vs(n,e,arguments.length>=2,!0))}function Yi(n,e){return(0,Cr.e)((t,r)=>{let i=0;t.subscribe((0,Pn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function Qi(n){return(0,Cr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Pn.x)(t,void 0,void 0,c=>{u=(0,ys.Xf)(n(c,Qi(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Cn=P(5577);function sa(n,e){return(0,ni.m)(e)?(0,Cn.z)(n,e,1):(0,Cn.z)(n,1)}function nd(n){return n<=0?()=>ra.E:(0,Cr.e)((e,t)=>{let r=[];e.subscribe((0,Pn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function $n(n=Ap){return(0,Cr.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Ap(){return new lo}function Sp(n){return(0,Cr.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function co(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Yi((i,u)=>n(i,u,r)):Zi.y,(0,$a.q)(1),t?Sp(e):$n(()=>new lo))}var ri=P(8505);class Ji{constructor(e,t){this.id=e,this.url=t}}class ho extends Ji{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class oa extends Ji{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qn extends Ji{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ha extends Ji{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Cu extends Ji{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rd extends Ji{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ga extends Ji{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wr extends Ji{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mi extends Ji{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aa{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class za{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ii{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ua{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ol{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Pl{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vt="primary";class Wa{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function gr(n){return new Wa(n)}const Fl="ngNavigationCancelingError";function Es(n){const e=Error("NavigationCancelingError: "+n);return e[Fl]=!0,e}function Tu(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],f=n[u];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function si(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!Au(n[i],e[i]))return!1;return!0}function Au(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function id(n){return Array.prototype.concat.apply([],n)}function xi(n){return n.length>0?n[n.length-1]:null}function wn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function qr(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,On.D)(Promise.resolve(n)):vt(n)}const zs={exact:function I(n,e,t){if(!bt(n.segments,e.segments)||!Y(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!I(n.children[r],e.children[r],t))return!1;return!0},subset:R},Su={exact:function sd(n,e){return si(n,e)},subset:function C(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Au(n[t],e[t]))},ignored:()=>!0};function ca(n,e,t){return zs[t.paths](n.root,e.root,t.matrixParams)&&Su[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function R(n,e,t){return U(n,e,e.segments,t)}function U(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!bt(i,t)||e.hasChildren()||!Y(i,t,r))}if(n.segments.length===t.length){if(!bt(n.segments,t)||!Y(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!R(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(bt(n.segments,i)&&Y(n.segments,i,r)&&n.children[Vt])&&U(n.children[Vt],e,u,r)}}function Y(n,e,t){return e.every((r,i)=>Su[t](n[i].parameters,r.parameters))}class ne{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gr(this.queryParams)),this._queryParamMap}toString(){return ar.serialize(this)}}class _e{constructor(e,t){this.segments=e,this.children=t,this.parent=null,wn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ws(this)}}class Be{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=gr(this.parameters)),this._parameterMap}toString(){return Ll(this)}}function bt(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Tt{}class Pr{parse(e){const t=new Wm(e);return new ne(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Xi(e.root,!0)}`,r=function zm(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${gi(t)}=${gi(i)}`).join("&"):`${gi(t)}=${gi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ni(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ar=new Pr;function ws(n){return n.segments.map(e=>Ll(e)).join("/")}function Xi(n,e){if(!n.hasChildren())return ws(n);if(e){const t=n.children[Vt]?Xi(n.children[Vt],!1):"",r=[];return wn(n.children,(i,u)=>{u!==Vt&&r.push(`${u}:${Xi(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Zt(n,e){let t=[];return wn(n.children,(r,i)=>{i===Vt&&(t=t.concat(e(r,i)))}),wn(n.children,(r,i)=>{i!==Vt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Vt?[Xi(n.children[Vt],!1)]:[`${i}:${Xi(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Vt]?`${ws(n)}/${t[0]}`:`${ws(n)}/(${t.join("//")})`}}function Ri(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gi(n){return Ri(n).replace(/%3B/gi,";")}function Mu(n){return Ri(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xu(n){return decodeURIComponent(n)}function Ru(n){return xu(n.replace(/\+/g,"%20"))}function Ll(n){return`${Mu(n.path)}${function Rp(n){return Object.keys(n).map(e=>`;${Mu(e)}=${Mu(n[e])}`).join("")}(n.parameters)}`}const Ah=/^[^\/()?;=#]+/;function fo(n){const e=n.match(Ah);return e?e[0]:""}const Vl=/^[^=?&#]+/,w0=/^[^&#]+/;class Wm{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Vt]=new _e(e,t)),r}parseSegment(){const e=fo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Be(xu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=fo(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=fo(this.remaining);i&&(r=i,this.capture(r))}e[xu(t)]=xu(r)}parseQueryParam(e){const t=function Np(n){const e=n.match(Vl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function Ul(n){const e=n.match(w0);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Ru(t),u=Ru(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=fo(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Vt);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[Vt]:new _e([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class qm{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Sh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Sh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Mh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Mh(e,this._root).map(t=>t.value)}}function Sh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Sh(n,t);if(r)return r}return null}function Mh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Mh(n,t);if(r.length)return r.unshift(e),r}return[]}class po{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function go(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class od extends qm{constructor(e,t){super(e),this.snapshot=t,Bl(this,e)}toString(){return this.snapshot.toString()}}function qa(n,e){const t=function xh(n,e){const c=new Ou([],{},{},"",{},Vt,e,null,n.root,-1,{});return new Rh("",new po(c,[]))}(n,e),r=new ti([new Be("",{})]),i=new ti({}),u=new ti({}),c=new ti({}),f=new ti(""),y=new Nu(r,i,c,f,u,Vt,e,t.root);return y.snapshot=t.root,new od(new po(y,[]),t)}class Nu{constructor(e,t,r,i,u,c,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,jt.U)(e=>gr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,jt.U)(e=>gr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Km(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function ad(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ou{constructor(e,t,r,i,u,c,f,y,b,A,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.routeConfig=y,this._urlSegment=b,this._lastPathIndex=A,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Rh extends qm{constructor(e,t){super(t),this.url=e,Bl(this,t)}toString(){return Nh(this._root)}}function Bl(n,e){e.value._routerState=n,e.children.forEach(t=>Bl(n,t))}function Nh(n){const e=n.children.length>0?` { ${n.children.map(Nh).join(", ")} } `:"";return`${n.value}${e}`}function ud(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,si(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),si(e.params,t.params)||n.params.next(t.params),function la(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!si(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),si(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Oh(n,e){const t=si(n.params,e.params)&&function At(n,e){return bt(n,e)&&n.every((t,r)=>si(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Oh(n.parent,e.parent))}function Ka(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Ym(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ka(n,r,i);return Ka(n,r)})}(n,e,t);return new po(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Ka(n,f)),c}}const r=function Ph(n){return new Nu(new ti(n.url),new ti(n.params),new ti(n.queryParams),new ti(n.fragment),new ti(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Ka(n,u));return new po(r,i)}}function mo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function jl(n){return"object"==typeof n&&null!=n&&n.outlets}function ld(n,e,t,r,i){let u={};if(r&&wn(r,(f,y)=>{u[y]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),n===e)return new ne(t,u,i);const c=Qm(n,e,t);return new ne(c,u,i)}function Qm(n,e,t){const r={};return wn(n.children,(i,u)=>{r[u]=i===e?t:Qm(i,e,t)}),new _e(n.segments,r)}class Op{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&mo(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(jl);if(i&&i!==xi(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pp{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function v(n,e,t){if(n||(n=new _e([],{})),0===n.segments.length&&n.hasChildren())return g(n,e,t);const r=function m(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],f=t[r];if(jl(f))break;const y=`${f}`,b=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&b&&"object"==typeof b&&void 0===b.outlets){if(!J(y,b,c))return u;r+=2}else{if(!J(y,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new _e(n.segments.slice(0,r.pathIndex),{});return u.children[Vt]=new _e(n.segments.slice(r.pathIndex),n.children),g(u,0,i)}return r.match&&0===i.length?new _e(n.segments,{}):r.match&&!n.hasChildren()?w(n,e,t):r.match?g(n,0,i):w(n,e,t)}function g(n,e,t){if(0===t.length)return new _e(n.segments,{});{const r=function b0(n){return jl(n[0])?n[0].outlets:{[Vt]:n}}(t),i={};return wn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=v(n.children[c],e,u))}),wn(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new _e(n.segments,i)}}function w(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(jl(u)){const y=M(u.outlets);return new _e(r,y)}if(0===i&&mo(t[0])){r.push(new Be(n.segments[e].path,k(t[0]))),i++;continue}const c=jl(u)?u.outlets[Vt]:`${u}`,f=i<t.length-1?t[i+1]:null;c&&f&&mo(f)?(r.push(new Be(c,k(f))),i+=2):(r.push(new Be(c,{})),i++)}return new _e(r,{})}function M(n){const e={};return wn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=w(new _e([],{}),0,t))}),e}function k(n){const e={};return wn(n,(t,r)=>e[r]=`${t}`),e}function J(n,e,t){return n==t.path&&si(e,t.parameters)}class ct{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ud(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=go(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),wn(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=go(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=go(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=go(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Pl(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ua(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(ud(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),ud(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=function Dt(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),y=f?f.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=y,c.outlet&&c.outlet.activateWith(i,y),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Ut{constructor(e,t){this.routes=e,this.module=t}}function cn(n){return"function"==typeof n}function Oi(n){return n instanceof ne}const Hl=Symbol("INITIAL_VALUE");function ha(){return Wn(n=>function xl(...n){const e=(0,Ir.yG)(n),t=(0,Ir.jO)(n),{args:r,keys:i}=gs(n);if(0===r.length)return(0,On.D)([],e);const u=new or.y(function zr(n,e,t=Zi.y){return r=>{uo(e,()=>{const{length:i}=n,u=new Array(i);let c=i,f=i;for(let y=0;y<i;y++)uo(e,()=>{const b=(0,On.D)(n[y],e);let A=!1;b.subscribe((0,Pn.x)(r,S=>{u[y]=S,A||(A=!0,f--),f||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>Ba(i,c):Zi.y));return t?u.pipe(ta(t)):u}(n.map(e=>e.pipe((0,$a.q)(1),Si(Hl)))).pipe(pi((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==Hl?i:(u===Hl&&(r=!0),r||!1!==u&&c!==t.length-1&&!Oi(u)?i:u),e)},Hl),Yi(e=>e!==Hl),(0,jt.U)(e=>Oi(e)?e:!0===e),(0,$a.q)(1)))}class Fp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ku,this.attachRef=null}}class ku{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Fp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Gl=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=u||Vt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),f=this.parentContexts.getOrCreateContext(this.name).children,y=new Lp(t,f,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,y),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ku),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Lp{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Nu?this.route:e===ku?this.childContexts:this.parent.get(e,t)}}let kh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[Gl],encapsulation:2}),n})();function Za(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];ty(r,ny(e,r))}}function ty(n,e){n.children&&Za(n.children,e)}function ny(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ry(n){const e=n.children&&n.children.map(ry),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Vt&&(t.component=kh),t}function pn(n){return n.outlet||Vt}function D0(n,e){const t=n.filter(r=>pn(r)===e);return t.push(...n.filter(r=>pn(r)!==e)),t}const I0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},I0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Tu)(t,n,e);if(!u)return Object.assign({},I0);const c={};wn(u.posParams,(y,b)=>{c[b]=y.path});const f=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:f,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Fh(n,e,t,r,i="corrected"){if(t.length>0&&function oI(n,e,t){return t.some(r=>Vp(n,e,r)&&pn(r)!==Vt)}(n,t,r)){const c=new _e(e,function sI(n,e,t,r){const i={};i[Vt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&pn(u)!==Vt){const c=new _e([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[pn(u)]=c}return i}(n,e,r,new _e(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function aI(n,e,t){return t.some(r=>Vp(n,e,r))}(n,t,r)){const c=new _e(n.segments,function iI(n,e,t,r,i,u){const c={};for(const f of r)if(Vp(n,t,f)&&!i[pn(f)]){const y=new _e([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[pn(f)]=y}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new _e(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Vp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function uI(n,e,t,r){return!!(pn(n)===r||r!==Vt&&Vp(e,t,n))&&("**"===n.path||dd(e,n,t).matched)}function lI(n,e,t){return 0===e.length&&!n.children[t]}class Fu{constructor(e){this.segmentGroup=e||null}}class mi{constructor(e){this.urlTree=e}}function zl(n){return Gs(new Fu(n))}function iy(n){return Gs(new mi(n))}class sy{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=Fh(this.urlTree.root,[],[],this.config).segmentGroup,t=new _e(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Vt).pipe((0,jt.U)(u=>this.createUrlTree(oy(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qi(u=>{if(u instanceof mi)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Fu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Vt).pipe((0,jt.U)(i=>this.createUrlTree(oy(i),e.queryParams,e.fragment))).pipe(Qi(i=>{throw i instanceof Fu?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new _e([],{[Vt]:e}):e;return new ne(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,jt.U)(u=>new _e([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,On.D)(i).pipe(sa(u=>{const c=r.children[u],f=D0(t,u);return this.expandSegmentGroup(e,f,c,u).pipe((0,jt.U)(y=>({segment:y,outlet:u})))}),pi((u,c)=>(u[c.outlet]=c.segment,u),{}),function Ih(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Yi((i,u)=>n(i,u,r)):Zi.y,nd(1),t?Sp(e):$n(()=>new lo))}())}expandSegment(e,t,r,i,u,c){return(0,On.D)(r).pipe(sa(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,u,c).pipe(Qi(b=>{if(b instanceof Fu)return vt(null);throw b}))),co(f=>!!f),Qi((f,y)=>{if(f instanceof lo||"EmptyError"===f.name)return lI(t,i,u)?vt(new _e([],{})):zl(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,u,c,f){return uI(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):zl(t):zl(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?iy(u):this.lineralizeSegments(r,u).pipe((0,Cn.z)(c=>{const f=new _e(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:f,consumedSegments:y,remainingSegments:b,positionalParamSegments:A}=dd(t,i,u);if(!f)return zl(t);const S=this.applyRedirectCommands(y,i.redirectTo,A);return i.redirectTo.startsWith("/")?iy(S):this.lineralizeSegments(i,S).pipe((0,Cn.z)(L=>this.expandSegment(e,t,r,L.concat(b),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?vt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,jt.U)(S=>(r._loadedConfig=S,new _e(i,{})))):vt(new _e(i,{}));const{matched:c,consumedSegments:f,remainingSegments:y}=dd(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,Cn.z)(A=>{const S=A.module,L=A.routes,{segmentGroup:H,slicedSegments:K}=Fh(t,f,y,L),se=new _e(H.segments,H.children);if(0===K.length&&se.hasChildren())return this.expandChildren(S,L,se).pipe((0,jt.U)(ze=>new _e(f,ze)));if(0===L.length&&0===K.length)return vt(new _e(f,{}));const Ie=pn(r)===u;return this.expandSegment(S,se,L,K,Ie?Vt:u,!0).pipe((0,jt.U)(it=>new _e(f.concat(it.segments),it.children)))})):zl(t)}getChildConfig(e,t,r){return t.children?vt(new Ut(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?vt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Cn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,jt.U)(u=>(t._loadedConfig=u,u))):function yi(n){return Gs(Es(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):vt(new Ut([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?vt(i.map(c=>{const f=e.get(c);let y;if(function Pu(n){return n&&cn(n.canLoad)}(f))y=f.canLoad(t,r);else{if(!cn(f))throw new Error("Invalid CanLoad guard");y=f(t,r)}return qr(y)})).pipe(ha(),(0,ri.b)(c=>{if(!Oi(c))return;const f=Es(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw f.url=c,f}),(0,jt.U)(c=>!0===c)):vt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return vt(r);if(i.numberOfChildren>1||!i.children[Vt])return Gs(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Vt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new ne(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return wn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[u]=t[f]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return wn(t.children,(f,y)=>{c[y]=this.createSegmentGroup(e,f,r,i)}),new _e(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function oy(n){const e={};for(const r of Object.keys(n.children)){const u=oy(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function cI(n){if(1===n.numberOfChildren&&n.children[Vt]){const e=n.children[Vt];return new _e(n.segments.concat(e.segments),e.children)}return n}(new _e(n.segments,e))}class A0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Vh{constructor(e,t){this.component=e,this.route=t}}function dI(n,e,t){const r=n._root;return Wl(r,e?e._root:null,t,[r.value])}function Up(n,e,t){const r=function hI(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Wl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=go(e);return n.children.forEach(c=>{(function fI(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const y=function pI(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!bt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!bt(n.url,e.url)||!si(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Oh(n,e)||!si(n.queryParams,e.queryParams);default:return!Oh(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new A0(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Wl(n,e,u.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Vh(f.outlet.component,c))}else c&&ql(e,f,i),i.canActivateChecks.push(new A0(r)),Wl(n,null,u.component?f?f.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),wn(u,(c,f)=>ql(c,t.getContext(f),i)),i}function ql(n,e,t){const r=go(n),i=n.value;wn(r,(u,c)=>{ql(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Vh(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class M0{}function x0(n){return new or.y(e=>e.error(n))}class DI{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=Fh(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Vt);if(null===t)return null;const r=new Ou([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new po(r,t),u=new Rh(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Km(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],f=D0(e,u),y=this.processSegmentGroup(f,c,u);if(null===y)return null;r.push(...y)}const i=R0(r);return function II(n){n.sort((e,t)=>e.value.outlet===Vt?-1:t.value.outlet===Vt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return lI(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!uI(e,t,r,i))return null;let u,c=[],f=[];if("**"===e.path){const H=r.length>0?xi(r).parameters:{};u=new Ou(r,H,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,AI(e),pn(e),e.component,e,Kl(t),_o(t)+r.length,SI(e))}else{const H=dd(t,e,r);if(!H.matched)return null;c=H.consumedSegments,f=H.remainingSegments,u=new Ou(c,H.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,AI(e),pn(e),e.component,e,Kl(t),_o(t)+c.length,SI(e))}const y=function CI(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:b,slicedSegments:A}=Fh(t,c,f,y.filter(H=>void 0===H.redirectTo),this.relativeLinkResolution);if(0===A.length&&b.hasChildren()){const H=this.processChildren(y,b);return null===H?null:[new po(u,H)]}if(0===y.length&&0===A.length)return[new po(u,[])];const S=pn(e)===i,L=this.processSegment(y,b,A,S?Vt:i);return null===L?null:[new po(u,L)]}}function TI(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function R0(n){const e=[],t=new Set;for(const r of n){if(!TI(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=R0(r.children);e.push(new po(r.value,i))}return e.filter(r=>!t.has(r))}function Kl(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function _o(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function AI(n){return n.data||{}}function SI(n){return n.resolve||{}}function jp(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function $p(n){return Wn(e=>{const t=n(e);return t?(0,On.D)(t).pipe((0,jt.U)(()=>e)):vt(e)})}class P0 extends class O0{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Bh=new h.OlP("ROUTES");class Hp{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,jt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Ut(id(c.injector.get(Bh,void 0,h.XFs.Self|h.XFs.Optional)).map(ry),c)}),Qi(u=>{throw t._loader$=void 0,u}));return t._loader$=new Nl(i,()=>new Ki.x).pipe(_s()),t._loader$}loadModuleFactory(e){return qr(e()).pipe((0,Cn.z)(t=>t instanceof h.YKP?vt(t):(0,On.D)(this.compiler.compileModuleAsync(t))))}}class VS{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function hd(n){throw n}function uy(n,e,t){return e.parse("/")}function ly(n,e){return vt(null)}const xI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Pi=(()=>{class n{constructor(t,r,i,u,c,f,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ki.x,this.errorHandler=hd,this.malformedUriErrorHandler=uy,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ly,afterPreactivation:ly},this.urlHandlingStrategy=new VS,this.routeReuseStrategy=new P0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(h.h0i),this.console=c.get(h.c2e);const S=c.get(h.R0b);this.isNgZoneEnabled=S instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function Th(){return new ne(new _e([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Hp(c,f,L=>this.triggerEvent(new aa(L)),L=>this.triggerEvent(new za(L))),this.routerState=qa(this.currentUrlTree,this.rootComponentType),this.transitions=new ti({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Yi(i=>0!==i.id),(0,jt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Wn(i=>{let u=!1,c=!1;return vt(i).pipe((0,ri.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.currentRawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Wn(f=>{const y=this.browserUrlTree.toString(),b=!this.navigated||f.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return F0(f.source)&&(this.browserUrlTree=f.extractedUrl),vt(f).pipe(Wn(S=>{const L=this.transitions.getValue();return r.next(new ho(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),L!==this.transitions.getValue()?ra.E:Promise.resolve(S)}),function T0(n,e,t,r){return Wn(i=>function Lh(n,e,t,r,i){return new sy(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,jt.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ri.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function N0(n,e,t,r,i){return(0,Cn.z)(u=>function bI(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new DI(n,e,t,r,i,u).recognize();return null===c?x0(new M0):vt(c)}catch(c){return x0(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,jt.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ri.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(H,S)}this.browserUrlTree=S.urlAfterRedirects}const L=new Cu(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(L)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:H,source:K,restoredState:se,extras:Ie}=f,tt=new ho(L,this.serializeUrl(H),K,se);r.next(tt);const it=qa(H,this.rootComponentType).snapshot;return vt(Object.assign(Object.assign({},f),{targetSnapshot:it,urlAfterRedirects:H,extras:Object.assign(Object.assign({},Ie),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=f.rawUrl,f.resolve(null),ra.E}),$p(f=>{const{targetSnapshot:y,id:b,extractedUrl:A,rawUrl:S,extras:{skipLocationChange:L,replaceUrl:H}}=f;return this.hooks.beforePreactivation(y,{navigationId:b,appliedUrlTree:A,rawUrlTree:S,skipLocationChange:!!L,replaceUrl:!!H})}),(0,ri.b)(f=>{const y=new rd(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),(0,jt.U)(f=>Object.assign(Object.assign({},f),{guards:dI(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function gI(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?vt(Object.assign(Object.assign({},t),{guardsResult:!0})):function mI(n,e,t,r){return(0,On.D)(n).pipe((0,Cn.z)(i=>function wI(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?vt(u.map(f=>{const y=Up(f,e,i);let b;if(function ey(n){return n&&cn(n.canDeactivate)}(y))b=qr(y.canDeactivate(n,e,t,r));else{if(!cn(y))throw new Error("Invalid CanDeactivate guard");b=qr(y(n,e,t,r))}return b.pipe(co())})).pipe(ha()):vt(!0)}(i.component,i.route,t,e,r)),co(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Cn.z)(f=>f&&function yo(n){return"boolean"==typeof n}(f)?function Bp(n,e,t,r){return(0,On.D)(e).pipe(sa(i=>Dh(function _I(n,e){return null!==n&&e&&e(new ii(n)),vt(!0)}(i.route.parent,r),function yI(n,e){return null!==n&&e&&e(new Ol(n)),vt(!0)}(i.route,r),function EI(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function S0(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>na(()=>vt(c.guards.map(y=>{const b=Up(y,c.node,t);let A;if(function $l(n){return n&&cn(n.canActivateChild)}(b))A=qr(b.canActivateChild(r,n));else{if(!cn(b))throw new Error("Invalid CanActivateChild guard");A=qr(b(r,n))}return A.pipe(co())})).pipe(ha())));return vt(u).pipe(ha())}(n,i.path,t),function vI(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return vt(!0);const i=r.map(u=>na(()=>{const c=Up(u,e,t);let f;if(function cd(n){return n&&cn(n.canActivate)}(c))f=qr(c.canActivate(e,n));else{if(!cn(c))throw new Error("Invalid CanActivate guard");f=qr(c(e,n))}return f.pipe(co())}));return vt(i).pipe(ha())}(n,i.route,t))),co(i=>!0!==i,!0))}(r,u,n,e):vt(f)),(0,jt.U)(f=>Object.assign(Object.assign({},t),{guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,ri.b)(f=>{if(Oi(f.guardsResult)){const b=Es(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw b.url=f.guardsResult,b}const y=new Ga(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(y)}),Yi(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),$p(f=>{if(f.guards.canActivateChecks.length)return vt(f).pipe((0,ri.b)(y=>{const b=new Wr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}),Wn(y=>{let b=!1;return vt(y).pipe(function LS(n,e){return(0,Cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return vt(t);let u=0;return(0,On.D)(i).pipe(sa(c=>function fa(n,e,t,r){return function ay(n,e,t,r){const i=jp(n);if(0===i.length)return vt({});const u={};return(0,On.D)(i).pipe((0,Cn.z)(c=>function MI(n,e,t,r){const i=Up(n,e,r);return qr(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,ri.b)(f=>{u[c]=f}))),nd(1),(0,Cn.z)(()=>jp(u).length===i.length?vt(u):ra.E))}(n._resolve,n,e,r).pipe((0,jt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Km(n,t).resolve),null)))}(c.route,r,n,e)),(0,ri.b)(()=>u++),nd(1),(0,Cn.z)(c=>u===i.length?vt(t):ra.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ri.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(y),this.cancelNavigationTransition(y,"At least one route resolver didn't emit any value."))}}))}),(0,ri.b)(y=>{const b=new Mi(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(b)}))}),$p(f=>{const{targetSnapshot:y,id:b,extractedUrl:A,rawUrl:S,extras:{skipLocationChange:L,replaceUrl:H}}=f;return this.hooks.afterPreactivation(y,{navigationId:b,appliedUrlTree:A,rawUrlTree:S,skipLocationChange:!!L,replaceUrl:!!H})}),(0,jt.U)(f=>{const y=function Zm(n,e,t){const r=Ka(n,e._root,t?t._root:void 0);return new od(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return Object.assign(Object.assign({},f),{targetRouterState:y})}),(0,ri.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,jt.U)(r=>(new ct(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,ri.b)({next(){u=!0},complete(){u=!0}}),function Mp(n){return(0,Cr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var f;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(f=this.currentNavigation)||void 0===f?void 0:f.id)===i.id&&(this.currentNavigation=null)}),Qi(f=>{if(c=!0,function xp(n){return n&&n[Fl]}(f)){const y=Oi(f.url);y||(this.navigated=!0,this.restoreHistory(i,!0));const b=new qn(i.id,this.serializeUrl(i.extractedUrl),f.message);r.next(b),y?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||F0(i.source)};this.scheduleNavigation(A,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new Ha(i.id,this.serializeUrl(i.extractedUrl),f);r.next(y);try{i.resolve(this.errorHandler(f))}catch(b){i.reject(b)}}return ra.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const y=Object.assign({},c);delete y.navigationId,delete y.\u0275routerPageId,0!==Object.keys(y).length&&(u.state=y)}const f=this.parseUrl(t.url);this.scheduleNavigation(f,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Za(t),this.config=t.map(ry),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:f,preserveFragment:y}=r,b=i||this.routerState.root,A=y?this.currentUrlTree.fragment:c;let S=null;switch(f){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),function da(n,e,t,r,i){if(0===t.length)return ld(e.root,e.root,e.root,r,i);const u=function Jm(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Op(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return wn(u.outlets,(y,b)=>{f[b]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,u]},[]);return new Op(t,e,r)}(t);if(u.toRoot())return ld(e.root,e.root,new _e([],{}),r,i);const c=function kp(n,e,t){if(n.isAbsolute)return new Pp(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Pp(u,u===e.root,0)}const r=mo(n.commands[0])?0:1;return function Xm(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Pp(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),f=c.processChildren?g(c.segmentGroup,c.index,u.commands):v(c.segmentGroup,c.index,u.commands);return ld(e.root,c.segmentGroup,f,r,i)}(b,this.currentUrlTree,t,S,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Oi(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function RI(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},xI):!1===r?Object.assign({},cy):r,Oi(t))return ca(this.currentUrlTree,t,i);const u=this.parseUrl(t);return ca(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new oa(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var f,y;if(this.disposed)return Promise.resolve(!1);let b,A,S;c?(b=c.resolve,A=c.reject,S=c.promise):S=new Promise((K,se)=>{b=K,A=se});const L=++this.navigationId;let H;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),H=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(f=this.browserPageId)&&void 0!==f?f:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):H=0,this.setTransition({id:L,targetPageId:H,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:b,reject:A,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(K=>Promise.reject(K))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new qn(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function F0(n){return"imperative"!==n}let Zl=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Ki.x,this.subscription=t.events.subscribe(u=>{u instanceof oa&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){if(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const f={skipLocationChange:fd(this.skipLocationChange),replaceUrl:fd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,f),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:fd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Pi),h.Y36(Nu),h.Y36(me))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function fd(n){return""===n||!!n}class fy{}class V0{preload(e,t){return vt(null)}}let U0=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new Hp(i,r,y=>t.triggerEvent(new aa(y)),y=>t.triggerEvent(new za(y)))}setUpPreloading(){this.subscription=this.router.events.pipe(Yi(t=>t instanceof oa),sa(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,On.D)(i).pipe((0,ms.J)(),(0,jt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?vt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Cn.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Pi),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(fy))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Gp=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ho?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof oa&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof kl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new kl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const bs=new h.OlP("ROUTER_CONFIGURATION"),gy=new h.OlP("ROUTER_FORROOT_GUARD"),B0=[Me,{provide:Tt,useClass:Pr},{provide:Pi,useFactory:function yy(n,e,t,r,i,u,c={},f,y){const b=new Pi(null,n,e,t,r,i,id(u));return f&&(b.urlHandlingStrategy=f),y&&(b.routeReuseStrategy=y),function H0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,b),c.enableTracing&&b.events.subscribe(A=>{var S,L;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${A.constructor.name}`),console.log(A.toString()),console.log(A),null===(L=console.groupEnd)||void 0===L||L.call(console)}),b},deps:[Tt,ku,Me,h.zs3,h.Sil,Bh,bs,[class k0{},new h.FiY],[class Uh{},new h.FiY]]},ku,{provide:Nu,useFactory:function zp(n){return n.routerState.root},deps:[Pi]},U0,V0,class py{preload(e,t){return t().pipe(Qi(()=>vt(null)))}},{provide:bs,useValue:{enableTracing:!1}}];function OI(){return new h.PXZ("Router",Pi)}let pa=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[B0,my(t),{provide:gy,useFactory:$0,deps:[[Pi,new h.FiY,new h.tp0]]},{provide:bs,useValue:r||{}},{provide:me,useFactory:j0,deps:[de,[new h.tBr(nt),new h.FiY],bs]},{provide:Gp,useFactory:PI,deps:[Pi,zc,bs]},{provide:fy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:V0},{provide:h.PXZ,multi:!0,useFactory:OI},[pd,{provide:h.ip1,multi:!0,useFactory:G0,deps:[pd]},{provide:vy,useFactory:_y,deps:[pd]},{provide:h.tb,multi:!0,useExisting:vy}]]}}static forChild(t){return{ngModule:n,providers:[my(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(gy,8),h.LFG(Pi,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function PI(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Gp(n,e,t)}function j0(n,e,t={}){return t.useHash?new Re(n,e):new $e(n,e)}function $0(n){return"guarded"}function my(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:Bh,multi:!0,useValue:n}]}let pd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ki.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(f=>r=f),u=this.injector.get(Pi),c=this.injector.get(bs);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?vt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(bs),i=this.injector.get(U0),u=this.injector.get(Gp),c=this.injector.get(Pi),f=this.injector.get(h.z2F);t===f.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(f.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function G0(n){return n.appInitializer.bind(n)}function _y(n){return n.bootstrapListener.bind(n)}const vy=new h.OlP("Router Initializer");let wy=(()=>{class n{constructor(){this.today=Date.now()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-view-date"]],decls:9,vars:4,consts:[[1,"header"],[1,"border-bottom","ms-1","border","bg-purple","w-100","text-center"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"h2")(2,"b"),h._uU(3,"TODAY"),h.qZA()(),h._uU(4),h.ALo(5,"date"),h._UZ(6,"br")(7,"br")(8,"p",1),h.qZA()),2&t&&(h.xp6(4),h.hij(" ",h.xi3(5,1,r.today,"EEEE d LLLL yyyy"),""))},pipes:[gl],encapsulation:2,changeDetection:0}),n})();const by=new h.OlP("GETS_ALL_IMAGES_DTO");function kI(n,e){if(1&n&&(h.TgZ(0,"div",2),h._UZ(1,"img",3),h.qZA()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("src",t.img,h.LSH)}}let z0=(()=>{class n{constructor(t){this._getsAllImagesDto=t,this.images$=this._getsAllImagesDto.getAll()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(by))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-images"]],decls:3,vars:3,consts:[[1,"center"],["style","width: 24rem;",4,"ngFor","ngForOf"],[2,"width","24rem"],[1,"card-img-top","p-1",3,"src"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0),h.YNc(1,kI,2,1,"div",1),h.ALo(2,"async"),h.qZA()),2&t&&(h.xp6(1),h.Q6J("ngForOf",h.lcZ(2,1,r.images$)))},directives:[ir],pipes:[$c],encapsulation:2,changeDetection:0}),n})(),W0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-home-page"]],decls:17,vars:0,consts:[[1,"px-4","py-5","my-5","text-center"],[1,"display-5","fw-bold"],[1,"col-lg-6","mx-auto"],[1,"lead","mb-4"],[1,"d-grid","gap-2","d-sm-flex","justify-content-sm-center"],["routerLink","/newtask","role","button",1,"btn","bg-purple","text-white"],["routerLink","/tasks","role","button",1,"btn","bg-purple","text-white"]],template:function(t,r){1&t&&(h._UZ(0,"lib-view-date"),h.TgZ(1,"div",0)(2,"h1",1),h._uU(3,"Get a clear view of the day ahead"),h.qZA(),h.TgZ(4,"div",2)(5,"p",3),h._uU(6,"All your tasks that are due today will show up here"),h.qZA(),h.TgZ(7,"div",4)(8,"a",5),h._uU(9,"Add task"),h.qZA()(),h._UZ(10,"br"),h.TgZ(11,"div")(12,"a",6),h._uU(13,"My tasks"),h.qZA(),h._UZ(14,"br")(15,"br"),h.qZA()()(),h._UZ(16,"lib-images"))},directives:[wy,Zl,z0],encapsulation:2,changeDetection:0}),n})(),qp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zi]]}),n})();var q0=P(4986),Sn=P(5813);function Kp(){return(0,Cr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Pn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function K0(n,e){return n===e}var lt,vo=P(2011),Eo=(P(5881),P(3942)),we=P(5861),ga=P(9681),Zp=P(4859),Lu=P(1877),en=P(2090),LI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ma={},Dy=Dy||{},Bt=LI||self;function Ot(){}function Yp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function gd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var md="closure_uid_"+(1e9*Math.random()>>>0),wo=0;function Y0(n,e,t){return n.call.apply(n.bind,arguments)}function VI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function kr(n,e,t){return(kr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Y0:VI).apply(null,arguments)}function Ws(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Fr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function Ya(){this.s=this.s,this.o=this.o}var BS={};Ya.prototype.s=!1,Ya.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Z0(n){return Object.prototype.hasOwnProperty.call(n,md)&&n[md]||(n[md]=++wo)}(this);delete BS[n]}},Ya.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Cy=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},UI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function jh(n){return Array.prototype.concat.apply([],arguments)}function $h(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function yd(n){return/^[\s\xa0]*$/.test(n)}var ki,Jp=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function es(n,e){return-1!=n.indexOf(e)}function Ty(n,e){return n<e?-1:n>e?1:0}e:{var Q0=Bt.navigator;if(Q0){var J0=Q0.userAgent;if(J0){ki=J0;break e}}ki=""}function Xp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function BI(n){const e={};for(const t in n)e[t]=n[t];return e}var X0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jI(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<X0.length;u++)t=X0[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function eg(n){return eg[" "](n),n}eg[" "]=Ot;var Ay,n,$I=es(ki,"Opera"),Vu=es(ki,"Trident")||es(ki,"MSIE"),HI=es(ki,"Edge"),tE=HI||Vu,GI=es(ki,"Gecko")&&!(es(ki.toLowerCase(),"webkit")&&!es(ki,"Edge"))&&!(es(ki,"Trident")||es(ki,"MSIE"))&&!es(ki,"Edge"),jS=es(ki.toLowerCase(),"webkit")&&!es(ki,"Edge");function zI(){var n=Bt.document;return n?n.documentMode:void 0}e:{var nE="",rE=(n=ki,GI?/rv:([^\);]+)(\)|;)/.exec(n):HI?/Edge\/([\d\.]+)/.exec(n):Vu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):jS?/WebKit\/(\S+)/.exec(n):$I?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(rE&&(nE=rE?rE[1]:""),Vu){var iE=zI();if(null!=iE&&iE>parseFloat(nE)){Ay=String(iE);break e}}Ay=nE}var $S={};var oE=Bt.document&&Vu&&(zI()||parseInt(Ay,10))||void 0,Sy=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Bt.addEventListener("test",Ot,e),Bt.removeEventListener("test",Ot,e)}catch(t){}return n}();function oi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Yl(n,e){if(oi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(GI){e:{try{eg(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:WI[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Yl.Z.h.call(this)}}oi.prototype.h=function(){this.defaultPrevented=!0},Fr(Yl,oi);var WI={2:"touch",3:"pen",4:"mouse"};Yl.prototype.h=function(){Yl.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var qs="closure_listenable_"+(1e6*Math.random()|0),aE=0;function qI(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++aE,this.ca=this.fa=!1}function _d(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function tg(n){this.src=n,this.g={},this.h=0}function ng(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Cy(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(_d(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function My(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}tg.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=My(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new qI(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var xy="closure_lm_"+(1e6*Math.random()|0),Ql={};function Jl(n,e,t,r,i){if(r&&r.once)return Ed(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Jl(n,e[u],t,r,i);return null}return t=ig(t),n&&n[qs]?n.N(e,t,gd(r)?!!r.capture:!!r,i):rg(n,e,t,!1,r,i)}function rg(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=gd(i)?!!i.capture:!!i,f=Gh(n);if(f||(n[xy]=f=new tg(n)),(t=f.add(e,t,r,c,u)).proxy)return t;if(r=function vd(){var e=uE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Sy||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Ny(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Ed(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Ed(n,e[u],t,r,i);return null}return t=ig(t),n&&n[qs]?n.O(e,t,gd(r)?!!r.capture:!!r,i):rg(n,e,t,!0,r,i)}function Xl(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)Xl(n,e[u],t,r,i);else r=gd(r)?!!r.capture:!!r,t=ig(t),n&&n[qs]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=My(u=n.g[e],t,r,i))&&(_d(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Gh(n))&&(e=n.g[e.toString()],n=-1,e&&(n=My(e,t,r,i)),(t=-1<n?e[n]:null)&&Ry(t))}function Ry(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[qs])ng(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Ny(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Gh(e))?(ng(t,n),0==t.h&&(t.src=null,e[xy]=null)):_d(n)}}}function Ny(n){return n in Ql?Ql[n]:Ql[n]="on"+n}function uE(n,e){if(n.ca)n=!0;else{e=new Yl(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Ry(n),n=t.call(r,e)}return n}function Gh(n){return(n=n[xy])instanceof tg?n:null}var zh="__closure_events_fn_"+(1e9*Math.random()>>>0);function ig(n){return"function"==typeof n?n:(n[zh]||(n[zh]=function(e){return n.handleEvent(e)}),n[zh])}function mr(){Ya.call(this),this.i=new tg(this),this.P=this,this.I=null}function ai(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new oi(e,n);else if(e instanceof oi)e.target=e.target||n;else{var i=e;jI(e=new oi(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Wh(c,r,!0,e)&&i}if(i=Wh(c=e.g=n,r,!0,e)&&i,i=Wh(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Wh(c=e.g=t[u],r,!1,e)&&i}function Wh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var f=c.listener,y=c.ia||c.src;c.fa&&ng(n.i,c),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}Fr(mr,Ya),mr.prototype[qs]=!0,mr.prototype.removeEventListener=function(n,e,t,r){Xl(this,n,e,t,r)},mr.prototype.M=function(){if(mr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)_d(t[r]);delete n.g[e],n.h--}}this.I=null},mr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},mr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var lE=Bt.JSON.stringify;function cE(){var n=YI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Fi,hE=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new fE,n=>n.reset());class fE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function KI(n){Bt.setTimeout(()=>{throw n},0)}function Oy(n,e){Fi||function ZI(){var n=Bt.Promise.resolve(void 0);Fi=function(){n.then(HS)}}(),Py||(Fi(),Py=!0),YI.add(n,e)}var Py=!1,YI=new class dE{constructor(){this.h=this.g=null}add(e,t){const r=hE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function HS(){for(var n;n=cE();){try{n.h.call(n.g)}catch(t){KI(t)}var e=hE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Py=!1}function qh(n,e){mr.call(this),this.h=n||1,this.g=e||Bt,this.j=kr(this.kb,this),this.l=Date.now()}function pE(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function ky(n,e,t){if("function"==typeof n)t&&(n=kr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=kr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Bt.setTimeout(n,e||0)}function sg(n){n.g=ky(()=>{n.g=null,n.i&&(n.i=!1,sg(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Fr(qh,mr),(lt=qh.prototype).da=!1,lt.S=null,lt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ai(this,"tick"),this.da&&(pE(this),this.start()))}},lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){qh.Z.M.call(this),pE(this),delete this.g};class gE extends Ya{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:sg(this)}M(){super.M(),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kh(n){Ya.call(this),this.h=n,this.g={}}Fr(Kh,Ya);var mE=[];function yE(n,e,t,r){Array.isArray(t)||(t&&(mE[0]=t.toString()),t=mE);for(var i=0;i<t.length;i++){var u=Jl(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Fy(n){Xp(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ry(e)},n),n.g={}}function og(){this.g=!0}function wd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function EE(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return lE(t)}catch(f){return e}}(n,t)+(r?" "+r:"")})}Kh.prototype.M=function(){Kh.Z.M.call(this),Fy(this)},Kh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},og.prototype.Aa=function(){this.g=!1},og.prototype.info=function(){};var ec={},bo=null;function bd(){return bo=bo||new mr}function wE(n){oi.call(this,ec.Ma,n)}function Zh(n){const e=bd();ai(e,new wE(e,n))}function JI(n,e){oi.call(this,ec.STAT_EVENT,n),this.stat=e}function _i(n){const e=bd();ai(e,new JI(e,n))}function bE(n,e){oi.call(this,ec.Na,n),this.size=e}function Yh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){n()},e)}ec.Ma="serverreachability",Fr(wE,oi),ec.STAT_EVENT="statevent",Fr(JI,oi),ec.Na="timingevent",Fr(bE,oi);var ag={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ug={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ly(){}function Qh(){}Ly.prototype.h=null;var Xh,tc={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Vy(){oi.call(this,"d")}function Jh(){oi.call(this,"c")}function ef(){}function tf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Kh(this),this.P=Uy,this.W=new qh(n=tE?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new IE}function IE(){this.i=null,this.g="",this.h=!1}Fr(Vy,oi),Fr(Jh,oi),Fr(ef,Ly),ef.prototype.g=function(){return new XMLHttpRequest},ef.prototype.i=function(){return{}},Xh=new ef;var Uy=45e3,CE={},lg={};function cg(n,e,t){n.K=1,n.v=af(Ja(e)),n.s=t,n.U=!0,By(n,null)}function By(n,e){n.F=Date.now(),Ds(n),n.A=Ja(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),NE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new IE,n.g=n_(n.l,t?e:null,!n.s),0<n.O&&(n.L=new gE(kr(n.Ia,n,n.g),n.O)),yE(n.V,n.g,"readystatechange",n.gb),e=n.H?BI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Zh(1),function _E(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",f=u.split("&"),y=0;y<f.length;y++){var b=f[y].split("=");if(1<b.length){var A=b[0];b=b[1];var S=A.split("_");c=2<=S.length&&"type"==S[1]?c+(A+"=")+b+"&":c+(A+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function jy(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function $y(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=TE(n,t),i==lg){4==e&&(n.o=4,_i(14),r=!1),wd(n.j,n.m,null,"[Incomplete Response]");break}if(i==CE){n.o=4,_i(15),wd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}wd(n.j,n.m,i,null),sf(n,i)}jy(n)&&i!=lg&&i!=CE&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,_i(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Hu(e),e.L=!0,_i(11))):(wd(n.j,n.m,t,"[Invalid Chunked Response]"),Dd(n),rf(n))}function TE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?lg:(t=Number(e.substring(t,r)),isNaN(t)?CE:(r+=1)+t>e.length?lg:(e=e.substr(r,t),n.C=r+t,e))}function Ds(n){n.Y=Date.now()+n.P,nf(n,n.P)}function nf(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Yh(kr(n.eb,n),e)}function dg(n){n.B&&(Bt.clearTimeout(n.B),n.B=null)}function rf(n){0==n.l.G||n.I||cc(n.l,n)}function Dd(n){dg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,pE(n.W),Fy(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function sf(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||LE(t.i,n)))if(t.I=n.N,!n.J&&LE(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Yh(kr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;tu(t),Lr(t)}$u(t),_i(18)}if(1>=FE(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else Gu(t,11)}else if((n.J||t.g==n)&&tu(t),!yd(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const S=b[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const L=b[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const K=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var u=r.i;!u.g&&(es(K,"spdy")||es(K,"quic")||es(K,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(VE(u,u.h),u.h=null))}if(r.D){const se=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;se&&(r.sa=se,bn(r.F,r.D,se))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=t_(r,r.H?r.la:null,r.W),c.J){pg(r.i,c);var f=c,y=r.K;y&&f.setTimeout(y),f.B&&(dg(f),Ds(f)),r.g=c}else uc(r);0<t.l.length&&Li(t)}else"stop"!=b[0]&&"close"!=b[0]||Gu(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Gu(t,7):sc(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}Zh(4)}catch(b){}}function of(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Yp(n)||"string"==typeof n)UI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Yp(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function AE(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Yp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function ya(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof ya)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Hy(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Qa(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Qa(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Qa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(lt=tf.prototype).setTimeout=function(n){this.P=n},lt.gb=function(n){n=n.target;const e=this.L;e&&3==eu(n)?e.l():this.Ia(n)},lt.Ia=function(n){try{if(n==this.g)e:{const A=eu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>A)&&(3!=A||tE||this.g&&(this.h.h||this.g.ga()||Ad(this.g)))){this.I||4!=A||7==e||Zh(8==e||0>=S?3:2),dg(this);var t=this.g.ba();this.N=t;t:if(jy(this)){var r=Ad(this.g);n="";var i=r.length,u=4==eu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Dd(this),rf(this);var c="";break t}this.h.i=new Bt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function QI(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yd(f)){var b=f;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,_i(12),Dd(this),rf(this);break e}wd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sf(this,t)}this.U?($y(this,A,c),tE&&this.i&&3==A&&(yE(this.V,this.W,"tick",this.fb),this.W.start())):(wd(this.j,this.m,c,null),sf(this,c)),4==A&&Dd(this),this.i&&!this.I&&(4==A?cc(this.l,this):(this.i=!1,Ds(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,_i(12)):(this.o=0,_i(13)),Dd(this),rf(this)}}}catch(A){}},lt.fb=function(){if(this.g){var n=eu(this.g),e=this.g.ga();this.C<e.length&&(dg(this),$y(this,n,e),this.i&&4!=n&&Ds(this))}},lt.cancel=function(){this.I=!0,Dd(this)},lt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function vE(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Zh(3),_i(17)),Dd(this),this.o=2,rf(this)):nf(this,this.Y-n)},(lt=ya.prototype).R=function(){Hy(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},lt.T=function(){return Hy(this),this.g.concat()},lt.get=function(n,e){return Qa(this.h,n)?this.h[n]:e},lt.set=function(n,e){Qa(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},lt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var Gy=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Bu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Bu){this.g=void 0!==e?e:n.g,Id(this,n.j),this.s=n.s,hg(this,n.i),fg(this,n.m),this.l=n.l,e=n.h;var t=new Cd;t.i=e.i,e.g&&(t.g=new ya(e.g),t.h=e.h),zy(this,t),this.o=n.o}else n&&(t=String(n).match(Gy))?(this.g=!!e,Id(this,t[1]||"",!0),this.s=_a(t[2]||""),hg(this,t[3]||"",!0),fg(this,t[4]),this.l=_a(t[5]||"",!0),zy(this,t[6]||"",!0),this.o=_a(t[7]||"")):(this.g=!!e,this.h=new Cd(null,this.g))}function Ja(n){return new Bu(n)}function Id(n,e,t){n.j=t?_a(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function hg(n,e,t){n.i=t?_a(e,!0):e}function fg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function zy(n,e,t){e instanceof Cd?(n.h=e,function rC(n,e){e&&!n.j&&(Xa(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(qy(this,r),NE(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=uf(e,Wy)),n.h=new Cd(e,n.g))}function bn(n,e,t){n.h.set(e,t)}function af(n){return bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _a(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function uf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,tC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function tC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Bu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(uf(e,ME,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(uf(e,ME,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(uf(t,"/"==t.charAt(0)?Do:nC,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",uf(t,xE)),n.join("")};var ME=/[#\/\?@]/g,nC=/[#\?:]/g,Do=/[#\?]/g,Wy=/[#\?@]/g,xE=/#/g;function Cd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Xa(n){n.g||(n.g=new ya,n.h=0,n.i&&function SE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function qy(n,e){Xa(n),e=Td(n,e),Qa(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Qa((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Hy(n)))}function RE(n,e){return Xa(n),e=Td(n,e),Qa(n.g.h,e)}function NE(n,e,t){qy(n,e),0<t.length&&(n.i=null,n.g.set(Td(n,e),$h(t)),n.h+=t.length)}function Td(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function iC(n){this.l=n||PE,n=Bt.PerformanceNavigationTiming?0<(n=Bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Bt.g&&Bt.g.Ea&&Bt.g.Ea()&&Bt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=Cd.prototype).add=function(n,e){Xa(this),this.i=null,n=Td(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},lt.forEach=function(n,e){Xa(this),this.g.forEach(function(t,r){UI(t,function(i){n.call(e,i,r,this)},this)},this)},lt.T=function(){Xa(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},lt.R=function(n){Xa(this);var e=[];if("string"==typeof n)RE(this,n)&&(e=jh(e,this.g.get(Td(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=jh(e,n[t])}return e},lt.set=function(n,e){return Xa(this),this.i=null,RE(this,n=Td(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},lt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var PE=10;function kE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function FE(n){return n.h?1:n.g?n.g.size:0}function LE(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function VE(n,e){n.g?n.g.add(e):n.h=e}function pg(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function UE(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return $h(n.i)}function gg(){}function BE(){this.g=new gg}function GS(n,e,t){const r=t||"";try{of(n,function(i,u){let c=i;gd(i)&&(c=lE(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ky(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function mg(n){this.l=n.$b||null,this.j=n.ib||!1}function lf(n,e){mr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=yg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}iC.prototype.cancel=function(){if(this.i=UE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},gg.prototype.stringify=function(n){return Bt.JSON.stringify(n,void 0)},gg.prototype.parse=function(n){return Bt.JSON.parse(n,void 0)},Fr(mg,Ly),mg.prototype.g=function(){return new lf(this.l,this.j)},mg.prototype.i=function(n){return function(){return n}}({}),Fr(lf,mr);var yg=0;function Zy(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function cf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,_g(n)}function _g(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=lf.prototype).open=function(n,e){if(this.readyState!=yg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,_g(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Bt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cf(this)),this.readyState=yg},lt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,_g(this)),this.g&&(this.readyState=3,_g(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Bt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zy(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},lt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?cf(this):_g(this),3==this.readyState&&Zy(this)}},lt.Ua=function(n){this.g&&(this.response=this.responseText=n,cf(this))},lt.Ta=function(n){this.g&&(this.response=n,cf(this))},lt.ha=function(){this.g&&cf(this)},lt.setRequestHeader=function(n,e){this.v.append(n,e)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(lf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var jE=Bt.JSON.parse;function ur(n){mr.call(this),this.headers=new ya,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$E,this.K=this.L=!1}Fr(ur,mr);var $E="",Yy=/^https?$/i,sC=["POST","PUT"];function aC(n){return"content-type"==n.toLowerCase()}function HE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,GE(n),nc(n)}function GE(n){n.D||(n.D=!0,ai(n,"complete"),ai(n,"error"))}function zE(n){if(n.h&&void 0!==Dy&&(!n.C[1]||4!=eu(n)||2!=n.ba()))if(n.v&&4==eu(n))ky(n.Fa,0,n);else if(ai(n,"readystatechange"),4==eu(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(Gy)[1]||null;if(!i&&Bt.self&&Bt.self.location){var u=Bt.self.location.protocol;i=u.substr(0,u.length-1)}r=!Yy.test(i?i.toLowerCase():"")}t=r}if(t)ai(n,"complete"),ai(n,"success");else{n.m=6;try{var c=2<eu(n)?n.g.statusText:""}catch(y){c=""}n.j=c+" ["+n.ba()+"]",GE(n)}}finally{nc(n)}}}function nc(n,e){if(n.g){rc(n);const t=n.g,r=n.C[0]?Ot:null;n.g=null,n.C=null,e||ai(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function rc(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Bt.clearTimeout(n.A),n.A=null)}function eu(n){return n.g?n.g.readyState:0}function Ad(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case $E:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Qy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function uC(n){let e="";return Xp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):bn(n,e,t))}function ic(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Co(n){this.za=0,this.l=[],this.h=new og,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ic("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ic("baseRetryDelayMs",5e3,n),this.$a=ic("retryDelaySeedMs",1e4,n),this.Ya=ic("forwardChannelMaxRetries",2,n),this.ra=ic("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new iC(n&&n.concurrentRequestLimit),this.Ca=new BE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function sc(n){if(ju(n),3==n.G){var e=n.V++,t=Ja(n.F);bn(t,"SID",n.J),bn(t,"RID",e),bn(t,"TYPE","terminate"),va(n,t),(e=new tf(n,n.h,e,void 0)).K=2,e.v=af(Ja(t)),t=!1,Bt.navigator&&Bt.navigator.sendBeacon&&(t=Bt.navigator.sendBeacon(e.v.toString(),"")),!t&&Bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=n_(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ds(e)}e_(n)}function Lr(n){n.g&&(Hu(n),n.g.cancel(),n.g=null)}function ju(n){Lr(n),n.u&&(Bt.clearTimeout(n.u),n.u=null),tu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Bt.clearTimeout(n.m),n.m=null)}function Sd(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Li(n)}function Li(n){kE(n.i)||n.m||(n.m=!0,Oy(n.Ha,n),n.C=0)}function oc(n,e){var t;t=e?e.m:n.V++;const r=Ja(n.F);bn(r,"SID",n.J),bn(r,"RID",t),bn(r,"AID",n.U),va(n,r),n.o&&n.s&&Qy(r,n.o,n.s),t=new tf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=ac(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),VE(n.i,t),cg(t,r,e)}function va(n,e){n.j&&of({},function(t,r){bn(e,r,t)})}function ac(n,e,t){t=Math.min(n.l.length,t);var r=n.j?kr(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let f=!0;for(let y=0;y<t;y++){let b=i[y].h;const A=i[y].g;if(b-=u,0>b)u=Math.max(0,i[y].h-100),f=!1;else try{GS(A,c,"req"+b+"_")}catch(S){r&&r(A)}}if(f){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function uc(n){n.g||n.u||(n.Y=1,Oy(n.Ga,n),n.A=0)}function $u(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Yh(kr(n.Ga,n),Xy(n,n.A)),n.A++,0))}function Hu(n){null!=n.B&&(Bt.clearTimeout(n.B),n.B=null)}function lc(n){n.g=new tf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Ja(n.oa);bn(e,"RID","rpc"),bn(e,"SID",n.J),bn(e,"CI",n.N?"0":"1"),bn(e,"AID",n.U),va(n,e),bn(e,"TYPE","xmlhttp"),n.o&&n.s&&Qy(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=af(Ja(e)),t.s=null,t.U=!0,By(t,n)}function tu(n){null!=n.v&&(Bt.clearTimeout(n.v),n.v=null)}function cc(n,e){var t=null;if(n.g==e){tu(n),Hu(n),n.g=null;var r=2}else{if(!LE(n.i,e))return;t=e.D,pg(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ai(r=bd(),new bE(r,t,e,i)),Li(n)}else uc(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Jy(n,e){return!(FE(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Yh(kr(n.Ha,n,e),Xy(n,n.C)),n.C++,0)))}(n,e)||2==r&&$u(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Gu(n,5);break;case 4:Gu(n,10);break;case 3:Gu(n,6);break;default:Gu(n,2)}}function Xy(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Gu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=kr(n.jb,n);t||(t=new Bu("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||Id(t,"https"),af(t)),function Io(n,e){const t=new og;if(Bt.Image){const r=new Image;r.onload=Ws(Ky,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ws(Ky,t,r,"TestLoadImage: error",!1,e),r.onabort=Ws(Ky,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ws(Ky,t,r,"TestLoadImage: timeout",!1,e),Bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else _i(2);n.G=0,n.j&&n.j.va(e),e_(n),ju(n)}function e_(n){n.G=0,n.I=-1,n.j&&((0!=UE(n.i).length||0!=n.l.length)&&(n.i.i.length=0,$h(n.l),n.l.length=0),n.j.ua())}function t_(n,e,t){let r=function XI(n){return n instanceof Bu?Ja(n):new Bu(n,void 0)}(t);if(""!=r.i)e&&hg(r,e+"."+r.i),fg(r,r.m);else{const i=Bt.location;r=function eC(n,e,t,r){var i=new Bu(null,void 0);return n&&Id(i,n),e&&hg(i,e),t&&fg(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Xp(n.aa,function(i,u){bn(r,u,i)}),t=n.sa,(e=n.D)&&t&&bn(r,e,t),bn(r,"VER",n.ma),va(n,r),r}function n_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ur(t&&n.Ba&&!n.qa?new mg({ib:!0}):n.qa)).L=n.H,e}function r_(){}function df(){if(Vu&&!(10<=Number(oE)))throw Error("Environmental error: no available transport.")}function ts(n,e){mr.call(this),this.g=new Co(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!yd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new dc(this)}function i_(n){Vy.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function WE(){Jh.call(this),this.status=1}function dc(n){this.g=n}(lt=ur.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Xh.g(),this.C=function DE(n){return n.h||(n.h=n.i())}(this.u?this.u:Xh),this.g.onreadystatechange=kr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void HE(this,u)}n=t||"";const i=new ya(this.headers);r&&of(r,function(u,c){i.set(c,u)}),r=function Qp(n){e:{var e=aC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Bt.FormData&&n instanceof Bt.FormData,!(0<=Cy(sC,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{rc(this),0<this.B&&((this.K=function oC(n){return Vu&&function Uu(){return function eE(n){var e=$S;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Jp(String(Ay)).split("."),t=Jp("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=Ty(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||Ty(0==i[2].length,0==u[2].length)||Ty(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=kr(this.pa,this)):this.A=ky(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){HE(this,u)}},lt.pa=function(){void 0!==Dy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ai(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ai(this,"complete"),ai(this,"abort"),nc(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nc(this,!0)),ur.Z.M.call(this)},lt.Fa=function(){this.s||(this.F||this.v||this.l?zE(this):this.cb())},lt.cb=function(){zE(this)},lt.ba=function(){try{return 2<eu(this)?this.g.status:-1}catch(n){return-1}},lt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},lt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),jE(e)}},lt.Da=function(){return this.m},lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=Co.prototype).ma=8,lt.G=1,lt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},lt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new tf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=BI(u),jI(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ac(this,i,e),bn(t=Ja(this.F),"RID",n),bn(t,"CVER",22),this.D&&bn(t,"X-HTTP-Session-Id",this.D),va(this,t),this.o&&u&&Qy(t,this.o,u),VE(this.i,i),this.Ra&&bn(t,"TYPE","init"),this.ja?(bn(t,"$req",e),bn(t,"SID","null"),i.$=!0,cg(i,t,null)):cg(i,t,e),this.G=2}}else 3==this.G&&(n?oc(this,n):0==this.l.length||kE(this.i)||oc(this))},lt.Ga=function(){if(this.u=null,lc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Yh(kr(this.bb,this),n)}},lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,_i(10),Lr(this),lc(this))},lt.ab=function(){null!=this.v&&(this.v=null,Lr(this),$u(this),_i(19))},lt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),_i(2)):(this.h.info("Failed to ping google.com"),_i(1))},(lt=r_.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Oa=function(){},df.prototype.g=function(n,e){return new ts(n,e)},Fr(ts,mr),ts.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Oy(kr(n.hb,n,e))),_i(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=t_(n,null,n.W),Li(n)},ts.prototype.close=function(){sc(this.g)},ts.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Sd(this.g,e)}else this.v?((e={}).__data__=lE(n),Sd(this.g,e)):Sd(this.g,n)},ts.prototype.M=function(){this.g.j=null,delete this.j,sc(this.g),delete this.g,ts.Z.M.call(this)},Fr(i_,Vy),Fr(WE,Jh),Fr(dc,r_),dc.prototype.xa=function(){ai(this.g,"a")},dc.prototype.wa=function(n){ai(this.g,new i_(n))},dc.prototype.va=function(n){ai(this.g,new WE(n))},dc.prototype.ua=function(){ai(this.g,"b")},df.prototype.createWebChannel=df.prototype.g,ts.prototype.send=ts.prototype.u,ts.prototype.open=ts.prototype.m,ts.prototype.close=ts.prototype.close,ag.NO_ERROR=0,ag.TIMEOUT=8,ag.HTTP_ERROR=6,ug.COMPLETE="complete",Qh.EventType=tc,tc.OPEN="a",tc.CLOSE="b",tc.ERROR="c",tc.MESSAGE="d",mr.prototype.listen=mr.prototype.N,ur.prototype.listenOnce=ur.prototype.O,ur.prototype.getLastError=ur.prototype.La,ur.prototype.getLastErrorCode=ur.prototype.Da,ur.prototype.getStatus=ur.prototype.ba,ur.prototype.getResponseJson=ur.prototype.Qa,ur.prototype.getResponseText=ur.prototype.ga,ur.prototype.send=ur.prototype.ea;var lC=ma.createWebChannelTransport=function(){return new df},cC=ma.getStatEventTarget=function(){return bd()},vg=ma.ErrorCode=ag,dC=ma.EventType=ug,hC=ma.Event=ec,s_=ma.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},fC=ma.FetchXmlHttpFactory=mg,hf=ma.WebChannel=Qh,pC=ma.XhrIo=ur;const qE="@firebase/firestore";class vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");let Md="9.6.11";const Ea=new Lu.Yd("@firebase/firestore");function ff(){return Ea.logLevel}function Ue(n,...e){if(Ea.logLevel<=Lu.in.DEBUG){const t=e.map(o_);Ea.debug(`Firestore (${Md}): ${n}`,...t)}}function Vr(n,...e){if(Ea.logLevel<=Lu.in.ERROR){const t=e.map(o_);Ea.error(`Firestore (${Md}): ${n}`,...t)}}function Eg(n,...e){if(Ea.logLevel<=Lu.in.WARN){const t=e.map(o_);Ea.warn(`Firestore (${Md}): ${n}`,...t)}}function o_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${Md}) INTERNAL ASSERTION FAILED: `+n;throw Vr(e),new Error(e)}function kt(n,e){n||dt()}function Ze(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends en.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class a_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vi.UNAUTHENTICATED))}shutdown(){}}class yC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class KE{constructor(e){this.t=e,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Kr,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const b=c;e.enqueueRetryable((0,we.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},y=b=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(b=>y(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Kr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(kt("string"==typeof r.accessToken),new a_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new vi(e)}}class _C{constructor(e,t,r){this.type="FirstParty",this.user=vi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class vC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new _C(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ZE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EC{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.p;return this.p=u.token,Ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?i(u):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kt("string"==typeof t.token),this.p=t.token,new ZE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ns{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function wC(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ns.A=-1;class u_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=wC(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function zu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function bC(n){return n+"\0"}class Xn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xn.fromMillis(Date.now())}static fromDate(e){return Xn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xt(e)}static min(){return new xt(new Xn(0,0))}static max(){return new xt(new Xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function DC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function To(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function l_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class hc{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===hc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class sn extends hc{construct(e,t,r){return new sn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new sn(t)}static emptyPath(){return new sn([])}}const IC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yr extends hc{construct(e,t,r){return new yr(e,t,r)}static isValidIdentifier(e){return IC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Pe(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Pe(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Pe(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(u(),i++)}if(u(),c)throw new Pe(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yr(t)}static emptyPath(){return new yr([])}}class nu{constructor(e){this.fields=e,e.sort(yr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Zr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zr.EMPTY_BYTE_STRING=new Zr("");const CC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wa(n){if(kt(!!n),"string"==typeof n){let e=0;const t=CC.exec(n);if(kt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kn(n.seconds),nanos:Kn(n.nanos)}}function Kn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Wu(n){return"string"==typeof n?Zr.fromBase64String(n):Zr.fromUint8Array(n)}function bg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Dg(n){const e=n.mapValue.fields.__previous_value__;return bg(e)?Dg(e):e}function xd(n){const e=wa(n.mapValue.fields.__local_write_time__.timestampValue);return new Xn(e.seconds,e.nanos)}class YE{constructor(e,t,r,i,u,c,f,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.useFetchStreams=y}}class Ao{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ao("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ao&&e.projectId===this.projectId&&e.database===this.database}}function qu(n){return null==n}function pf(n){return 0===n&&1/n==-1/0}function d_(n){return"number"==typeof n&&Number.isInteger(n)&&!pf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(sn.fromString(e))}static fromName(e){return new qe(sn.fromString(e).popFirst(5))}static empty(){return new qe(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===sn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return sn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new sn(e.slice()))}}const Ig={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},h_={nullValue:"NULL_VALUE"};function fc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bg(n)?4:QE(n)?9:10:dt()}function So(n,e){if(n===e)return!0;const t=fc(n);if(t!==fc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xd(n).isEqual(xd(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=wa(r.timestampValue),c=wa(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Wu(n.bytesValue).isEqual(Wu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Kn(r.geoPointValue.latitude)===Kn(i.geoPointValue.latitude)&&Kn(r.geoPointValue.longitude)===Kn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Kn(r.integerValue)===Kn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Kn(r.doubleValue),c=Kn(i.doubleValue);return u===c?pf(u)===pf(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return zu(n.arrayValue.values||[],e.arrayValue.values||[],So);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(DC(u)!==DC(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===c[f]||!So(u[f],c[f])))return!1;return!0}(n,e);default:return dt()}var i}function Rd(n,e){return void 0!==(n.values||[]).find(t=>So(t,e))}function ru(n,e){if(n===e)return 0;const t=fc(n),r=fc(e);if(t!==r)return Ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Kn(i.integerValue||i.doubleValue),f=Kn(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return Cg(n.timestampValue,e.timestampValue);case 4:return Cg(xd(n),xd(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Wu(i),f=Wu(u);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),f=u.split("/");for(let y=0;y<c.length&&y<f.length;y++){const b=Ht(c[y],f[y]);if(0!==b)return b}return Ht(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Ht(Kn(i.latitude),Kn(u.latitude));return 0!==c?c:Ht(Kn(i.longitude),Kn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],f=u.values||[];for(let y=0;y<c.length&&y<f.length;++y){const b=ru(c[y],f[y]);if(b)return b}return Ht(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){const c=i.fields||{},f=Object.keys(c),y=u.fields||{},b=Object.keys(y);f.sort(),b.sort();for(let A=0;A<f.length&&A<b.length;++A){const S=Ht(f[A],b[A]);if(0!==S)return S;const L=ru(c[f[A]],y[b[A]]);if(0!==L)return L}return Ht(f.length,b.length)}(n.mapValue,e.mapValue);default:throw dt()}}function Cg(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=wa(n),r=wa(e),i=Ht(t.seconds,r.seconds);return 0!==i?i:Ht(t.nanos,r.nanos)}function pc(n){return Tg(n)}function Tg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=wa(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Wu(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=Tg(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const f of i)c?c=!1:u+=",",u+=`${f}:${Tg(r.fields[f])}`;return u+"}"}(n.mapValue):dt();var e}function Ku(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ag(n){return!!n&&"integerValue"in n}function Nd(n){return!!n&&"arrayValue"in n}function f_(n){return!!n&&"nullValue"in n}function p_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gf(n){return!!n&&"mapValue"in n}function Sg(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return To(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Sg(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sg(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function TC(n){return"nullValue"in n?h_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ku(Ao.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function JE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ku(Ao.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ig:dt()}function XE(n,e){return void 0===n?e:void 0===e||ru(n,e)>0?n:e}function Tr(n,e){return void 0===n?e:void 0===e||ru(n,e)<0?n:e}class ui{constructor(e){this.value=e}static empty(){return new ui({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sg(t)}setAll(e){let t=yr.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=Sg(c):i.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());gf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return So(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){To(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new ui(Sg(this.value))}}function ew(n){const e=[];return To(n.fields,(t,r)=>{const i=new yr([t]);if(gf(r)){const u=ew(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new nu(e)}class Hn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Hn(e,0,xt.min(),xt.min(),ui.empty(),0)}static newFoundDocument(e,t,r){return new Hn(e,1,t,xt.min(),r,0)}static newNoDocument(e,t){return new Hn(e,2,t,xt.min(),ui.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,xt.min(),ui.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ui.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ui.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mf{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function g_(n){return n.fields.find(e=>2===e.kind)}function Zu(n){return n.fields.filter(e=>2!==e.kind)}mf.UNKNOWN_ID=-1;class yf{constructor(e,t){this.fieldPath=e,this.kind=t}}class ba{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ba(0,Da.min())}}function tw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xt.fromTimestamp(1e9===r?new Xn(t+1,0):new Xn(t,r));return new Da(i,qe.empty(),e)}function AC(n){return new Da(n.readTime,n.key,-1)}class Da{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Da(xt.min(),qe.empty(),-1)}static max(){return new Da(xt.max(),qe.empty(),-1)}}function SC(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Ht(n.largestBatchId,e.largestBatchId))}class nw{constructor(e,t=null,r=[],i=[],u=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=f,this.P=null}}function MC(n,e=null,t=[],r=[],i=null,u=null,c=null){return new nw(n,e,t,r,i,u,c)}function Yu(n){const e=Ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+pc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),qu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>pc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>pc(r)).join(",")),e.P=t}return e.P}function rs(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!OC(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!So(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!v_(n.startAt,e.startAt)&&v_(n.endAt,e.endAt)}function Mg(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function _f(n,e){return n.filters.filter(t=>t instanceof Mn&&t.field.isEqual(e))}function Mo(n,e,t){let r,i=!0;for(const u of _f(n,e)){let c,f=!0;switch(u.op){case"<":case"<=":c=TC(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,f=!1;break;case"!=":case"not-in":c=h_}XE(r,c)===c&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];XE(r,c)===c&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function Ks(n,e,t){let r,i=!0;for(const u of _f(n,e)){let c,f=!0;switch(u.op){case">=":case">":c=JE(u.value),f=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,f=!1;break;case"!=":case"not-in":c=Ig}Tr(r,c)===c&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Tr(r,c)===c&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Mn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new rw(e,t,r):"array-contains"===t?new RC(e,r):"in"===t?new NC(e,r):"not-in"===t?new y_(e,r):"array-contains-any"===t?new vf(e,r):new Mn(e,t,r)}static V(e,t,r){return"in"===t?new iw(e,r):new xC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(ru(t,this.value)):null!==t&&fc(this.value)===fc(t)&&this.v(ru(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class rw extends Mn{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.v(t)}}class iw extends Mn{constructor(e,t){super(e,"in",t),this.keys=sw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xC extends Mn{constructor(e,t){super(e,"not-in",t),this.keys=sw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class RC extends Mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nd(t)&&Rd(t.arrayValue,this.value)}}class NC extends Mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Rd(this.value.arrayValue,t)}}class y_ extends Mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Rd(this.value.arrayValue,t)}}class vf extends Mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Rd(this.value.arrayValue,r))}}class Qu{constructor(e,t){this.position=e,this.inclusive=t}}class gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function OC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function __(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?qe.comparator(qe.fromName(c.referenceValue),t.key):ru(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function v_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!So(n.position[t],e.position[t]))return!1;return!0}class Zs{constructor(e,t=null,r=[],i=[],u=null,c="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=f,this.endAt=y,this.D=null,this.C=null}}function ow(n,e,t,r,i,u,c,f){return new Zs(n,e,t,r,i,u,c,f)}function mc(n){return new Zs(n)}function Ef(n){return!qu(n.limit)&&"F"===n.limitType}function wf(n){return!qu(n.limit)&&"L"===n.limitType}function Od(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function xg(n){for(const e of n.filters)if(e.S())return e.field;return null}function Rg(n){return null!==n.collectionGroup}function yc(n){const e=Ze(n);if(null===e.D){e.D=[];const t=xg(e),r=Od(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new gc(t)),e.D.push(new gc(yr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new gc(yr.keyField(),u))}}}return e.D}function Is(n){const e=Ze(n);if(!e.C)if("F"===e.limitType)e.C=MC(e.path,e.collectionGroup,yc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of yc(e))t.push(new gc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Qu(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Qu(e.startAt.position,!e.startAt.inclusive):null;e.C=MC(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function E_(n,e,t){return new Zs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Pd(n,e){return rs(Is(n),Is(e))&&n.limitType===e.limitType}function w_(n){return`${Yu(Is(n))}|lt:${n.limitType}`}function Ng(n){return`Query(target=${function m_(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${pc(r.value)}`;var r}).join(", ")}]`),qu(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>pc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>pc(t)).join(",")),`Target(${e})`}(Is(n))}; limitType=${n.limitType})`}function b_(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const f=__(i,u,c);return i.inclusive?f<=0:f<0}(t.startAt,yc(t),r)||t.endAt&&!function(i,u,c){const f=__(i,u,c);return i.inclusive?f>=0:f>0}(t.endAt,yc(t),r)));var t,r}function aw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uw(n){return(e,t)=>{let r=!1;for(const i of yc(n)){const u=PC(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function PC(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(i,u,c){const f=u.data.field(i),y=c.data.field(i);return null!==f&&null!==y?ru(f,y):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function lw(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pf(e)?"-0":e}}function cw(n){return{integerValue:""+n}}function dw(n,e){return d_(e)?cw(e):lw(n,e)}class Og{constructor(){this._=void 0}}function kC(n,e,t){return n instanceof kd?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof _c?fw(n,e):n instanceof vc?pw(n,e):function(r,i){const u=hw(r,i),c=gw(u)+gw(r.k);return Ag(u)&&Ag(r.k)?cw(c):lw(r.M,c)}(n,e)}function FC(n,e,t){return n instanceof _c?fw(n,e):n instanceof vc?pw(n,e):t}function hw(n,e){return n instanceof Fd?Ag(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class kd extends Og{}class _c extends Og{constructor(e){super(),this.elements=e}}function fw(n,e){const t=D_(e);for(const r of n.elements)t.some(i=>So(i,r))||t.push(r);return{arrayValue:{values:t}}}class vc extends Og{constructor(e){super(),this.elements=e}}function pw(n,e){let t=D_(e);for(const r of n.elements)t=t.filter(i=>!So(i,r));return{arrayValue:{values:t}}}class Fd extends Og{constructor(e,t){super(),this.M=e,this.k=t}}function gw(n){return Kn(n.integerValue||n.doubleValue)}function D_(n){return Nd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ld{constructor(e,t){this.field=e,this.transform=t}}class yw{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Df{}function _w(n,e,t){n instanceof If?function(r,i,u){const c=r.value.clone(),f=LC(r.fieldTransforms,i,u.transformResults);c.setAll(f),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Ec?function(r,i,u){if(!bf(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=LC(r.fieldTransforms,i,u.transformResults),f=i.data;f.setAll(wc(r)),f.setAll(c),i.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Pg(n,e,t){var i;n instanceof If?function(r,i,u){if(!bf(r.precondition,i))return;const c=r.value.clone(),f=kg(r.fieldTransforms,u,i);c.setAll(f),i.convertToFoundDocument(Ju(i),c).setHasLocalMutations()}(n,e,t):n instanceof Ec?function(r,i,u){if(!bf(r.precondition,i))return;const c=kg(r.fieldTransforms,u,i),f=i.data;f.setAll(wc(r)),f.setAll(c),i.convertToFoundDocument(Ju(i),f).setHasLocalMutations()}(n,e,t):bf(n.precondition,i=e)&&i.convertToNoDocument(xt.min())}function vw(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=hw(r.transform,i||null);null!=u&&(null==t&&(t=ui.empty()),t.set(r.field,u))}return t||null}function I_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&zu(t,r,(i,u)=>function mw(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof _c&&r instanceof _c||t instanceof vc&&r instanceof vc?zu(t.elements,r.elements,So):t instanceof Fd&&r instanceof Fd?So(t.k,r.k):t instanceof kd&&r instanceof kd);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Ju(n){return n.isFoundDocument()?n.version:xt.min()}class If extends Df{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Ec extends Df{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}}function wc(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function LC(n,e,t){const r=new Map;kt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,f=e.data.field(u.field);r.set(u.field,FC(c,f,t[i]))}return r}function kg(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,kC(u,c,e))}return r}class Fg extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Lg extends Df{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Ew{constructor(e){this.count=e}}var Ur,He;function ww(n){switch(n){default:return dt();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function bw(n){if(void 0===n)return Vr("GRPC error has no .code"),he.UNKNOWN;switch(n){case Ur.OK:return he.OK;case Ur.CANCELLED:return he.CANCELLED;case Ur.UNKNOWN:return he.UNKNOWN;case Ur.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case Ur.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case Ur.INTERNAL:return he.INTERNAL;case Ur.UNAVAILABLE:return he.UNAVAILABLE;case Ur.UNAUTHENTICATED:return he.UNAUTHENTICATED;case Ur.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case Ur.NOT_FOUND:return he.NOT_FOUND;case Ur.ALREADY_EXISTS:return he.ALREADY_EXISTS;case Ur.PERMISSION_DENIED:return he.PERMISSION_DENIED;case Ur.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case Ur.ABORTED:return he.ABORTED;case Ur.OUT_OF_RANGE:return he.OUT_OF_RANGE;case Ur.UNIMPLEMENTED:return he.UNIMPLEMENTED;case Ur.DATA_LOSS:return he.DATA_LOSS;default:return dt()}}(He=Ur||(Ur={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";class Xu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){To(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return l_(this.inner)}size(){return this.innerSize}}class Zn{constructor(e,t){this.comparator=e,this.root=t||Ar.EMPTY}insert(e,t){return new Zn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ar.BLACK,null,null))}remove(e){return new Zn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ar.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vg(this.root,e,this.comparator,!0)}}class Vg{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ar{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:Ar.RED,this.left=null!=i?i:Ar.EMPTY,this.right=null!=u?u:Ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new Ar(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ar.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}Ar.EMPTY=null,Ar.RED=!0,Ar.BLACK=!1,Ar.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ar(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Tn{constructor(e){this.comparator=e,this.data=new Zn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new er(this.data.getIterator())}getIteratorFrom(e){return new er(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Tn(this.comparator);return t.data=e,t}}class er{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Cf(n){return n.hasNext()?n.getNext():void 0}const Dw=new Zn(qe.comparator);function Ys(){return Dw}const VC=new Zn(qe.comparator);function Ug(){return VC}function Vd(){return new Xu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Iw=new Zn(qe.comparator),Cw=new Tn(qe.comparator);function vn(...n){let e=Cw;for(const t of n)e=e.add(t);return e}const UC=new Tn(Ht);function Bg(){return UC}class iu{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Tf.createSynthesizedTargetChangeForCurrentChange(e,t)),new iu(xt.min(),r,Bg(),Ys(),vn())}}class Tf{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Tf(Zr.EMPTY_BYTE_STRING,t,vn(),vn(),vn())}}class jg{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class Tw{constructor(e,t){this.targetId=e,this.$=t}}class Af{constructor(e,t,r=Zr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class C_{constructor(){this.B=0,this.L=Sw(),this.U=Zr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=vn(),t=vn(),r=vn();return this.L.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:dt()}}),new Tf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Sw()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Aw{constructor(e){this.nt=e,this.st=new Map,this.it=Ys(),this.rt=T_(),this.ot=new Tn(Ht)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const u=i.target;if(Mg(u))if(0===r){const c=new qe(u.path);this.ct(t,c,Hn.newNoDocument(c,xt.min()))}else kt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,c)=>{const f=this.wt(c);if(f){if(u.current&&Mg(f.target)){const y=new qe(f.target.path);null!==this.it.get(y)||this.It(c,y)||this.ct(c,y,Hn.newNoDocument(y,e))}u.j&&(t.set(c,u.H()),u.J())}});let r=vn();this.rt.forEach((u,c)=>{let f=!0;c.forEachWhile(y=>{const b=this.wt(y);return!b||2===b.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.it.forEach((u,c)=>c.setReadTime(e));const i=new iu(e,t,this.ot,this.it,r);return this.it=Ys(),this.rt=T_(),this.ot=new Tn(Ht),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new C_,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Tn(Ht),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new C_),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function T_(){return new Zn(qe.comparator)}function Sw(){return new Zn(qe.comparator)}const Sf={asc:"ASCENDING",desc:"DESCENDING"},Mf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class BC{constructor(e,t){this.databaseId=e,this.N=t}}function xf(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mw(n,e){return n.N?e.toBase64():e.toUint8Array()}function xw(n,e){return xf(n,e.toTimestamp())}function Br(n){return kt(!!n),xt.fromTimestamp(function(e){const t=wa(e);return new Xn(t.seconds,t.nanos)}(n))}function $g(n,e){return(t=n,new sn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Rw(n){const e=sn.fromString(n);return kt(M_(e)),e}function Ud(n,e){return $g(n.databaseId,e.path)}function Ia(n,e){const t=Rw(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe($C(t))}function A_(n,e){return $g(n.databaseId,e)}function jC(n){const e=Rw(n);return 4===e.length?sn.emptyPath():$C(e)}function Hg(n){return new sn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $C(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function HC(n,e,t){return{name:Ud(n,e),fields:t.value.mapValue.fields}}function S_(n,e,t){const r=Ia(n,e.name),i=Br(e.updateTime),u=new ui({mapValue:{fields:e.fields}}),c=Hn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Rf(n,e){let t;if(e instanceof If)t={update:HC(n,e.key,e.value)};else if(e instanceof Fg)t={delete:Ud(n,e.key)};else if(e instanceof Ec)t={update:HC(n,e.key,e.data),updateMask:KC(e.fieldMask)};else{if(!(e instanceof Lg))return dt();t={verify:Ud(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof kd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof _c)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof vc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Fd)return{fieldPath:u.field.canonicalString(),increment:c.k};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:xw(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:dt()),t;var i}function zg(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?_r.updateTime(Br(i.updateTime)):void 0!==i.exists?_r.exists(i.exists):_r.none():_r.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let f=null;"setToServerValue"in c?(kt("REQUEST_TIME"===c.setToServerValue),f=new kd):"appendMissingElements"in c?f=new _c(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new vc(c.removeAllFromArray.values||[]):"increment"in c?f=new Fd(u,c.increment):dt();const y=yr.fromServerFormat(c.fieldPath);return new Ld(y,f)}(n,i)):[];var i;if(e.update){const i=Ia(n,e.update.name),u=new ui({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new nu((e.updateMask.fieldPaths||[]).map(b=>yr.fromServerFormat(b)));return new Ec(i,u,c,t,r)}return new If(i,u,t,r)}if(e.delete){const i=Ia(n,e.delete);return new Fg(i,t)}if(e.verify){const i=Ia(n,e.verify);return new Lg(i,t)}return dt()}function Nw(n,e){return{documents:[A_(n,e.path)]}}function Ow(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=A_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=A_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0===y.length)return;const b=y.map(A=>function(S){if("=="===S.op){if(p_(S.value))return{unaryFilter:{field:Bd(S.field),op:"IS_NAN"}};if(f_(S.value))return{unaryFilter:{field:Bd(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(p_(S.value))return{unaryFilter:{field:Bd(S.field),op:"IS_NOT_NAN"}};if(f_(S.value))return{unaryFilter:{field:Bd(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bd(S.field),op:WC(S.op),value:S.value}}}(A));return 1===b.length?b[0]:{compositeFilter:{op:"AND",filters:b}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(y){if(0!==y.length)return y.map(b=>{return{field:Bd((A=b).field),direction:Fw(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(b=e.limit,n.N||qu(b)?b:{value:b});var b,f,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function Pw(n){let e=jC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){kt(1===r);const A=t.from[0];A.allDescendants?i=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=kw(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(A=>{return new gc(xo((S=A).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(A){let S;return S="object"==typeof A?A.value:A,qu(S)?null:S}(t.limit));let y=null;var A;t.startAt&&(y=new Qu((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new Qu(A.values||[],!A.before)}(t.endAt)),ow(e,i,c,u,f,"F",y,b)}function kw(n){return n?void 0!==n.unaryFilter?[Lw(n)]:void 0!==n.fieldFilter?[qC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>kw(e)).reduce((e,t)=>e.concat(t)):dt():[]}function Fw(n){return Sf[n]}function WC(n){return Mf[n]}function Bd(n){return{fieldPath:n.canonicalString()}}function xo(n){return yr.fromServerFormat(n.fieldPath)}function qC(n){return Mn.create(xo(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Lw(n){switch(n.unaryFilter.op){case"IS_NAN":const e=xo(n.unaryFilter.field);return Mn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=xo(n.unaryFilter.field);return Mn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=xo(n.unaryFilter.field);return Mn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=xo(n.unaryFilter.field);return Mn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function KC(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function M_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Vi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Uw(e)),e=Vw(n.get(t),e);return Uw(e)}function Vw(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Uw(n){return n+"\x01\x01"}function Qs(n){const e=n.length;if(kt(e>=2),2===e)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),sn.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&dt(),n.charAt(c+1)){case"\x01":const f=n.substring(u,c);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:dt()}u=c+2}return new sn(r)}const Bw=["userId","batchId"];function Of(n,e){return[n,Vi(e)]}function x_(n,e,t){return[n,Vi(e),t]}const ZC={},YC=["prefixPath","collectionGroup","readTime","documentId"],QC=["prefixPath","collectionGroup","documentId"],R_=["collectionGroup","readTime","prefixPath","documentId"],JC=["canonicalId","targetId"],jw=["targetId","path"],XC=["path","targetId"],eT=["collectionId","parent"],tT=["indexId","uid"],nT=["uid","sequenceNumber"],rT=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iT=["indexId","uid","orderedDocumentKey"],sT=["userId","collectionPath","documentId"],oT=["userId","collectionPath","largestBatchId"],$w=["userId","collectionGroup","largestBatchId"],N_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],aT=[...N_,"documentOverlays"],Hw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Gw=[...Hw,"indexConfiguration","indexState","indexEntries"],zw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ww{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class ye{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ye((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ye?t:ye.resolve(t)}catch(t){return ye.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ye.reject(t)}static resolve(e){return new ye((t,r)=>{t(e)})}static reject(e){return new ye((t,r)=>{r(e)})}static waitFor(e){return new ye((t,r)=>{let i=0,u=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++u,c&&u===i&&t()},y=>r(y))}),c=!0,u===i&&t()})}static or(e){let t=ye.resolve(!1);for(const r of e)t=t.next(i=>i?ye.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}}class jd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Kr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new bc(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Wg(r.target.error);this.At.reject(new bc(e,i))}}static open(e,t,r,i){try{return new jd(t,e.transaction(i,r))}catch(u){throw new bc(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new uT(t)}}class Cs{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Cs.Vt((0,en.z$)())&&Vr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),su(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,en.hl)())return!1;if(Cs.St())return!0;const e=(0,en.z$)(),t=Cs.Vt(e),r=0<t&&t<10,i=Cs.Dt(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,we.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new bc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Pe(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Pe(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new bc(e,f))},u.onupgradeneeded=c=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.bt.kt(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,we.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.Nt(e);const y=jd.open(u.db,e,c?"readonly":"readwrite",r),b=i(y).next(A=>(y.Pt(),A)).catch(A=>(y.abort(A),ye.reject(A))).toPromise();return b.catch(()=>{}),yield y.Rt,b}catch(y){const b="FirebaseError"!==y.name&&f<3;if(Ue("SimpleDb","Transaction failed with error:",y.message,"Retrying:",b),u.close(),!b)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qw{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return su(this.Ft.delete())}}class bc extends Pe{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Dc(n){return"IndexedDbTransactionError"===n.name}class uT{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),su(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),su(this.store.add(e))}get(e){return su(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),su(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),su(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.Kt(i,(c,f)=>{u.push(f)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ye((u,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{u(f.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ye((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(u,c,f)=>f.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new ye((r,i)=>{t.onerror=u=>{const c=Wg(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new ye((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const y=new qw(f),b=t(f.primaryKey,f.value,y);if(b instanceof ye){const A=b.catch(S=>(y.done(),ye.reject(S)));r.push(A)}y.isDone?i():null===y.Lt?f.continue():f.continue(y.Lt)}}).next(()=>ye.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function su(n){return new ye((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Wg(r.target.error);t(i)}})}let Kw=!1;function Wg(n){const e=Cs.Vt((0,en.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Pe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kw||(Kw=!0,setTimeout(()=>{throw r},0)),r}}return n}class Zw extends Ww{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function jr(n,e){const t=Ze(n);return Cs.xt(t.Ht,e)}class O_{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&_w(u,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Pg(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Pg(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(xt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vn())}isEqual(e){return this.batchId===e.batchId&&zu(this.mutations,e.mutations,(t,r)=>I_(t,r))&&zu(this.baseMutations,e.baseMutations,(t,r)=>I_(t,r))}}class qg{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){kt(e.mutations.length===r.length);let i=Iw;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new qg(e,t,r,i)}}class Yw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class el{constructor(e,t,r,i,u=xt.min(),c=xt.min(),f=Zr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f}withSequenceNumber(e){return new el(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new el(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new el(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Pf{constructor(e){this.Jt=e}}function Ic(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ud(i=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:xf(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Cc(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:Cc(e.version)}}var i,u;return r}function tl(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Cc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $d(n){const e=new Xn(n.seconds,n.nanoseconds);return xt.fromTimestamp(e)}function Tc(n,e){const t=(e.baseMutations||[]).map(u=>zg(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>zg(n.Jt,u)),i=Xn.fromMillis(e.localWriteTimeMs);return new O_(e.batchId,i,t,r)}function kf(n){const e=$d(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?$d(n.lastLimboFreeSnapshotVersion):xt.min();let r;var i;return void 0!==n.query.documents?(kt(1===(i=n.query).documents.length),r=Is(mc(jC(i.documents[0])))):r=Is(Pw(n.query)),new el(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Zr.fromBase64String(n.resumeToken))}function Qw(n,e){const t=Cc(e.snapshotVersion),r=Cc(e.lastLimboFreeSnapshotVersion);let i;i=Mg(e.target)?Nw(n.Jt,e.target):Ow(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function P_(n){const e=Pw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?E_(e,e.limit,"L"):e}function k_(n,e){return new Yw(e.largestBatchId,zg(n.Jt,e.overlayMutation))}function F_(n,e){const t=e.path.lastSegment();return[n,Vi(e.path.popLast()),t]}class Jw{getBundleMetadata(e,t){return Kg(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:$d(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Kg(e).put({bundleId:(r=t).id,createTime:Cc(Br(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ff(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:P_(i.bundledQuery),readTime:$d(i.readTime)};var i})}saveNamedQuery(e,t){return Ff(e).put({name:(r=t).name,readTime:Cc(Br(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Kg(n){return jr(n,"bundles")}function Ff(n){return jr(n,"namedQueries")}class Ac{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new Ac(e,t.uid||"")}getOverlay(e,t){return Lf(e).get(F_(this.userId,t)).next(r=>r?k_(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const f=new Yw(t,c);i.push(this.Xt(e,f))}),ye.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Vi(c.getCollectionPath())));const u=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(Lf(e).Qt("collectionPathOverlayIndex",f))}),ye.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Vd(),u=Vi(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Lf(e).qt("collectionPathOverlayIndex",c).next(f=>{for(const y of f){const b=k_(this.M,y);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Vd();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Lf(e).Wt({index:"collectionGroupOverlayIndex",range:f},(y,b,A)=>{const S=k_(this.M,b);u.size()<i||S.largestBatchId===c?(u.set(S.getKey(),S),c=S.largestBatchId):A.done()}).next(()=>u)}Xt(e,t){return Lf(e).put(function(r,i,u){const[c,f,y]=F_(i,u.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Rf(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Lf(n){return jr(n,"documentOverlays")}class nl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Kn(e.integerValue));else if("doubleValue"in e){const r=Kn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),pf(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Wu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?QE(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):dt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),qe.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Xw(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function eb(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=Xw(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}nl.fe=new nl;class cT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=eb(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=eb(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class L_{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class dT{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Zg{constructor(){this.De=new cT,this.Ce=new L_(this.De),this.xe=new dT(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class rl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new rl(this.indexId,this.documentKey,this.arrayValue,r)}}function Sc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Mc(n.arrayValue,e.arrayValue),0!==t?t:(t=Mc(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function Mc(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class tb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=g_(e);if(void 0!==t&&!this.Be(t))return!1;const r=Zu(e);let i=0,u=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Me.length||!this.Ue(this.Me[u++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Hd{constructor(){this.qe=new nb}addToCollectionParentIndex(e,t){return this.qe.add(t),ye.resolve()}getCollectionParents(e,t){return ye.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ye.resolve()}deleteFieldIndex(e,t){return ye.resolve()}getDocumentsMatchingTarget(e,t){return ye.resolve(null)}getFieldIndex(e,t){return ye.resolve(null)}getFieldIndexes(e,t){return ye.resolve([])}getNextCollectionGroupToUpdate(e){return ye.resolve(null)}updateCollectionGroup(e,t,r){return ye.resolve()}updateIndexEntries(e,t){return ye.resolve()}}class nb{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tn(sn.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tn(sn.comparator)).toArray()}}const xc=new Uint8Array(0);class hT{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new nb,this.Ge=new Xu(r=>Yu(r),(r,i)=>rs(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Vi(i)};return fT(e).put(u)}return ye.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[bC(t),""],!1,!0);return fT(e).qt(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Qs(c.parent))}return r})}addFieldIndex(e,t){const r=V_(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var u;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=V_(e),i=Vf(e),u=Gd(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Gd(e);let i=!0;const u=new Map;return ye.forEach(this.Qe(t),c=>this.getFieldIndex(e,c).next(f=>{i&&(i=!!f),u.set(c,f)})).next(()=>{if(i){let c=vn();const f=[];return ye.forEach(u,(y,b)=>{var A;Ue("IndexedDbIndexManager",`Using index ${A=y,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(ze=>`${ze.fieldPath}:${ze.kind}`).join(",")}`} to execute ${Yu(t)}`);const S=function(ze,ot){const It=g_(ot);if(void 0===It)return null;for(const St of _f(ze,It.fieldPath))switch(St.op){case"array-contains-any":return St.value.arrayValue.values||[];case"array-contains":return[St.value]}return null}(b,y),L=function(ze,ot){const It=new Map;for(const St of Zu(ot))for(const Kt of _f(ze,St.fieldPath))switch(Kt.op){case"==":case"in":It.set(St.fieldPath.canonicalString(),Kt.value);break;case"not-in":case"!=":return It.set(St.fieldPath.canonicalString(),Kt.value),Array.from(It.values())}return null}(b,y),H=function(ze,ot){const It=[];let St=!0;for(const Kt of Zu(ot)){const hr=0===Kt.kind?Mo(ze,Kt.fieldPath,ze.startAt):Ks(ze,Kt.fieldPath,ze.startAt);if(!hr.value)return null;It.push(hr.value),St&&(St=hr.inclusive)}return new Qu(It,St)}(b,y),K=function(ze,ot){const It=[];let St=!0;for(const Kt of Zu(ot)){const hr=0===Kt.kind?Ks(ze,Kt.fieldPath,ze.endAt):Mo(ze,Kt.fieldPath,ze.endAt);if(!hr.value)return null;It.push(hr.value),St&&(St=hr.inclusive)}return new Qu(It,St)}(b,y),se=this.je(y,b,H),Ie=this.je(y,b,K),tt=this.We(y,b,L),it=this.ze(y.indexId,S,se,!!H&&H.inclusive,Ie,!!K&&K.inclusive,tt);return ye.forEach(it,ze=>r.Gt(ze,t.limit).next(ot=>{ot.forEach(It=>{const St=qe.fromSegments(It.documentKey);c.has(St)||(c=c.add(St),f.push(St))})}))}).next(()=>f)}return ye.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,i,u,c,f){const y=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),b=y/(null!=t?t.length:1),A=[];for(let S=0;S<y;++S){const L=t?this.He(t[S/b]):xc,H=r?this.Je(e,L,r[S%b],i):this.Ye(e),K=u?this.Xe(e,L,u[S%b],c):this.Ye(e+1);A.push(...this.createRange(H,K,f.map(se=>this.Je(e,L,se,!0))))}return A}Je(e,t,r,i){const u=new rl(e,qe.empty(),t,r);return i?u:u.ke()}Xe(e,t,r,i){const u=new rl(e,qe.empty(),t,r);return i?u.ke():u}Ye(e){return new rl(e,qe.empty(),xc,xc)}getFieldIndex(e,t){const r=new tb(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{const c=u.filter(f=>r.$e(f));return c.sort((f,y)=>y.fields.length-f.fields.length),c.length>0?c[0]:null})}Ze(e,t){const r=new Zg;for(const i of Zu(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.Ne(i.kind);nl.fe.Zt(u,c)}return r.Se()}He(e){const t=new Zg;return nl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Zg;return nl.fe.Zt(Ku(this.databaseId,t),r.Ne(function(i){const u=Zu(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new Zg);let u=0;for(const c of Zu(e)){const f=r[u++];for(const y of i)if(this.en(t,c.fieldPath)&&Nd(f))i=this.nn(i,c,f);else{const b=y.Ne(c.kind);nl.fe.Zt(f,b)}}return this.sn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const f of i){const y=new Zg;y.seed(f.Se()),nl.fe.Zt(c,y.Ne(t.kind)),u.push(y)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Mn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=V_(e),i=Vf(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const c=[];return ye.forEach(u,f=>i.get([f.indexId,this.uid]).next(y=>{c.push(function(b,A){const S=A?new ba(A.sequenceNumber,new Da($d(A.readTime),new qe(Qs(A.documentKey)),A.largestBatchId)):ba.empty(),L=b.fields.map(([H,K])=>new yf(yr.fromServerFormat(H),K));return new mf(b.indexId,b.collectionGroup,L,S)}(f,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Ht(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=V_(e),u=Vf(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ye.forEach(f,y=>{return u.put({indexId:y.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Cc((L=r).readTime),documentKey:Vi(L.documentKey.path),largestBatchId:L.largestBatchId});var L})))}updateIndexEntries(e,t){const r=new Map;return ye.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?ye.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ye.forEach(f,y=>this.on(e,i,y).next(b=>{const A=this.un(u,y);return b.isEqual(A)?ye.resolve():this.an(e,u,y,b,A)}))))})}cn(e,t,r,i){return Gd(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Gd(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Gd(e);let u=new Tn(Sc);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,f)=>{u=u.add(new rl(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}un(e,t){let r=new Tn(Sc);const i=this.Ze(t,e);if(null==i)return r;const u=g_(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Nd(c))for(const f of c.arrayValue.values||[])r=r.add(new rl(t.indexId,e.key,this.He(f),i))}else r=r.add(new rl(t.indexId,e.key,xc,i));return r}an(e,t,r,i,u){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,y,b,A,S){const L=f.getIterator(),H=y.getIterator();let K=Cf(L),se=Cf(H);for(;K||se;){let Ie=!1,tt=!1;if(K&&se){const it=b(K,se);it<0?tt=!0:it>0&&(Ie=!0)}else null!=K?tt=!0:Ie=!0;Ie?(A(se),se=Cf(H)):tt?(S(K),K=Cf(L)):(K=Cf(L),se=Cf(H))}}(i,u,Sc,f=>{c.push(this.cn(e,t,r,f))},f=>{c.push(this.hn(e,t,r,f))}),ye.waitFor(c)}rn(e){let t=1;return Vf(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>Sc(c,f)).filter((c,f,y)=>!f||0!==Sc(c,y[f-1]));const i=[];i.push(e);for(const c of r){const f=Sc(c,e),y=Sc(c,t);if(0===f)i[0]=e.ke();else if(f>0&&y<0)i.push(c),i.push(c.ke());else if(y>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,xc,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,xc,[]]));return u}}function fT(n){return jr(n,"collectionParents")}function Gd(n){return jr(n,"indexEntries")}function V_(n){return jr(n,"indexConfiguration")}function Vf(n){return jr(n,"indexState")}const Yg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class is{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new is(e,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function U_(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let f=0;const y=r.Wt({range:c},(A,S,L)=>(f++,L.delete()));u.push(y.next(()=>{kt(1===f)}));const b=[];for(const A of t.mutations){const S=x_(e,A.key.path,t.batchId);u.push(i.delete(S)),b.push(A.key)}return ye.waitFor(u).next(()=>b)}function Qg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}is.DEFAULT_COLLECTION_PERCENTILE=10,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,is.DEFAULT=new is(41943040,is.DEFAULT_COLLECTION_PERCENTILE,is.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),is.DISABLED=new is(-1,0,0);class B_{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){kt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new B_(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return il(e).Wt({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=zd(e),c=il(e);return c.add({}).next(f=>{kt("number"==typeof f);const y=new O_(f,t,r,i),b=function(L,H,K){const se=K.baseMutations.map(tt=>Rf(L.Jt,tt)),Ie=K.mutations.map(tt=>Rf(L.Jt,tt));return{userId:H,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:se,mutations:Ie}}(this.M,this.userId,y),A=[];let S=new Tn((L,H)=>Ht(L.canonicalString(),H.canonicalString()));for(const L of i){const H=x_(this.userId,L.key.path,f);S=S.add(L.key.path.popLast()),A.push(c.put(b)),A.push(u.put(H,ZC))}return S.forEach(L=>{A.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.ln[f]=y.keys()}),ye.waitFor(A).next(()=>y)})}lookupMutationBatch(e,t){return il(e).get(t).next(r=>r?(kt(r.userId===this.userId),Tc(this.M,r)):null)}fn(e,t){return this.ln[t]?ye.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return il(e).Wt({index:"userMutationsIndex",range:i},(c,f,y)=>{f.userId===this.userId&&(kt(f.batchId>=r),u=Tc(this.M,f)),y.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return il(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return il(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Tc(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Of(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return zd(e).Wt({range:i},(c,f,y)=>{const[b,A,S]=c,L=Qs(A);if(b===this.userId&&t.path.isEqual(L))return il(e).get(S).next(H=>{if(!H)throw dt();kt(H.userId===this.userId),u.push(Tc(this.M,H))});y.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(Ht);const i=[];return t.forEach(u=>{const c=Of(this.userId,u.path),f=IDBKeyRange.lowerBound(c),y=zd(e).Wt({range:f},(b,A,S)=>{const[L,H,K]=b,se=Qs(H);L===this.userId&&u.path.isEqual(se)?r=r.add(K):S.done()});i.push(y)}),ye.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=Of(this.userId,r),c=IDBKeyRange.lowerBound(u);let f=new Tn(Ht);return zd(e).Wt({range:c},(y,b,A)=>{const[S,L,H]=y,K=Qs(L);S===this.userId&&r.isPrefixOf(K)?K.length===i&&(f=f.add(H)):A.done()}).next(()=>this.dn(e,f))}dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(il(e).get(u).next(c=>{if(null===c)throw dt();kt(c.userId===this.userId),r.push(Tc(this.M,c))}))}),ye.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return U_(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),ye.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ye.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return zd(e).Wt({range:r},(u,c,f)=>{if(u[0]===this.userId){const y=Qs(u[1]);i.push(y)}else f.done()}).next(()=>{kt(0===i.length)})})}containsKey(e,t){return rb(e,this.userId,t)}wn(e){return ib(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rb(n,e,t){const r=Of(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return zd(n).Wt({range:u,jt:!0},(f,y,b)=>{const[A,S,L]=f;A===e&&S===i&&(c=!0),b.done()}).next(()=>c)}function il(n){return jr(n,"mutations")}function zd(n){return jr(n,"documentMutations")}function ib(n){return jr(n,"mutationQueues")}class Rc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new Rc(0)}static yn(){return new Rc(-1)}}class pT{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new Rc(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>xt.fromTimestamp(new Xn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ca(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(kt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Ca(e).Wt((c,f)=>{const y=kf(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,u.push(this.removeTargetData(e,y)))}).next(()=>ye.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Ca(e).Wt((r,i)=>{const u=kf(i);t(u)})}pn(e){return j_(e).get("targetGlobalKey").next(t=>(kt(null!==t),t))}In(e,t){return j_(e).put("targetGlobalKey",t)}Tn(e,t){return Ca(e).put(Qw(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Yu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ca(e).Wt({range:i,index:"queryTargetsIndex"},(c,f,y)=>{const b=kf(f);rs(t,b.target)&&(u=b,y.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=ou(e);return t.forEach(c=>{const f=Vi(c.path);i.push(u.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),ye.waitFor(i)}removeMatchingKeys(e,t,r){const i=ou(e);return ye.forEach(t,u=>{const c=Vi(u.path);return ye.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=ou(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ou(e);let u=vn();return i.Wt({range:r,jt:!0},(c,f,y)=>{const b=Qs(c[1]),A=new qe(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=Vi(t.path),i=IDBKeyRange.bound([r],[bC(r)],!1,!0);let u=0;return ou(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,f],y,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}Et(e,t){return Ca(e).get(t).next(r=>r?kf(r):null)}}function Ca(n){return jr(n,"targets")}function j_(n){return jr(n,"targetGlobal")}function ou(n){return jr(n,"targetDocuments")}function sl(n){return Jg.apply(this,arguments)}function Jg(){return Jg=(0,we.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==zw)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),Jg.apply(this,arguments)}function $_([n,e],[t,r]){const i=Ht(n,t);return 0===i?Ht(e,r):i}class sb{constructor(e){this.An=e,this.buffer=new Tn($_),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();$_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gT{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Ue("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,we.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Dc(i)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield sl(i)}yield t.Sn(e)}))}}class ob{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ye.resolve(ns.A);const r=new sb(t);return this.Dn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),ye.resolve(Yg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yg):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,u,c,f,y,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(b=Date.now(),ff()<=Lu.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-A}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${u} targets in `+(y-f)+`ms\n\tRemoved ${S} documents in `+(b-y)+`ms\nTotal Duration: ${b-A}ms`),ye.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:S})))}}class ab{constructor(e,t){this.db=e,this.garbageCollector=new ob(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return Xg(e,r)}removeReference(e,t,r){return Xg(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Xg(e,t)}On(e,t){return function(r,i){let u=!1;return ib(r).zt(c=>rb(r,c,i).next(f=>(f&&(u=!0),ye.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Mn(e,(c,f)=>{if(f<=t){const y=this.On(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,xt.min()),ou(e).delete([0,Vi(c.path)])))});i.push(y)}}).next(()=>ye.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Xg(e,t)}Mn(e,t){const r=ou(e);let i,u=ns.A;return r.Wt({index:"documentTargetsIndex"},([c,f],{path:y,sequenceNumber:b})=>{0===c?(u!==ns.A&&t(new qe(Qs(i)),u),u=b,i=y):u=ns.A}).next(()=>{u!==ns.A&&t(new qe(Qs(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Xg(n,e){return ou(n).put((r=n.currentSequenceNumber,{targetId:0,path:Vi(e.path),sequenceNumber:r}));var r}class ub{constructor(){this.changes=new Xu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ye.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class mT{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return au(e).put(r)}removeEntry(e,t,r){return au(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],tl(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Hn.newInvalidDocument(t);return au(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ss(t))},(i,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:Hn.newInvalidDocument(t)};return au(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ss(t))},(i,u)=>{r={document:this.$n(t,u),size:Qg(u)}}).next(()=>r)}getEntries(e,t){let r=Ys();return this.Ln(e,t,(i,u)=>{const c=this.$n(i,u);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=Ys(),i=new Zn(qe.comparator);return this.Ln(e,t,(u,c)=>{const f=this.$n(u,c);r=r.insert(u,f),i=i.insert(u,Qg(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return ye.resolve();let i=new Tn(em);t.forEach(y=>i=i.add(y));const u=IDBKeyRange.bound(ss(i.first()),ss(i.last())),c=i.getIterator();let f=c.getNext();return au(e).Wt({index:"documentKeyIndex",range:u},(y,b,A)=>{const S=qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;f&&em(f,S)<0;)r(f,null),f=c.getNext();f&&f.isEqual(S)&&(r(f,b),f=c.hasNext()?c.getNext():null),f?A.Ut(ss(f)):A.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),tl(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return au(e).qt(IDBKeyRange.bound(i,u,!0)).next(c=>{let f=Ys();for(const y of c){const b=this.$n(qe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);f=f.insert(b.key,b)}return f})}getAllFromCollectionGroup(e,t,r,i){let u=Ys();const c=cb(t,r),f=cb(t,Da.max());return au(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(y,b,A)=>{const S=this.$n(qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(S.key,S),u.size===i&&A.done()}).next(()=>u)}newChangeBuffer(e){return new Uf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return lb(e).get("remoteDocumentGlobalKey").next(t=>(kt(!!t),t))}Fn(e,t){return lb(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function lT(n,e){let t;if(e.document)t=S_(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=$d(e.noDocument.readTime);t=Hn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=qe.fromSegments(e.unknownDocument.path),i=$d(e.unknownDocument.version);t=Hn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Xn(r[0],r[1]);return xt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(xt.min()))return r}return Hn.newInvalidDocument(e)}}class Uf extends ub{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Xu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Tn((u,c)=>Ht(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const f=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,f.readTime)),c.isValidDocument()){const y=Ic(this.Kn.M,c);i=i.add(u.path.popLast()),r+=Qg(y)-f.size,t.push(this.Kn.addEntry(e,u,y))}else if(r-=f.size,this.trackRemovals){const y=Ic(this.Kn.M,c.convertToNoDocument(xt.min()));t.push(this.Kn.addEntry(e,u,y))}}),i.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),ye.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((u,c)=>{this.Gn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function lb(n){return jr(n,"remoteDocumentGlobal")}function au(n){return jr(n,"remoteDocumentsV14")}function ss(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cb(n,e){const t=e.documentKey.path.toArray();return[n,tl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function em(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Ht(t[u],r[u]),i)return i;return i=Ht(t.length,r.length),i||(i=Ht(t[t.length-2],r[r.length-2]),i||Ht(t[t.length-1],r[r.length-1]))}class Bf{constructor(e){this.M=e}kt(e,t,r,i){const u=new jd("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bw,{unique:!0}),f.createObjectStore("documentMutations"),db(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=ye.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),db(e)),c=c.next(()=>function(f){const y=f.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,y){return y.store("mutations").qt().next(b=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bw,{unique:!0});const A=y.store("mutations"),S=b.map(L=>A.put(L));return ye.waitFor(S)})}(e,u))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(u))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(u))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(u))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:sT});y.createIndex("collectionPathOverlayIndex",oT,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",$w,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:YC});y.createIndex("documentKeyIndex",QC),y.createIndex("collectionGroupIndex",R_)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:tT}).createIndex("sequenceNumberIndex",nT,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:rT}).createIndex("documentKeyIndex",iT,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=Qg(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>ye.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(f=>ye.forEach(f,y=>{kt(y.userId===u.userId);const b=Tc(this.M,y);return U_(e,u.userId,b).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Wt((c,f)=>{const y=new sn(c),b=[0,Vi(y)];u.push(t.get(b).next(A=>A?ye.resolve():t.put({targetId:0,path:Vi(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ye.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:eT});const r=t.store("collectionParents"),i=new nb,u=c=>{if(i.add(c)){const f=c.lastSegment(),y=c.popLast();return r.put({collectionId:f,parent:Vi(y)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,f)=>{const y=new sn(c);return u(y.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,f,y],b)=>{const A=Qs(f);return u(A.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const u=kf(i),c=Qw(this.M,u);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((u,c)=>{const f=t.store("remoteDocumentsV14"),y=(b=c,b.document?new qe(sn.fromString(b.document.name).popFirst(5)):b.noDocument?qe.fromSegments(b.noDocument.path):b.unknownDocument?qe.fromSegments(b.unknownDocument.path):dt()).path.toArray();var b;const A={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(A))}).next(()=>ye.waitFor(i))}}function db(n){n.createObjectStore("targetDocuments",{keyPath:jw}).createIndex("documentTargetsIndex",XC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JC,{unique:!0}),n.createObjectStore("targetGlobal")}const H_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class G_{constructor(e,t,r,i,u,c,f,y,b,A,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=c,this.document=f,this.Xn=b,this.Zn=A,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=L=>Promise.resolve(),!G_.vt())throw new Pe(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ab(this,i),this.hs=t+"main",this.M=new Pf(y),this.ls=new Cs(this.hs,this.ts,new Bf(this.M)),this.fs=new pT(this.referenceDelegate,this.M),this.ds=new mT(this.M),this._s=new Jw,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===A&&Vr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Pe(he.FAILED_PRECONDITION,H_);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ns(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,we.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Nc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Dc(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return ol(e).get("owner").next(t=>ye.resolve(this.bs(t)))}Vs(e){return Nc(e).delete(this.clientId)}vs(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=jr(r,"clientMetadata");return i.qt().next(u=>{const c=e.Ds(u,18e5),f=u.filter(y=>-1===c.indexOf(y));return ye.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?ye.resolve(!0):ol(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Pe(he.FAILED_PRECONDITION,H_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Nc(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Zw(t,ns.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Nc(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return B_.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new hT(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Ac.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=14===(c=this.ts)?Gw:13===c?Hw:12===c?aT:11===c?N_:void dt();var c;let f;return this.ls.runTransaction(e,i,u,y=>(f=new Zw(y,this.es?this.es.next():ns.A),"readwrite-primary"===t?this.Es(f).next(b=>!!b||this.As(f)).next(b=>{if(!b)throw Vr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Pe(he.FAILED_PRECONDITION,zw);return r(f)}).next(b=>this.Ps(f).next(()=>b)):this.$s(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}$s(e){return ol(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Pe(he.FAILED_PRECONDITION,H_)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ol(e).put("owner",t)}static vt(){return Cs.vt()}Rs(e){const t=ol(e);return t.get("owner").next(r=>this.bs(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ye.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Vr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,en.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Vr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Vr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ol(n){return jr(n,"owner")}function Nc(n){return jr(n,"clientMetadata")}function z_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class yT{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const u of r)u.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const u of t)u.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):Rg(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new qe(t)).next(r=>{let i=Ug();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let u=Ug();return this.indexManager.getCollectionParents(e,i).next(c=>ye.forEach(c,f=>{const y=(b=t,A=f.child(i),new Zs(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.zs(e,y,r).next(b=>{b.forEach((A,S)=>{u=u.insert(A,S)})})}).next(()=>u))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const c of u)for(const f of c.mutations){const y=f.key;let b=i.get(y);null==b&&(b=Hn.newInvalidDocument(y),i=i.insert(y,b)),Pg(f,b,c.localWriteTime),b.isFoundDocument()||(i=i.remove(y))}}).next(()=>(i.forEach((u,c)=>{b_(t,c)||(i=i.remove(u))}),i))}}class tm{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=vn(),i=vn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new tm(e,t.fromCache,r,i)}}class W_{Xs(e){this.Zs=e}Qs(e,t,r,i){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(xt.min())?this.ti(e,t):this.Zs.Ks(e,i).next(u=>{const c=this.ei(t,u);return(Ef(t)||wf(t))&&this.ni(t.limitType,c,i,r)?this.ti(e,t):(ff()<=Lu.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ng(t)),this.Zs.Qs(e,t,tw(r,-1)).next(f=>(c.forEach(y=>{f=f.insert(y.key,y)}),f)))});var u}ei(e,t){let r=new Tn(uw(e));return t.forEach((i,u)=>{b_(e,u)&&(r=r.add(u))}),r}ni(e,t,r,i){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}ti(e,t){return ff()<=Lu.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",Ng(t)),this.Zs.Qs(e,t,Da.min())}}class q_{constructor(e,t,r,i){this.persistence=e,this.si=t,this.M=i,this.ii=new Zn(Ht),this.ri=new Xu(u=>Yu(u),rs),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new yT(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function K_(n,e,t,r){return new q_(n,e,t,r)}function hb(n,e){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,we.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(u=>(i=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const c=[],f=[];let y=vn();for(const b of i){c.push(b.batchId);for(const A of b.mutations)y=y.add(A.key)}for(const b of u){f.push(b.batchId);for(const A of b.mutations)y=y.add(A.key)}return t.ci.Ks(r,y).next(b=>({hi:b,removedBatchIds:c,addedBatchIds:f}))})})}),Z_.apply(this,arguments)}function WS(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(c,f,y,b){const A=y.batch,S=A.keys();let L=ye.resolve();return S.forEach(H=>{L=L.next(()=>b.getEntry(f,H)).next(K=>{const se=y.docVersions.get(H);kt(null!==se),K.version.compareTo(se)<0&&(A.applyToRemoteDocument(K,y),K.isValidDocument()&&(K.setReadTime(y.commitVersion),b.addEntry(K)))})}),L.next(()=>c.Bs.removeMutationBatch(f,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,i))})}function nm(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Y_(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.ui.newChangeBuffer({trackRemovals:!0});i=t.ii;const f=[];e.targetChanges.forEach((b,A)=>{const S=i.get(A);if(!S)return;f.push(t.fs.removeMatchingKeys(u,b.removedDocuments,A).next(()=>t.fs.addMatchingKeys(u,b.addedDocuments,A)));let L=S.withSequenceNumber(u.currentSequenceNumber);var H,K,se;e.targetMismatches.has(A)?L=L.withResumeToken(Zr.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):b.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(b.resumeToken,r)),i=i.insert(A,L),K=L,se=b,(0===(H=S).resumeToken.approximateByteSize()||K.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=3e8||se.addedDocuments.size+se.modifiedDocuments.size+se.removedDocuments.size>0)&&f.push(t.fs.updateTargetData(u,L))});let y=Ys();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,b))}),f.push(Q_(u,c,e.documentUpdates).next(b=>{y=b})),!r.isEqual(xt.min())){const b=t.fs.getLastRemoteSnapshotVersion(u).next(A=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(b)}return ye.waitFor(f).next(()=>c.apply(u)).next(()=>t.ci.Gs(u,y)).next(()=>y)}).then(u=>(t.ii=i,u))}function Q_(n,e,t){let r=vn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let u=Ys();return t.forEach((c,f)=>{const y=i.get(c);f.isNoDocument()&&f.version.isEqual(xt.min())?(e.removeEntry(c,f.readTime),u=u.insert(c,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(f),u=u.insert(c,f)):Ue("LocalStore","Ignoring outdated watch update for ",c,". Current version:",y.version," Watch version:",f.version)}),u})}function J_(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function al(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(u=>u?(i=u,ye.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new el(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ii.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Wd(n,e,t){return X_.apply(this,arguments)}function X_(){return X_=(0,we.Z)(function*(n,e,t){const r=Ze(n),i=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Dc(c))throw c;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ii=r.ii.remove(e),r.ri.delete(i.target)}),X_.apply(this,arguments)}function rm(n,e,t){const r=Ze(n);let i=xt.min(),u=vn();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,y,b){const A=Ze(f),S=A.ri.get(b);return void 0!==S?ye.resolve(A.ii.get(S)):A.fs.getTargetData(y,b)}(r,c,Is(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,f.targetId).next(y=>{u=y})}).next(()=>r.si.Qs(c,e,t?i:xt.min(),t?u:vn())).next(f=>(im(r,aw(e),f),{documents:f,li:u})))}function fb(n,e){const t=Ze(n),r=Ze(t.fs),i=t.ii.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(c=>c?c.target:null))}function ev(n,e){const t=Ze(n),r=t.oi.get(e)||xt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.ui.getAllFromCollectionGroup(i,e,tw(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(im(t,e,i),i))}function im(n,e,t){let r=xt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function tv(){return tv=(0,we.Z)(function*(n,e,t,r){const i=Ze(n);let u=vn(),c=Ys();for(const b of t){const A=e.fi(b.metadata.name);b.document&&(u=u.add(A));const S=e.di(b);S.setReadTime(e._i(b.metadata.readTime)),c=c.insert(A,S)}const f=i.ui.newChangeBuffer({trackRemovals:!0}),y=yield al(i,(b=r,Is(mc(sn.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>Q_(b,f,c).next(A=>(f.apply(b),A)).next(A=>i.fs.removeMatchingKeysForTargetId(b,y.targetId).next(()=>i.fs.addMatchingKeys(b,u,y.targetId)).next(()=>i.ci.Gs(b,A)).next(()=>A)))}),tv.apply(this,arguments)}function gb(n,e){return sm.apply(this,arguments)}function sm(){return sm=(0,we.Z)(function*(n,e,t=vn()){const r=yield al(n,Is(P_(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Br(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(u,e);const f=r.withResumeToken(Zr.EMPTY_BYTE_STRING,c);return i.ii=i.ii.insert(f.targetId,f),i.fs.updateTargetData(u,f).next(()=>i.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.fs.addMatchingKeys(u,t,r.targetId)).next(()=>i._s.saveNamedQuery(u,e))})}),sm.apply(this,arguments)}class _T{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return ye.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Br(r.createTime)}),ye.resolve()}getNamedQuery(e,t){return ye.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:P_(r.bundledQuery),readTime:Br(r.readTime)}),ye.resolve();var r}}class mb{constructor(){this.overlays=new Zn(qe.comparator),this.gi=new Map}getOverlay(e,t){return ye.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.Xt(e,t,u)}),ye.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.gi.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),ye.resolve()}getOverlaysForCollection(e,t,r){const i=Vd(),u=t.length+1,c=new qe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const y=f.getNext().value,b=y.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&y.largestBatchId>r&&i.set(y.getKey(),y)}return ye.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new Zn((b,A)=>b-A);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=Vd(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const f=Vd(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((b,A)=>f.set(b,A)),!(f.size()>=i)););return ye.resolve(f)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Yw(t,r));let u=this.gi.get(t);void 0===u&&(u=vn(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class om{constructor(){this.yi=new Tn(Yr.pi),this.Ii=new Tn(Yr.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new Yr(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new Yr(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new qe(new sn([])),r=new Yr(t,e),i=new Yr(t,e+1),u=[];return this.Ii.forEachInRange([r,i],c=>{this.Ai(c),u.push(c.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new qe(new sn([])),r=new Yr(t,e),i=new Yr(t,e+1);let u=vn();return this.Ii.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Yr(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Yr{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return qe.comparator(e.key,t.key)||Ht(e.vi,t.vi)}static Ti(e,t){return Ht(e.vi,t.vi)||qe.comparator(e.key,t.key)}}class yb{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Tn(Yr.pi)}checkEmpty(e){return ye.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const u=this.Si;this.Si++;const c=new O_(u,t,r,i);this.Bs.push(c);for(const f of i)this.Di=this.Di.add(new Yr(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ye.resolve(c)}lookupMutationBatch(e,t){return ye.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.xi(t+1),u=i<0?0:i;return ye.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return ye.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return ye.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Yr(t,0),i=new Yr(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,i],c=>{const f=this.Ci(c.vi);u.push(f)}),ye.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tn(Ht);return t.forEach(i=>{const u=new Yr(i,0),c=new Yr(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,c],f=>{r=r.add(f.vi)})}),ye.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;qe.isDocumentKey(u)||(u=u.child(""));const c=new Yr(new qe(u),0);let f=new Tn(Ht);return this.Di.forEachWhile(y=>{const b=y.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(f=f.add(y.vi)),!0)},c),ye.resolve(this.Ni(f))}Ni(e){const t=[];return e.forEach(r=>{const i=this.Ci(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){kt(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return ye.forEach(t.mutations,i=>{const u=new Yr(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new Yr(t,0),i=this.Di.firstAfterOrEqual(r);return ye.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ye.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class vT{constructor(e){this.Mi=e,this.docs=new Zn(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ye.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=Ys();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Hn.newInvalidDocument(i))}),ye.resolve(r)}getAllFromCollection(e,t,r){let i=Ys();const u=new qe(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:y}}=c.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||SC(AC(y),r)<=0||(i=i.insert(y.key,y.mutableCopy()))}return ye.resolve(i)}getAllFromCollectionGroup(e,t,r,i){dt()}Oi(e,t){return ye.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ui(this)}getSize(e){return ye.resolve(this.size)}}class Ui extends ub{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),ye.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class qd{constructor(e){this.persistence=e,this.Fi=new Xu(t=>Yu(t),rs),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new om,this.targetCount=0,this.Li=Rc.gn()}forEachTarget(e,t){return this.Fi.forEach((r,i)=>t(i)),ye.resolve()}getLastRemoteSnapshotVersion(e){return ye.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ye.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),ye.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),ye.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new Rc(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,ye.resolve()}updateTargetData(e,t){return this.Tn(t),ye.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,ye.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Fi.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Fi.delete(c),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ye.waitFor(u).next(()=>i)}getTargetCount(e){return ye.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return ye.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),ye.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),ye.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),ye.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return ye.resolve(r)}containsKey(e,t){return ye.resolve(this.Bi.containsKey(t))}}class ET{constructor(e,t){this.Ui={},this.overlays={},this.es=new ns(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new qd(this),this.indexManager=new Hd,this.ds=new vT(r=>this.referenceDelegate.qi(r)),this.M=new Pf(t),this._s=new _T(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new yb(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new wT(this.es.next());return this.referenceDelegate.Ki(),r(i).next(u=>this.referenceDelegate.Gi(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Qi(e,t){return ye.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class wT extends Ww{constructor(e){super(),this.currentSequenceNumber=e}}class _b{constructor(e){this.persistence=e,this.ji=new om,this.Wi=null}static zi(e){return new _b(e)}get Hi(){if(this.Wi)return this.Wi;throw dt()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),ye.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),ye.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),ye.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ye.forEach(this.Hi,r=>{const i=qe.fromPath(r);return this.Ji(e,i).next(u=>{u||t.removeEntry(i,xt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return ye.or([()=>ye.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function Kd(n,e){return`firestore_clients_${n}_${e}`}function vb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function jf(n,e){return`firestore_targets_${n}_${e}`}class am{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Yi(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Pe(i.error.code,i.error.message))),c?new am(e,t,i.state,u):(Vr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Pe(r.error.code,r.error.message))),u?new Zd(e,r.state,i):(Vr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class um{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Bg();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=d_(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new um(e,u):(Vr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class nv{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new nv(t.clientId,t.onlineState):(Vr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class $f{constructor(){this.activeTargetIds=Bg()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lm{constructor(e,t,r,i,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Zn(Ht),this.started=!1,this.rr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=Kd(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new $f),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.er)continue;const u=e.getItem(Kd(e.persistenceKey,i));if(u){const c=um.Yi(i,u);c&&(e.ir=e.ir.insert(c.clientId,c))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const i=e.mr(r);i&&e.gr(i)}for(const i of e.rr)e.sr(i);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(jf(this.persistenceKey,e));if(r){const i=Zd.Yi(e,r);i&&(t=i.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jf(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ir(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Vr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Pr(r.key);return t.br(i,null)}{const i=t.Vr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Sr(i)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(r.key===t.dr){if(null!==r.newValue){const i=t.mr(r.newValue);if(i)return t.gr(i)}}else if(r.key===t.ar){const i=function(u){let c=ns.A;if(null!=u)try{const f=JSON.parse(u);kt("number"==typeof f),c=f}catch(f){Vr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==ns.A&&t.sequenceNumberHandler(i)}else if(r.key===t._r){const i=t.Nr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const i=new am(this.currentUser,e,t,r),u=vb(this.persistenceKey,this.currentUser,e);this.setItem(u,i.Xi())}Ir(e){const t=vb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const i=jf(this.persistenceKey,e),u=new Zd(e,t,r);this.setItem(i,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return um.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return am.Yi(new vi(void 0!==r[2]?r[2]:null),i,t)}Dr(e,t){const r=this.lr.exec(e),i=Number(r[1]);return Zd.Yi(i,t)}mr(e){return nv.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),u=this.yr(r),c=[],f=[];return u.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{u.has(y)||f.push(y)}),this.syncEngine.Fr(c,f).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=Bg();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class rv{constructor(){this.$r=new $f,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new $f,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cm{Lr(e){}shutdown(){}}class dm{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const qS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Eb{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class bT extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,i,u){const c=this.uo(e,t);Ue("RestConnection","Sending: ",c,r);const f={};return this.ao(f,i,u),this.co(e,c,f,r).then(y=>(Ue("RestConnection","Received: ",y),y),y=>{throw Eg("RestConnection",`${e} failed with error: `,y,"url: ",c,"request:",r),y})}ho(e,t,r,i,u){return this.oo(e,t,r,i,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Md,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}uo(e,t){return`${this.io}/v1/${t}:${qS[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((u,c)=>{const f=new pC;f.listenOnce(dC.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case vg.NO_ERROR:const b=f.getResponseJson();Ue("Connection","XHR received:",JSON.stringify(b)),u(b);break;case vg.TIMEOUT:Ue("Connection",'RPC "'+e+'" timed out'),c(new Pe(he.DEADLINE_EXCEEDED,"Request time out"));break;case vg.HTTP_ERROR:const A=f.getStatus();if(Ue("Connection",'RPC "'+e+'" failed with status:',A,"response text:",f.getResponseText()),A>0){const S=f.getResponseJson().error;if(S&&S.status&&S.message){const L=function(H){const K=H.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(K)>=0?K:he.UNKNOWN}(S.status);c(new Pe(L,S.message))}else c(new Pe(he.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Pe(he.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Ue("Connection",'RPC "'+e+'" completed.')}});const y=JSON.stringify(i);f.send(t,"POST",y,r,15)})}lo(e,t,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=lC(),c=cC(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new fC({})),this.ao(f.initMessageHeaders,t,r),(0,en.uI)()||(0,en.b$)()||(0,en.d)()||(0,en.w1)()||(0,en.Mn)()||(0,en.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const y=i.join("");Ue("Connection","Creating WebChannel: "+y,f);const b=u.createWebChannel(y,f);let A=!1,S=!1;const L=new Eb({Wr:K=>{S?Ue("Connection","Not sending because WebChannel is closed:",K):(A||(Ue("Connection","Opening WebChannel transport."),b.open(),A=!0),Ue("Connection","WebChannel sending:",K),b.send(K))},zr:()=>b.close()}),H=(K,se,Ie)=>{K.listen(se,tt=>{try{Ie(tt)}catch(it){setTimeout(()=>{throw it},0)}})};return H(b,hf.EventType.OPEN,()=>{S||Ue("Connection","WebChannel transport opened.")}),H(b,hf.EventType.CLOSE,()=>{S||(S=!0,Ue("Connection","WebChannel transport closed"),L.no())}),H(b,hf.EventType.ERROR,K=>{S||(S=!0,Eg("Connection","WebChannel transport errored:",K),L.no(new Pe(he.UNAVAILABLE,"The operation could not be completed")))}),H(b,hf.EventType.MESSAGE,K=>{var se;if(!S){const Ie=K.data[0];kt(!!Ie);const tt=Ie,it=tt.error||(null===(se=tt[0])||void 0===se?void 0:se.error);if(it){Ue("Connection","WebChannel received error:",it);const ze=it.status;let ot=function(St){const Kt=Ur[St];if(void 0!==Kt)return bw(Kt)}(ze),It=it.message;void 0===ot&&(ot=he.INTERNAL,It="Unknown error status: "+ze+" with message "+it.message),S=!0,L.no(new Pe(ot,It)),b.close()}else Ue("Connection","WebChannel received:",Ie),L.so(Ie)}}),H(c,hC.STAT_EVENT,K=>{K.stat===s_.PROXY?Ue("Connection","Detected buffering proxy"):K.stat===s_.NOPROXY&&Ue("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.eo()},0),L}}function iv(){return"undefined"!=typeof window?window:null}function Oc(){return"undefined"!=typeof document?document:null}function Yd(n){return new BC(n,!0)}class sv{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=i,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,t-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class hm{constructor(e,t,r,i,u,c,f,y){this.Yn=e,this.Ro=r,this.Po=i,this.bo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new sv(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,we.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,we.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Vr(t.toString()),Vr("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===t&&this.qo(r,i)},r=>{e(()=>{const i=new Pe(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){var e=this;this.state=5,this.Do.To((0,we.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ov extends hm{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function GC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:dt(),i=e.targetChange.targetIds||[],u=function(y,b){return y.N?(kt(void 0===b||"string"==typeof b),Zr.fromBase64String(b||"")):(kt(void 0===b||b instanceof Uint8Array),Zr.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const b=void 0===y.code?he.UNKNOWN:bw(y.code);return new Pe(b,y.message||"")}(c);t=new Af(r,i,u,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ia(n,r.document.name),u=Br(r.document.updateTime),c=new ui({mapValue:{fields:r.document.fields}}),f=Hn.newFoundDocument(i,u,c);t=new jg(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Ia(n,r.document),u=r.readTime?Br(r.readTime):xt.min(),c=Hn.newNoDocument(i,u);t=new jg([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ia(n,r.document);t=new jg([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return dt();{const r=e.filter,u=new Ew(r.count||0);t=new Tw(r.targetId,u)}}var y;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return xt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?xt.min():u.readTime?Br(u.readTime):xt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=Hg(this.M),t.addTarget=function(i,u){let c;const f=u.target;return c=Mg(f)?{documents:Nw(i,f)}:{query:Ow(i,f)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=Mw(i,u.resumeToken):u.snapshotVersion.compareTo(xt.min())>0&&(c.readTime=xf(i,u.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function zC(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=Hg(this.M),t.removeTarget=e,this.Fo(t)}}class KS extends hm{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function Nf(n,e){return n&&n.length>0?(kt(void 0!==e),n.map(t=>function(r,i){let u=Br(r.updateTime?r.updateTime:i);return u.isEqual(xt.min())&&(u=Br(i)),new yw(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Br(e.commitTime);return this.listener.Yo(r,t)}return kt(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=Hg(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Rf(this.M,r))};this.Fo(t)}}class DT extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new Pe(he.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.oo(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(he.UNKNOWN,i.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.bo.ho(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Pe(he.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class IT{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Vr(t),this.iu=!1):Ue("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class wb{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(f=>{r.enqueueAndForget((0,we.Z)(function*(){var y;uu(c)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,we.Z)(function*(b){const A=Ze(b);A.fu.add(4),yield Pc(A),A.wu.set("Unknown"),A.fu.delete(4),yield Qd(A)}),function(b){return y.apply(this,arguments)})(c))}))}),this.wu=new IT(r,i)}}function Qd(n){return av.apply(this,arguments)}function av(){return av=(0,we.Z)(function*(n){if(uu(n))for(const e of n.du)yield e(!0)}),av.apply(this,arguments)}function Pc(n){return fm.apply(this,arguments)}function fm(){return fm=(0,we.Z)(function*(n){for(const e of n.du)yield e(!1)}),fm.apply(this,arguments)}function pm(n,e){const t=Ze(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),ym(t)?mm(t):Jd(t).xo()&&gm(t,e))}function Hf(n,e){const t=Ze(n),r=Jd(t);t.lu.delete(e),r.xo()&&bb(t,e),0===t.lu.size&&(r.xo()?r.Mo():uu(t)&&t.wu.set("Unknown"))}function gm(n,e){n.mu.Z(e.targetId),Jd(n).jo(e)}function bb(n,e){n.mu.Z(e),Jd(n).Wo(e)}function mm(n){n.mu=new Aw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Jd(n).start(),n.wu.ru()}function ym(n){return uu(n)&&!Jd(n).Co()&&n.lu.size>0}function uu(n){return 0===Ze(n).fu.size}function uv(n){n.mu=void 0}function CT(n){return lv.apply(this,arguments)}function lv(){return lv=(0,we.Z)(function*(n){n.lu.forEach((e,t)=>{gm(n,e)})}),lv.apply(this,arguments)}function ZS(n,e){return _m.apply(this,arguments)}function _m(){return _m=(0,we.Z)(function*(n,e){uv(n),ym(n)?(n.wu.au(e),mm(n)):n.wu.set("Unknown")}),_m.apply(this,arguments)}function YS(n,e,t){return Db.apply(this,arguments)}function Db(){return Db=(0,we.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof Af&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(i,u){const c=u.cause;for(const f of u.targetIds)i.lu.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.lu.delete(f),i.mu.removeTarget(f))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield cv(n,r)}else if(e instanceof jg?n.mu.ut(e):e instanceof Tw?n.mu._t(e):n.mu.ht(e),!t.isEqual(xt.min()))try{const r=yield nm(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.mu.yt(u);return c.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const b=i.lu.get(y);b&&i.lu.set(y,b.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach(f=>{const y=i.lu.get(f);if(!y)return;i.lu.set(f,y.withResumeToken(Zr.EMPTY_BYTE_STRING,y.snapshotVersion)),bb(i,f);const b=new el(y.target,f,1,y.sequenceNumber);gm(i,b)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield cv(n,r)}var r}),Db.apply(this,arguments)}function cv(n,e,t){return Ib.apply(this,arguments)}function Ib(){return Ib=(0,we.Z)(function*(n,e,t){if(!Dc(e))throw e;n.fu.add(1),yield Pc(n),n.wu.set("Offline"),t||(t=()=>nm(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield Qd(n)}))}),Ib.apply(this,arguments)}function TT(n,e){return e().catch(t=>cv(n,t,e))}function Gf(n){return Cb.apply(this,arguments)}function Cb(){return Cb=(0,we.Z)(function*(n){const e=Ze(n),t=kc(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;QS(e);)try{const i=yield J_(e.localStore,r);if(null===i){0===e.hu.length&&t.Mo();break}r=i.batchId,vm(e,i)}catch(i){yield cv(e,i)}AT(e)&&dv(e)}),Cb.apply(this,arguments)}function QS(n){return uu(n)&&n.hu.length<10}function vm(n,e){n.hu.push(e);const t=kc(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function AT(n){return uu(n)&&!kc(n).Co()&&n.hu.length>0}function dv(n){kc(n).start()}function hv(n){return Em.apply(this,arguments)}function Em(){return Em=(0,we.Z)(function*(n){kc(n).Zo()}),Em.apply(this,arguments)}function Tb(n){return Ab.apply(this,arguments)}function Ab(){return Ab=(0,we.Z)(function*(n){const e=kc(n);for(const t of n.hu)e.Jo(t.mutations)}),Ab.apply(this,arguments)}function fv(n,e,t){return wm.apply(this,arguments)}function wm(){return wm=(0,we.Z)(function*(n,e,t){const r=n.hu.shift(),i=qg.from(r,e,t);yield TT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Gf(n)}),wm.apply(this,arguments)}function Sb(n,e){return bm.apply(this,arguments)}function bm(){return bm=(0,we.Z)(function*(n,e){var t;e&&kc(n).Ho&&(yield(t=(0,we.Z)(function*(r,i){if(ww(u=i.code)&&u!==he.ABORTED){const c=r.hu.shift();kc(r).ko(),yield TT(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Gf(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),AT(n)&&dv(n)}),bm.apply(this,arguments)}function ST(n,e){return Dm.apply(this,arguments)}function Dm(){return Dm=(0,we.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=uu(t);t.fu.add(3),yield Pc(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Qd(t)}),Dm.apply(this,arguments)}function pv(n,e){return zf.apply(this,arguments)}function zf(){return zf=(0,we.Z)(function*(n,e){const t=Ze(n);e?(t.fu.delete(2),yield Qd(t)):e||(t.fu.add(2),yield Pc(t),t.wu.set("Unknown"))}),zf.apply(this,arguments)}function Jd(n){return n.gu||(n.gu=function(e,t,r){const i=Ze(e);return i.eu(),new ov(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:CT.bind(null,n),Yr:ZS.bind(null,n),Qo:YS.bind(null,n)}),n.du.push(function(){var e=(0,we.Z)(function*(t){t?(n.gu.ko(),ym(n)?mm(n):n.wu.set("Unknown")):(yield n.gu.stop(),uv(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function kc(n){return n.yu||(n.yu=function(e,t,r){const i=Ze(e);return i.eu(),new KS(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:hv.bind(null,n),Yr:Sb.bind(null,n),Xo:Tb.bind(null,n),Yo:fv.bind(null,n)}),n.du.push(function(){var e=(0,we.Z)(function*(t){t?(n.yu.ko(),yield Gf(n)):(yield n.yu.stop(),n.hu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class Mb{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,f=new Mb(e,t,c,i,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wf(n,e){if(Vr("AsyncQueue",`${e}: ${n}`),Dc(n))return new Pe(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Xd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=Ug(),this.sortedSet=new Zn(this.comparator)}static emptySet(e){return new Xd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Xd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class xb{constructor(){this.pu=new Zn(qe.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):dt():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class eh{constructor(e,t,r,i,u,c,f,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=y}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new eh(e,t,Xd.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class JS{constructor(){this.Tu=void 0,this.listeners=[]}}class MT{constructor(){this.queries=new Xu(e=>w_(e),Pd),this.onlineState="Unknown",this.Eu=new Set}}function qf(n,e){return gv.apply(this,arguments)}function gv(){return gv=(0,we.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new JS),i)try{u.Tu=yield t.onListen(r)}catch(c){const f=Wf(c,`Initialization of query '${Ng(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&_v(t)}),gv.apply(this,arguments)}function Ts(n,e){return mv.apply(this,arguments)}function mv(){return mv=(0,we.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),mv.apply(this,arguments)}function yv(n,e){const t=Ze(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.Ru(i)&&(r=!0);c.Tu=i}}r&&_v(t)}function xT(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function _v(n){n.Eu.forEach(e=>{e.next()})}class Kf{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new eh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=eh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class Rb{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class vv{constructor(e){this.M=e}fi(e){return Ia(this.M,e)}di(e){return e.metadata.exists?S_(this.M,e.document,!1):Hn.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Br(e)}}class RT{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ev(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=sn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new vv(this.M);for(const i of e)if(i.metadata.queries){const u=r.fi(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||vn()).add(u);t.set(c,f)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function pb(n,e,t,r){return tv.apply(this,arguments)}(e.localStore,new vv(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const i of e.queries)yield gb(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function Ev(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class wv{constructor(e){this.key=e}}class Nb{constructor(e){this.key=e}}class Ob{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=vn(),this.mutatedKeys=vn(),this.Uu=uw(e),this.qu=new Xd(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new xb,i=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const y=Ef(this.query)&&i.size===this.query.limit?i.last():null,b=wf(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((A,S)=>{const L=i.get(A),H=b_(this.query,S)?S:null,K=!!L&&this.mutatedKeys.has(L.key),se=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let Ie=!1;L&&H?L.data.isEqual(H.data)?K!==se&&(r.track({type:3,doc:H}),Ie=!0):this.ju(L,H)||(r.track({type:2,doc:H}),Ie=!0,(y&&this.Uu(H,y)>0||b&&this.Uu(H,b)<0)&&(f=!0)):!L&&H?(r.track({type:0,doc:H}),Ie=!0):L&&!H&&(r.track({type:1,doc:L}),Ie=!0,(y||b)&&(f=!0)),Ie&&(H?(c=c.add(H),u=se?u.add(A):u.delete(A)):(c=c.delete(A),u=u.delete(A)))}),Ef(this.query)||wf(this.query))for(;c.size>this.query.limit;){const A=Ef(this.query)?c.last():c.first();c=c.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{qu:c,Qu:r,ni:f,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((b,A)=>function(S,L){const H=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return H(S)-H(L)}(b.type,A.type)||this.Uu(b.doc,A.doc)),this.Wu(r);const c=t?this.zu():[],f=0===this.Lu.size&&this.current?1:0,y=f!==this.Bu;return this.Bu=f,0!==u.length||y?{snapshot:new eh(this.query,e.qu,i,u,e.mutatedKeys,0===f,y,!1),Hu:c}:{Hu:c}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new xb,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=vn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new Nb(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new wv(r))}),t}Yu(e){this.$u=e.li,this.Lu=vn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return eh.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class bv{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Ro{constructor(e){this.key=e,this.Zu=!1}}class NT{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.ta={},this.ea=new Xu(f=>w_(f),Pd),this.na=new Map,this.sa=new Set,this.ia=new Zn(qe.comparator),this.ra=new Map,this.oa=new om,this.ua={},this.aa=new Map,this.ca=Rc.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function XS(n,e){return Dv.apply(this,arguments)}function Dv(){return Dv=(0,we.Z)(function*(n,e){const t=$b(n);let r,i;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.Xu();else{const c=yield al(t.localStore,Is(e));t.isPrimaryClient&&pm(t.remoteStore,c);const f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield Im(t,e,r,"current"===f)}return i}),Dv.apply(this,arguments)}function Im(n,e,t,r){return Iv.apply(this,arguments)}function Iv(){return Iv=(0,we.Z)(function*(n,e,t,r){n.la=(A,S,L)=>{return(H=(0,we.Z)(function*(K,se,Ie,tt){let it=se.view.Gu(Ie);it.ni&&(it=yield rm(K.localStore,se.query,!1).then(({documents:It})=>se.view.Gu(It,it)));const ze=tt&&tt.targetChanges.get(se.targetId),ot=se.view.applyChanges(it,K.isPrimaryClient,ze);return Mm(K,se.targetId,ot.Hu),ot.snapshot}),function(K,se,Ie,tt){return H.apply(this,arguments)})(n,A,S,L);var H};const i=yield rm(n.localStore,e,!0),u=new Ob(e,i.li),c=u.Gu(i.documents),f=Tf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),y=u.applyChanges(c,n.isPrimaryClient,f);Mm(n,t,y.Hu);const b=new bv(e,t,u);return n.ea.set(e,b),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),y.snapshot}),Iv.apply(this,arguments)}function OT(n,e){return Cm.apply(this,arguments)}function Cm(){return Cm=(0,we.Z)(function*(n,e){const t=Ze(n),r=t.ea.get(e),i=t.na.get(r.targetId);if(i.length>1)return t.na.set(r.targetId,i.filter(u=>!Pd(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Hf(t.remoteStore,r.targetId),Yf(t,r.targetId)}).catch(sl))):(Yf(t,r.targetId),yield Wd(t.localStore,r.targetId,!0))}),Cm.apply(this,arguments)}function Pb(){return Pb=(0,we.Z)(function*(n,e,t){const r=Hb(n);try{const i=yield function(u,c){const f=Ze(u),y=Xn.now(),b=c.reduce((S,L)=>S.add(L.key),vn());let A;return f.persistence.runTransaction("Locally write mutations","readwrite",S=>f.ci.Ks(S,b).next(L=>{A=L;const H=[];for(const K of c){const se=vw(K,A.get(K.key));null!=se&&H.push(new Ec(K.key,se,ew(se.value.mapValue),_r.exists(!0)))}return f.Bs.addMutationBatch(S,y,H,c)})).then(S=>(S.applyToLocalDocumentSet(A),{batchId:S.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,f){let y=u.ua[u.currentUser.toKey()];y||(y=new Zn(Ht)),y=y.insert(c,f),u.ua[u.currentUser.toKey()]=y}(r,i.batchId,t),yield lu(r,i.changes),yield Gf(r.remoteStore)}catch(i){const u=Wf(i,"Failed to persist write");t.reject(u)}}),Pb.apply(this,arguments)}function Cv(n,e){return Tm.apply(this,arguments)}function Tm(){return Tm=(0,we.Z)(function*(n,e){const t=Ze(n);try{const r=yield Y_(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.ra.get(u);c&&(kt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Zu=!0:i.modifiedDocuments.size>0?kt(c.Zu):i.removedDocuments.size>0&&(kt(c.Zu),c.Zu=!1))}),yield lu(t,r,e)}catch(r){yield sl(r)}}),Tm.apply(this,arguments)}function kb(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ea.forEach((u,c)=>{const f=c.view.Au(e);f.snapshot&&i.push(f.snapshot)}),function(u,c){const f=Ze(u);f.onlineState=c;let y=!1;f.queries.forEach((b,A)=>{for(const S of A.listeners)S.Au(c)&&(y=!0)}),y&&_v(f)}(r.eventManager,e),i.length&&r.ta.Qo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kT(n,e,t){return Am.apply(this,arguments)}function Am(){return Am=(0,we.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ra.get(e),u=i&&i.key;if(u){let c=new Zn(qe.comparator);c=c.insert(u,Hn.newNoDocument(u,xt.min()));const f=vn().add(u),y=new iu(xt.min(),new Map,new Tn(Ht),c,f);yield Cv(r,y),r.ia=r.ia.remove(u),r.ra.delete(e),xv(r)}else yield Wd(r.localStore,e,!1).then(()=>Yf(r,e,t)).catch(sl)}),Am.apply(this,arguments)}function Tv(n,e){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,we.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield WS(t.localStore,e);Mv(t,r,null),Sv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield lu(t,i)}catch(i){yield sl(i)}}),Zf.apply(this,arguments)}function Fb(n,e,t){return Av.apply(this,arguments)}function Av(){return Av=(0,we.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(u,c){const f=Ze(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let b;return f.Bs.lookupMutationBatch(y,c).next(A=>(kt(null!==A),b=A.keys(),f.Bs.removeMutationBatch(y,A))).next(()=>f.Bs.performConsistencyCheck(y)).next(()=>f.ci.Ks(y,b))})}(r.localStore,e);Mv(r,e,t),Sv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield lu(r,i)}catch(i){yield sl(i)}}),Av.apply(this,arguments)}function Sm(){return Sm=(0,we.Z)(function*(n,e){const t=Ze(n);uu(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ze(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.Bs.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.aa.get(r)||[];i.push(e),t.aa.set(r,i)}catch(r){const i=Wf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Sm.apply(this,arguments)}function Sv(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function Mv(n,e,t){const r=Ze(n);let i=r.ua[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ua[r.currentUser.toKey()]=i}}function Yf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||FT(n,r)})}function FT(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(Hf(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),xv(n))}function Mm(n,e,t){for(const r of t)r instanceof wv?(n.oa.addReference(r.key,e),LT(n,r)):r instanceof Nb?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||FT(n,r.key)):dt()}function LT(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.sa.add(r),xv(n))}function xv(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new qe(sn.fromString(e)),r=n.ca.next();n.ra.set(r,new Ro(t)),n.ia=n.ia.insert(t,r),pm(n.remoteStore,new el(Is(mc(t.path)),r,2,ns.A))}}function lu(n,e,t){return Vb.apply(this,arguments)}function Vb(){return Vb=(0,we.Z)(function*(n,e,t){const r=Ze(n),i=[],u=[],c=[];var f;r.ea.isEmpty()||(r.ea.forEach((f,y)=>{c.push(r.la(y,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,b.fromCache?"not-current":"current"),i.push(b);const A=tm.Ys(y.targetId,b);u.push(A)}}))}),yield Promise.all(c),r.ta.Qo(i),yield(f=(0,we.Z)(function*(y,b){const A=Ze(y);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ye.forEach(b,L=>ye.forEach(L.Hs,H=>A.persistence.referenceDelegate.addReference(S,L.targetId,H)).next(()=>ye.forEach(L.Js,H=>A.persistence.referenceDelegate.removeReference(S,L.targetId,H)))))}catch(S){if(!Dc(S))throw S;Ue("LocalStore","Failed to update sequence numbers: "+S)}for(const S of b){const L=S.targetId;if(!S.fromCache){const H=A.ii.get(L),se=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);A.ii=A.ii.insert(L,se)}}}),function(y,b){return f.apply(this,arguments)})(r.localStore,u))}),Vb.apply(this,arguments)}function eM(n,e){return Ub.apply(this,arguments)}function Ub(){return Ub=(0,we.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield hb(t.localStore,e);t.currentUser=e,(i=t).aa.forEach(c=>{c.forEach(f=>{f.reject(new Pe(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield lu(t,r.hi)}var i}),Ub.apply(this,arguments)}function tM(n,e){const t=Ze(n),r=t.ra.get(e);if(r&&r.Zu)return vn().add(r.key);{let i=vn();const u=t.na.get(e);if(!u)return i;for(const c of u){const f=t.ea.get(c);i=i.unionWith(f.view.Ku)}return i}}function nM(n,e){return Rv.apply(this,arguments)}function Rv(){return Rv=(0,we.Z)(function*(n,e){const t=Ze(n),r=yield rm(t.localStore,e.query,!0),i=e.view.Yu(r);return t.isPrimaryClient&&Mm(t,e.targetId,i.Hu),i}),Rv.apply(this,arguments)}function xm(n,e){return Nv.apply(this,arguments)}function Nv(){return Nv=(0,we.Z)(function*(n,e){const t=Ze(n);return ev(t.localStore,e).then(r=>lu(t,r))}),Nv.apply(this,arguments)}function VT(n,e,t,r){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,we.Z)(function*(n,e,t,r){const i=Ze(n),u=yield function(c,f){const y=Ze(c),b=Ze(y.Bs);return y.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.fn(A,f).next(S=>S?y.ci.Ks(A,S):ye.resolve(null)))}(i.localStore,e);var f;null!==u?("pending"===t?yield Gf(i.remoteStore):"acknowledged"===t||"rejected"===t?(Mv(i,e,r||null),Sv(i,e),f=e,Ze(Ze(i.localStore).Bs)._n(f)):dt(),yield lu(i,u)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),Rm.apply(this,arguments)}function Nm(){return Nm=(0,we.Z)(function*(n,e){const t=Ze(n);if($b(t),Hb(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Om(t,r.toArray());t.ha=!0,yield pv(t.remoteStore,!0);for(const u of i)pm(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let i=Promise.resolve();t.na.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Yf(t,c),Wd(t.localStore,c,!0))),Hf(t.remoteStore,c)}),yield i,yield Om(t,r),function(u){const c=Ze(u);c.ra.forEach((f,y)=>{Hf(c.remoteStore,y)}),c.oa.bi(),c.ra=new Map,c.ia=new Zn(qe.comparator)}(t),t.ha=!1,yield pv(t.remoteStore,!1)}}),Nm.apply(this,arguments)}function Om(n,e,t){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,we.Z)(function*(n,e,t){const r=Ze(n),i=[],u=[];for(const c of e){let f;const y=r.na.get(c);if(y&&0!==y.length){f=yield al(r.localStore,Is(y[0]));for(const b of y){const A=r.ea.get(b),S=yield nM(r,A);S.snapshot&&u.push(S.snapshot)}}else{const b=yield fb(r.localStore,c);f=yield al(r.localStore,b),yield Im(r,Bb(b),c,!1)}i.push(f)}return r.ta.Qo(u),i}),Qf.apply(this,arguments)}function Bb(n){return ow(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Ov(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Fs()}function Pv(n,e,t,r){return th.apply(this,arguments)}function th(){return th=(0,we.Z)(function*(n,e,t,r){const i=Ze(n);if(i.ha)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const u=i.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield ev(i.localStore,aw(u[0])),f=iu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield lu(i,c,f);break}case"rejected":yield Wd(i.localStore,e,!0),Yf(i,e,r);break;default:dt()}}),th.apply(this,arguments)}function rM(n,e,t){return jb.apply(this,arguments)}function jb(){return jb=(0,we.Z)(function*(n,e,t){const r=$b(n);if(r.ha){for(const i of e){if(r.na.has(i)){Ue("SyncEngine","Adding an already active target "+i);continue}const u=yield fb(r.localStore,i),c=yield al(r.localStore,u);yield Im(r,Bb(u),c.targetId,!1),pm(r.remoteStore,c)}for(const i of t)r.na.has(i)&&(yield Wd(r.localStore,i,!1).then(()=>{Hf(r.remoteStore,i),Yf(r,i)}).catch(sl))}}),jb.apply(this,arguments)}function $b(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kT.bind(null,e),e.ta.Qo=yv.bind(null,e.eventManager),e.ta.fa=xT.bind(null,e.eventManager),e}function Hb(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Tv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Fb.bind(null,e),e}class zb{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.M=Yd(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return K_(this.persistence,new W_,e.initialUser,this.M)}wa(e){return new ET(_b.zi,this.M)}_a(e){return new rv}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Wb extends zb{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield Hb(r.ya.syncEngine),yield Gf(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return K_(this.persistence,new W_,e.initialUser,this.M)}ma(e){return new gT(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=z_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?is.withCacheSize(this.cacheSizeBytes):is.DEFAULT;return new G_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,iv(),Oc(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new rv}}class UT extends Wb{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const i=r.ya.syncEngine;r.sharedClientState instanceof lm&&(r.sharedClientState.syncEngine={Mr:VT.bind(null,i),Or:Pv.bind(null,i),Fr:rM.bind(null,i),Fs:Ov.bind(null,i),kr:xm.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,we.Z)(function*(c){yield function Fc(n,e){return Nm.apply(this,arguments)}(r.ya.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}_a(e){const t=iv();if(!lm.vt(t))throw new Pe(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=z_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new lm(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class kv{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>kb(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=eM.bind(null,r.syncEngine),yield pv(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new MT}createDatastore(e){const t=Yd(e.databaseInfo.databaseId),r=new bT(e.databaseInfo);return new DT(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=f=>kb(this.syncEngine,f,0),c=dm.vt()?new dm:new cm,new wb(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,f,y,b){const A=new NT(r,i,u,c,f,y);return b&&(A.ha=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=Ze(t);Ue("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield Pc(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Fv(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Jf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class qb{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new Kr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,we.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),i=Number(r);isNaN(i)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(i);return new Rb(JSON.parse(u),t.length+i)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,we.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,we.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class BT{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Pe(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,we.Z)(function*(u,c){const f=Ze(u),y=Hg(f.M)+"/documents",b={documents:c.map(H=>Ud(f.M,H))},A=yield f.ho("BatchGetDocuments",y,b),S=new Map;A.forEach(H=>{const K=function Gg(n,e){return"found"in e?function(t,r){kt(!!r.found);const i=Ia(t,r.found.name),u=Br(r.found.updateTime),c=new ui({mapValue:{fields:r.found.fields}});return Hn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){kt(!!r.missing),kt(!!r.readTime);const i=Ia(t,r.missing),u=Br(r.readTime);return Hn.newNoDocument(i,u)}(n,e):dt()}(f.M,H);S.set(K.key.toString(),K)});const L=[];return c.forEach(H=>{const K=S.get(H.toString());kt(!!K),L.push(K)}),L}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=qe.fromPath(i);e.mutations.push(new Lg(u,e.precondition(u)))}),yield(r=(0,we.Z)(function*(i,u){const c=Ze(i),f=Hg(c.M)+"/documents",y={writes:u.map(b=>Rf(c.M,b))};yield c.oo("Commit",f,y)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=xt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Pe(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?_r.updateTime(t):_r.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xt.min()))throw new Pe(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _r.updateTime(t)}return _r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class jT{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new sv(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,we.Z)(function*(){const t=new BT(e.datastore),r=e.Ca(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.xa(u)}))}).catch(i=>{e.xa(i)})}))}Ca(e){try{const t=this.updateFunction(e);return!qu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ww(t)}return!1}}class Kb{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=vi.UNAUTHENTICATED,this.clientId=u_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,we.Z)(function*(f){Ue("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ue("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Wf(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Pm(n,e){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,we.Z)(function*(u){r.isEqual(u)||(yield hb(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Zb.apply(this,arguments)}function Lv(n,e){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Vv(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>ST(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>ST(e.remoteStore,u)),n.onlineComponents=e}),Xf.apply(this,arguments)}function Vv(n){return Uv.apply(this,arguments)}function Uv(){return Uv=(0,we.Z)(function*(n){return n.offlineComponents||(Ue("FirestoreClient","Using default OfflineComponentProvider"),yield Pm(n,new zb)),n.offlineComponents}),Uv.apply(this,arguments)}function Bv(n){return Yb.apply(this,arguments)}function Yb(){return Yb=(0,we.Z)(function*(n){return n.onlineComponents||(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield Lv(n,new kv)),n.onlineComponents}),Yb.apply(this,arguments)}function $T(n){return Vv(n).then(e=>e.persistence)}function jv(n){return Vv(n).then(e=>e.localStore)}function Qb(n){return Bv(n).then(e=>e.remoteStore)}function Jb(n){return Bv(n).then(e=>e.syncEngine)}function ep(n){return Xb.apply(this,arguments)}function Xb(){return Xb=(0,we.Z)(function*(n){const e=yield Bv(n),t=e.eventManager;return t.onListen=XS.bind(null,e.syncEngine),t.onUnlisten=OT.bind(null,e.syncEngine),t}),Xb.apply(this,arguments)}function GT(n,e,t={}){const r=new Kr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,u,c,f,y){const b=new Jf({next:S=>{u.enqueueAndForget(()=>Ts(i,A));const L=S.docs.has(c);!L&&S.fromCache?y.reject(new Pe(he.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&S.fromCache&&f&&"server"===f.source?y.reject(new Pe(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),A=new Kf(mc(c.path),b,{includeMetadataChanges:!0,Cu:!0});return qf(i,A)}(yield ep(n),n.asyncQueue,e,t,r)})),r.promise}function zT(n,e,t={}){const r=new Kr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,u,c,f,y){const b=new Jf({next:S=>{u.enqueueAndForget(()=>Ts(i,A)),S.fromCache&&"server"===f.source?y.reject(new Pe(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),A=new Kf(c,b,{includeMetadataChanges:!0,Cu:!0});return qf(i,A)}(yield ep(n),n.asyncQueue,e,t,r)})),r.promise}const l=new Map;function d(n,e,t){if(!t)throw new Pe(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function p(n,e,t,r){if(!0===e&&!0===r)throw new Pe(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _(n){if(!qe.isDocumentKey(n))throw new Pe(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function E(n){if(qe.isDocumentKey(n))throw new Pe(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function D(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function T(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=D(n);throw new Pe(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function x(n,e){if(e<=0)throw new Pe(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class F{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,p("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class G{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new F({}),this._settingsFrozen=!1,e instanceof Ao?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Pe(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ao(i.options.projectId)}(e))}get app(){if(!this._app)throw new Pe(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new F(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new wg;switch(t.type){case"gapi":const r=t.client;return kt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new vC(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Pe(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=l.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),l.delete(e),t.terminate())}(this),Promise.resolve()}}class ae{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new je(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ae(this.firestore,e,this._key)}}class Oe{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Oe(this.firestore,e,this._query)}}class je extends Oe{constructor(e,t,r){super(e,t,mc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ae(this.firestore,null,new qe(e))}withConverter(e){return new je(this.firestore,e,this._path)}}function ut(n,e,...t){if(n=(0,en.m9)(n),d("collection","path",e),n instanceof G){const r=sn.fromString(e,...t);return E(r),new je(n,null,r)}{if(!(n instanceof ae||n instanceof je))throw new Pe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return E(r),new je(n.firestore,null,r)}}function _t(n,e,...t){if(n=(0,en.m9)(n),1===arguments.length&&(e=u_.R()),d("doc","path",e),n instanceof G){const r=sn.fromString(e,...t);return _(r),new ae(n,null,new qe(r))}{if(!(n instanceof ae||n instanceof je))throw new Pe(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(sn.fromString(e,...t));return _(r),new ae(n.firestore,n instanceof je?n.converter:null,new qe(r))}}function tn(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),(n instanceof ae||n instanceof je)&&(e instanceof ae||e instanceof je)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gn(n,e){return n=(0,en.m9)(n),e=(0,en.m9)(e),n instanceof Oe&&e instanceof Oe&&n.firestore===e.firestore&&Pd(n._query,e._query)&&n.converter===e.converter}class As{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new sv(this,"async_queue_retry"),this.qa=()=>{const t=Oc();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Oc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Oc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new Kr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,we.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Dc(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Vr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const i=Mb.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(i),i}Ka(){this.$a&&dt()}verifyOperationInProgress(){}Wa(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function cu(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class $v{constructor(){this._progressObserver={},this._taskCompletionResolver=new Kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class kn extends G{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new As,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||km(this),this._firestoreClient.terminate()}}function Gv(n=(0,ga.getApp)()){return(0,ga._getProvider)(n,"firestore").getImmediate()}function lr(n){return n._firestoreClient||km(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function km(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new YE(n._databaseId,u,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var u,f;n._firestoreClient=new Kb(n._authCredentials,n._appCheckCredentials,n._queue,r)}function uM(n,e,t){const r=new Kr;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield Pm(n,t),yield Lv(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(u=i).name?u.code===he.FAILED_PRECONDITION||u.code===he.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var u})).then(()=>r.promise)}function lM(n){if(n._initialized||n._terminated)throw new Pe(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Lc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ul{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ul(Zr.fromBase64String(e))}catch(t){throw new Pe(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ul(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class tp{constructor(e){this._methodName=e}}class tD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const oO=/^__.*__$/;class aO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ec(e,this.data,this.fieldMask,t,this.fieldTransforms):new If(e,this.data,t,this.fieldTransforms)}}class cM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ec(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class nD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new nD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.nc(e),i}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return sD(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(dM(this.Xa)&&oO.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class uO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Yd(e)}ac(e,t,r,i=!1){return new nD({Xa:e,methodName:t,uc:r,path:yr.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function np(n){const e=n._freezeSettings(),t=Yd(n._databaseId);return new uO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rD(n,e,t,r,i,u={}){const c=n.ac(u.merge||u.mergeFields?2:0,e,t,i);ZT("Data must be an object, but it was:",c,r);const f=pM(r,c);let y,b;if(u.merge)y=new nu(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const A=[];for(const S of u.mergeFields){const L=YT(e,S,t);if(!c.contains(L))throw new Pe(he.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);mM(A,L)||A.push(L)}y=new nu(A),b=c.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,b=c.fieldTransforms;return new aO(new ui(f),y,b)}class qv extends tp{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qv}}function hM(n,e,t){return new nD({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class WT extends tp{_toFieldTransform(e){return new Ld(e.path,new kd)}isEqual(e){return e instanceof WT}}class lO extends tp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=hM(this,e,!0),r=this.cc.map(u=>rp(u,t)),i=new _c(r);return new Ld(e.path,i)}isEqual(e){return this===e}}class cO extends tp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=hM(this,e,!0),r=this.cc.map(u=>rp(u,t)),i=new vc(r);return new Ld(e.path,i)}isEqual(e){return this===e}}class dO extends tp{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Fd(e.M,dw(e.M,this.hc));return new Ld(e.path,t)}isEqual(e){return this===e}}function qT(n,e,t,r){const i=n.ac(1,e,t);ZT("Data must be an object, but it was:",i,r);const u=[],c=ui.empty();To(r,(y,b)=>{const A=iD(e,y,t);b=(0,en.m9)(b);const S=i.sc(A);if(b instanceof qv)u.push(A);else{const L=rp(b,S);null!=L&&(u.push(A),c.set(A,L))}});const f=new nu(u);return new cM(c,f,i.fieldTransforms)}function KT(n,e,t,r,i,u){const c=n.ac(1,e,t),f=[YT(e,r,t)],y=[i];if(u.length%2!=0)throw new Pe(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)f.push(YT(e,u[L])),y.push(u[L+1]);const b=[],A=ui.empty();for(let L=f.length-1;L>=0;--L)if(!mM(b,f[L])){const H=f[L];let K=y[L];K=(0,en.m9)(K);const se=c.sc(H);if(K instanceof qv)b.push(H);else{const Ie=rp(K,se);null!=Ie&&(b.push(H),A.set(H,Ie))}}const S=new nu(b);return new cM(A,S,c.fieldTransforms)}function fM(n,e,t,r=!1){return rp(t,n.ac(r?4:3,e))}function rp(n,e){if(gM(n=(0,en.m9)(n)))return ZT("Unsupported field value:",e,n),pM(n,e);if(n instanceof tp)return function(t,r){if(!dM(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let f=rp(c,r.ic(u));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,en.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dw(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Xn.fromDate(t);return{timestampValue:xf(r.M,i)}}if(t instanceof Xn){const i=new Xn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:xf(r.M,i)}}if(t instanceof tD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ul)return{bytesValue:Mw(r.M,t._byteString)};if(t instanceof ae){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:$g(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${D(t)}`)}(n,e)}function pM(n,e){const t={};return l_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):To(n,(r,i)=>{const u=rp(i,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function gM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xn||n instanceof tD||n instanceof ul||n instanceof ae||n instanceof tp)}function ZT(n,e,t){if(!gM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=D(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function YT(n,e,t){if((e=(0,en.m9)(e))instanceof Lc)return e._internalPath;if("string"==typeof e)return iD(n,e);throw sD("Field path arguments must be of type string or ",n,!1,void 0,t)}const hO=new RegExp("[~\\*/\\[\\]]");function iD(n,e,t){if(e.search(hO)>=0)throw sD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lc(...e.split("."))._internalPath}catch(r){throw sD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sD(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(u||c)&&(y+=" (found",u&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Pe(he.INVALID_ARGUMENT,f+n+y)}function mM(n,e){return n.some(t=>t.isEqual(e))}class Kv{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new ae(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new fO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(oD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class fO extends Kv{data(){return super.data()}}function oD(n,e){return"string"==typeof e?iD(n,e):e instanceof Lc?e._internalPath:e._delegate._internalPath}class ip{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vc extends Kv{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(oD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Zv extends Vc{data(e={}){return super.data(e)}}class nh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ip(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zv(this._firestore,this._userDataWriter,r.key,r,new ip(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Zv(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ip(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new Zv(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ip(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,b=-1;return 0!==c.type&&(y=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:pO(c.type),doc:f,oldIndex:y,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function pO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function yM(n,e){return n instanceof Vc&&e instanceof Vc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof nh&&e instanceof nh&&n._firestore===e._firestore&&gn(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function _M(n){if(wf(n)&&0===n.explicitOrderBy.length)throw new Pe(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yv{}function rh(n,...e){for(const t of e)n=t._apply(n);return n}class gO extends Yv{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=np(e.firestore),r=function(i,u,c,f,y,b,A){let S;if(y.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Pe(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){IM(A,b);const H=[];for(const K of A)H.push(DM(f,i,K));S={arrayValue:{values:H}}}else S=DM(f,i,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||IM(A,b),S=fM(c,"where",A,"in"===b||"not-in"===b);const L=Mn.create(y,b,S);return function(H,K){if(K.S()){const Ie=xg(H);if(null!==Ie&&!Ie.isEqual(K.field))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ie.toString()}' and '${K.field.toString()}'`);const tt=Od(H);null!==tt&&CM(0,K.field,tt)}const se=function(Ie,tt){for(const it of Ie.filters)if(tt.indexOf(it.op)>=0)return it.op;return null}(H,function(Ie){switch(Ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(K.op));if(null!==se)throw new Pe(he.INVALID_ARGUMENT,se===K.op?`Invalid query. You cannot use more than one '${K.op.toString()}' filter.`:`Invalid query. You cannot use '${K.op.toString()}' filters with '${se.toString()}' filters.`)}(i,L),L}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Oe(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new Zs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class yO extends Yv{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Pe(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new gc(i,u);return function(f,y){if(null===Od(f)){const b=xg(f);null!==b&&CM(0,b,y.field)}}(r,c),c}(e._query,this.lc,this._c);return new Oe(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new Zs(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class vM extends Yv{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new Oe(e.firestore,e.converter,E_(e._query,this.wc,this.mc))}}class EM extends Yv{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=bM(e,this.type,this.gc,this.yc);return new Oe(e.firestore,e.converter,(i=t,new Zs((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class wM extends Yv{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=bM(e,this.type,this.gc,this.yc);return new Oe(e.firestore,e.converter,(i=t,new Zs((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function bM(n,e,t,r){if(t[0]=(0,en.m9)(t[0]),t[0]instanceof Kv)return function(i,u,c,f,y){if(!f)throw new Pe(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const A of yc(i))if(A.field.isKeyField())b.push(Ku(u,f.key));else{const S=f.data.field(A.field);if(bg(S))throw new Pe(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const L=A.field.canonicalString();throw new Pe(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}b.push(S)}return new Qu(b,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=np(n.firestore);return function(u,c,f,y,b,A){const S=u.explicitOrderBy;if(b.length>S.length)throw new Pe(he.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let H=0;H<b.length;H++){const K=b[H];if(S[H].field.isKeyField()){if("string"!=typeof K)throw new Pe(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof K}`);if(!Rg(u)&&-1!==K.indexOf("/"))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${K}' contains a slash.`);const se=u.path.child(sn.fromString(K));if(!qe.isDocumentKey(se))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${se}' is not because it contains an odd number of segments.`);const Ie=new qe(se);L.push(Ku(c,Ie))}else{const se=fM(f,y,K);L.push(se)}}return new Qu(L,A)}(n._query,n.firestore._databaseId,i,e,t,r)}}function DM(n,e,t){if("string"==typeof(t=(0,en.m9)(t))){if(""===t)throw new Pe(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rg(e)&&-1!==t.indexOf("/"))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(sn.fromString(t));if(!qe.isDocumentKey(r))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ku(n,new qe(r))}if(t instanceof ae)return Ku(n,t._key);throw new Pe(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${D(t)}.`)}function IM(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Pe(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function CM(n,e,t){if(!t.isEqual(e))throw new Pe(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class QT{convertValue(e,t="none"){switch(fc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return To(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new tD(Kn(e.latitude),Kn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Dg(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xd(e));default:return null}}convertTimestamp(e){const t=wa(e);return new Xn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=sn.fromString(e);kt(M_(r));const i=new Ao(r.get(1),r.get(3)),u=new qe(r.popFirst(5));return i.isEqual(t)||Vr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function aD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class CO extends QT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ae(this.firestore,null,t)}}class TM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=np(e)}set(e,t,r){this._verifyNotCommitted();const i=ih(e,this._firestore),u=aD(i.converter,t,r),c=rD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,_r.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=ih(e,this._firestore);let c;return c="string"==typeof(t=(0,en.m9)(t))||t instanceof Lc?KT(this._dataReader,"WriteBatch.update",u._key,t,r,i):qT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,_r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ih(e,this._firestore);return this._mutations=this._mutations.concat(new Fg(t._key,_r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Pe(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ih(n,e){if((n=(0,en.m9)(n)).firestore!==e)throw new Pe(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class sp extends QT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ae(this.firestore,null,t)}}function AM(n,e,t){n=T(n,ae);const r=T(n.firestore,kn),i=aD(n.converter,e,t);return Fm(r,[rD(np(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,_r.none())])}function SM(n,e,t,...r){n=T(n,ae);const i=T(n.firestore,kn),u=np(i);let c;return c="string"==typeof(e=(0,en.m9)(e))||e instanceof Lc?KT(u,"updateDoc",n._key,e,t,r):qT(u,"updateDoc",n._key,e),Fm(i,[c.toMutation(n._key,_r.exists(!0))])}function MM(n,...e){var t,r,i;n=(0,en.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||cu(e[c])||(u=e[c],c++);const f={includeMetadataChanges:u.includeMetadataChanges};if(cu(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let y,b,A;if(n instanceof ae)b=T(n.firestore,kn),A=mc(n._key.path),y={next:S=>{e[c]&&e[c](JT(b,n,S))},error:e[c+1],complete:e[c+2]};else{const S=T(n,Oe);b=T(S.firestore,kn),A=S._query;const L=new sp(b);y={next:H=>{e[c]&&e[c](new nh(b,L,S,H))},error:e[c+1],complete:e[c+2]},_M(n._query)}return function(S,L,H,K){const se=new Jf(K),Ie=new Kf(L,se,H);return S.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return qf(yield ep(S),Ie)})),()=>{se.Ia(),S.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return Ts(yield ep(S),Ie)}))}}(lr(b),A,f,y)}function Fm(n,e){return function(t,r){const i=new Kr;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function PT(n,e,t){return Pb.apply(this,arguments)}(yield Jb(t),r,i)})),i.promise}(lr(n),e)}function JT(n,e,t){const r=t.docs.get(e._key),i=new sp(n);return new Vc(n,i,e._key,r,new ip(t.hasPendingWrites,t.fromCache),e.converter)}class kO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=np(e)}get(e){const t=ih(e,this._firestore),r=new CO(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return dt();const u=i[0];if(u.isFoundDocument())return new Kv(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Kv(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const i=ih(e,this._firestore),u=aD(i.converter,t,r),c=rD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=ih(e,this._firestore);let c;return c="string"==typeof(t=(0,en.m9)(t))||t instanceof Lc?KT(this._dataReader,"Transaction.update",u._key,t,r,i):qT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=ih(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ih(e,this._firestore),r=new sp(this._firestore);return super.get(e).then(i=>new Vc(this._firestore,r,t._key,i._document,new ip(!1,!1),t.converter))}}function XT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function RM(){if("undefined"==typeof Uint8Array)throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function NM(){if(!function c_(){return"undefined"!=typeof atob}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Md=ga.SDK_VERSION,(0,ga._registerComponent)(new Zp.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),u=new kn(i,new KE(t.getProvider("auth-internal")),new EC(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,ga.registerVersion)(qE,"3.4.8",n),(0,ga.registerVersion)(qE,"3.4.8","esm2017")}();class Qv{constructor(e){this._delegate=e}static fromBase64String(e){return NM(),new Qv(ul.fromBase64String(e))}static fromUint8Array(e){return RM(),new Qv(ul.fromUint8Array(e))}toBase64(){return NM(),this._delegate.toBase64()}toUint8Array(){return RM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function eA(n){return function GO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class zO{enableIndexedDbPersistence(e,t){return function zv(n,e){lM(n=T(n,kn));const t=lr(n),r=n._freezeSettings(),i=new kv;return uM(t,i,new Wb(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Wv(n){lM(n=T(n,kn));const e=lr(n),t=n._freezeSettings(),r=new kv;return uM(e,r,new UT(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function eO(n){if(n._initialized&&!n._terminated)throw new Pe(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Kr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!Cs.vt())return Promise.resolve();const i=r+"main";yield Cs.delete(i)}),function(r){return t.apply(this,arguments)})(z_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class OM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ao||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Eg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Q(n,e,t,r={}){var i;const u=(n=T(n,G))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Eg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,f;if("string"==typeof r.mockUserToken)c=r.mockUserToken,f=vi.MOCK_USER;else{c=(0,en.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Pe(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new vi(y)}n._authCredentials=new yC(new a_(c,f))}}(this._delegate,e,t,r)}enableNetwork(){return function nO(n){return function iM(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield $T(n),t=yield Qb(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i.fu.delete(0),Qd(i)}(t)}))}(lr(n=T(n,kn)))}(this._delegate)}disableNetwork(){return function rO(n){return function sM(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield $T(n),t=yield Qb(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(i){const u=Ze(i);u.fu.add(0),yield Pc(u),u.wu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(lr(n=T(n,kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,p("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function tO(n){return function(e){const t=new Kr;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function Lb(n,e){return Sm.apply(this,arguments)}(yield Jb(e),t)})),t.promise}(lr(n=T(n,kn)))}(this._delegate)}onSnapshotsInSync(e){return function PO(n,e){return function aM(n,e){const t=new Jf(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield ep(n),i=t,Ze(r).Eu.add(i),void i.next();var r,i})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield ep(n),i=t,void Ze(r).Eu.delete(i);var r,i}))}}(lr(n=T(n,kn)),cu(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Pe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Lm(this,ut(this._delegate,e))}catch(t){throw Ss(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ta(this,_t(this._delegate,e))}catch(t){throw Ss(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ms(this,function Ae(n,e){if(n=T(n,G),d("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Pe(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Oe(n,null,(t=e,new Zs(sn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ss(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function FO(n,e){return function s(n,e){const t=new Kr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const r=yield(i=n,Bv(i).then(u=>u.datastore));var i;new jT(n.asyncQueue,r,e,t).run()})),t.promise}(lr(n=T(n,kn)),t=>e(new kO(n,t)))}(this._delegate,t=>e(new PM(this,t)))}batch(){return lr(this._delegate),new kM(new TM(this._delegate,e=>Fm(this._delegate,e)))}loadBundle(e){return function iO(n,e){const t=lr(n=T(n,kn)),r=new $v;return function o(n,e,t,r){const i=function(u,c){let f;return f="string"==typeof u?(new TextEncoder).encode(u):u,y=function(y,b){if(y instanceof Uint8Array)return Fv(y,b);if(y instanceof ArrayBuffer)return Fv(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new qb(y,c);var y}(t,Yd(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function Gb(n,e,t){const r=Ze(n);var i;(i=(0,we.Z)(function*(u,c,f){try{const y=yield c.getMetadata();if(yield function(L,H){const K=Ze(L),se=Br(H.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",Ie=>K._s.getBundleMetadata(Ie,H.id)).then(Ie=>!!Ie&&Ie.createTime.compareTo(se)>=0)}(u.localStore,y))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(L=y).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);f._updateProgress(Ev(y));const b=new RT(y,u.localStore,c.M);let A=yield c.da();for(;A;){const L=yield b.ku(A);L&&f._updateProgress(L),A=yield c.da()}const S=yield b.complete();return yield lu(u,S.Fu,void 0),yield function(L,H){const K=Ze(L);return K.persistence.runTransaction("Save bundle","readwrite",se=>K._s.saveBundleMetadata(se,H))}(u.localStore,y),f._completeWith(S.progress),Promise.resolve(S.Ou)}catch(y){return Eg("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var L}),function(u,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Jb(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function sO(n,e){return function a(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",u=>i._s.getNamedQuery(u,r))}(yield jv(n),e)}))}(lr(n=T(n,kn)),e).then(t=>t?new Oe(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ms(this,t):null)}}class uD extends QT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qv(new ul(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ta.forKey(t,this.firestore,null)}}class PM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}get(e){const t=ap(e);return this._delegate.get(t).then(r=>new Jv(this._firestore,new Vc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=ap(e);return r?(XT("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=ap(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=ap(e);return this._delegate.delete(t),this}}class kM{constructor(e){this._delegate=e}set(e,t,r){const i=ap(e);return r?(XT("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=ap(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=ap(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class op{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Zv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xv(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=op.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new op(e,new uD(e),t),i.set(t,u)),u}}op.INSTANCES=new WeakMap;class Ta{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ta(t,new ae(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new Ta(t,new ae(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Lm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Lm(this.firestore,ut(this._delegate,e))}catch(t){throw Ss(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,en.m9)(e))instanceof ae&&tn(this._delegate,e)}set(e,t){t=XT("DocumentReference.set",t);try{return t?AM(this._delegate,e,t):AM(this._delegate,e)}catch(r){throw Ss(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?SM(this._delegate,e):SM(this._delegate,e,t,...r)}catch(i){throw Ss(i,"updateDoc()","DocumentReference.update()")}}delete(){return function NO(n){return Fm(T(n.firestore,kn),[new Fg(n._key,_r.none())])}(this._delegate)}onSnapshot(...e){const t=FM(e),r=LM(e,i=>new Jv(this.firestore,new Vc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return MM(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function AO(n){n=T(n,ae);const e=T(n.firestore,kn),t=lr(e),r=new sp(e);return function HT(n,e){const t=new Kr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,u,c){try{const f=yield function(y,b){const A=Ze(y);return A.persistence.runTransaction("read document","readonly",S=>A.ci.Ls(S,b))}(i,u);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Pe(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=Wf(f,`Failed to get document '${u} from cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield jv(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Vc(e,r,n._key,i,new ip(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function SO(n){n=T(n,ae);const e=T(n.firestore,kn);return GT(lr(e),n._key,{source:"server"}).then(t=>JT(e,n,t))}(this._delegate):function TO(n){n=T(n,ae);const e=T(n.firestore,kn);return GT(lr(e),n._key).then(t=>JT(e,n,t))}(this._delegate),t.then(r=>new Jv(this.firestore,new Vc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ta(this.firestore,this._delegate.withConverter(e?op.getInstance(this.firestore,e):null))}}function Ss(n,e,t){return n.message=n.message.replace(e,t),n}function FM(n){for(const e of n)if("object"==typeof e&&!eA(e))return e;return{}}function LM(n,e){var t,r;let i;return i=eA(n[0])?n[0]:eA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Jv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ta(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yM(this._delegate,e._delegate)}}class Xv extends Jv{data(e){const t=this._delegate.data(e);return function mC(n,e){n||dt()}(void 0!==t),t}}class Ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}where(e,t,r){try{return new Ms(this.firestore,rh(this._delegate,function mO(n,e,t){const r=e,i=oD("where",n);return new gO(i,r,t)}(e,t,r)))}catch(i){throw Ss(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ms(this.firestore,rh(this._delegate,function _O(n,e="asc"){const t=e,r=oD("orderBy",n);return new yO(r,t)}(e,t)))}catch(r){throw Ss(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ms(this.firestore,rh(this._delegate,function vO(n){return x("limit",n),new vM("limit",n,"F")}(e)))}catch(t){throw Ss(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ms(this.firestore,rh(this._delegate,function EO(n){return x("limitToLast",n),new vM("limitToLast",n,"L")}(e)))}catch(t){throw Ss(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ms(this.firestore,rh(this._delegate,function wO(...n){return new EM("startAt",n,!0)}(...e)))}catch(t){throw Ss(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ms(this.firestore,rh(this._delegate,function bO(...n){return new EM("startAfter",n,!1)}(...e)))}catch(t){throw Ss(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ms(this.firestore,rh(this._delegate,function DO(...n){return new wM("endBefore",n,!1)}(...e)))}catch(t){throw Ss(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ms(this.firestore,rh(this._delegate,function IO(...n){return new wM("endAt",n,!0)}(...e)))}catch(t){throw Ss(t,"endAt()","Query.endAt()")}}isEqual(e){return gn(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function xO(n){n=T(n,Oe);const e=T(n.firestore,kn),t=lr(e),r=new sp(e);return function oM(n,e){const t=new Kr;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,u,c){try{const f=yield rm(i,u,!0),y=new Ob(u,f.li),b=y.Gu(f.documents),A=y.applyChanges(b,!1);c.resolve(A.snapshot)}catch(f){const y=Wf(f,`Failed to execute query '${u} against cache`);c.reject(y)}}),function(i,u,c){return r.apply(this,arguments)})(yield jv(n),e,t);var r})),t.promise}(t,n._query).then(i=>new nh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function RO(n){n=T(n,Oe);const e=T(n.firestore,kn),t=lr(e),r=new sp(e);return zT(t,n._query,{source:"server"}).then(i=>new nh(e,r,n,i))}(this._delegate):function MO(n){n=T(n,Oe);const e=T(n.firestore,kn),t=lr(e),r=new sp(e);return _M(n._query),zT(t,n._query).then(i=>new nh(e,r,n,i))}(this._delegate),t.then(r=>new tA(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=FM(e),r=LM(e,i=>new tA(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return MM(this._delegate,t,r)}withConverter(e){return new Ms(this.firestore,this._delegate.withConverter(e?op.getInstance(this.firestore,e):null))}}class qO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xv(this._firestore,r))})}isEqual(e){return yM(this._delegate,e._delegate)}}class Lm extends Ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ta(this.firestore,e):null}doc(e){try{return new Ta(this.firestore,void 0===e?_t(this._delegate):_t(this._delegate,e))}catch(t){throw Ss(t,"doc()","CollectionReference.doc()")}}add(e){return function OO(n,e){const t=T(n.firestore,kn),r=_t(n),i=aD(n.converter,e);return Fm(t,[rD(np(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,_r.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ta(this.firestore,t))}isEqual(e){return tn(this._delegate,e._delegate)}withConverter(e){return new Lm(this.firestore,this._delegate.withConverter(e?op.getInstance(this.firestore,e):null))}}function ap(n){return T(n,ae)}class nA{constructor(...e){this._delegate=new Lc(...e)}static documentId(){return new nA(yr.keyField().canonicalString())}isEqual(e){return(e=(0,en.m9)(e))instanceof Lc&&this._delegate._internalPath.isEqual(e._internalPath)}}class up{constructor(e){this._delegate=e}static serverTimestamp(){const e=function VO(){return new WT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new up(e)}static delete(){const e=function LO(){return new qv("deleteField")}();return e._methodName="FieldValue.delete",new up(e)}static arrayUnion(...e){const t=function UO(...n){return new lO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new up(t)}static arrayRemove(...e){const t=function BO(...n){return new cO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new up(t)}static increment(e){const t=function jO(n){return new dO("increment",n)}(e);return t._methodName="FieldValue.increment",new up(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const KO={Firestore:OM,GeoPoint:tD,Timestamp:Xn,Blob:Qv,Transaction:PM,WriteBatch:kM,DocumentReference:Ta,DocumentSnapshot:Jv,Query:Ms,QueryDocumentSnapshot:Xv,QuerySnapshot:tA,CollectionReference:Lm,FieldPath:nA,FieldValue:up,setLogLevel:function WO(n){!function gC(n){Ea.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function YO(n){(function ZO(n,e){n.INTERNAL.registerComponent(new Zp.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},KO)))})(n,(e,t)=>new OM(e,t,new zO)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(Eo.Z);var VM=P(6451),lD=P(5363),QO=P(6063);class JO extends Ki.x{constructor(e=1/0,t=1/0,r=QO.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)f=y;f&&r.splice(0,f+1)}}}var XO=P(3099);function UM(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,XO.B)({connector:()=>new JO(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function BM(n,e){return(0,ni.m)(e)?Wn(()=>n,e):Wn(()=>n)}var rA=P(9468),lp=P(5867);class Vm{constructor(e){return e}}class jM{constructor(){return(0,lp.C6)()}}const iA=new h.OlP("angularfire2._apps"),tP={provide:Vm,useFactory:function eP(n){return n&&1===n.length?n[0]:new Vm((0,lp.Mq)())},deps:[[new h.FiY,iA]]},nP={provide:jM,deps:[[new h.FiY,iA]]};function rP(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Vm(r)}}let iP=(()=>{class n{constructor(t){(0,lp.KN)("angularfire",Sn.q4.full,"core"),(0,lp.KN)("angularfire",Sn.q4.full,"app"),(0,lp.KN)("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[tP,nP]}),n})();function sP(n,...e){return{ngModule:iP,providers:[{provide:iA,useFactory:rP(n),multi:!0,deps:[h.R0b,h.zs3,Sn.HU,...e]}]}}const oP=(0,Sn.u3)(lp.ZF,!0),$M=new Map,aP={activated:!1,tokenObservers:[]},uP={initialized:!1,enabled:!1};function Ei(n){return $M.get(n)||aP}function du(n,e){$M.set(n,e)}function cD(){return uP}class fP{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new en.BH,yield function pP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new en.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const xs=new en.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function GM(n){if(!Ei(n).activated)throw xs.create("use-before-activation",{appName:n.name})}function aA(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,we.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,u)}catch(S){throw xs.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==c.status)throw xs.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(S){throw xs.create("fetch-parse-error",{originalErrorMessage:S.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw xs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const b=1e3*Number(y[1]),A=Date.now();return{token:f.attestationToken,expireTimeMillis:A+b,issuedAtTimeMillis:A}}),uA.apply(this,arguments)}function vP(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const e0="firebase-app-check-store";let fD=null;function WM(){return fD||(fD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(xs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(e0,{keyPath:"compositeKey"})}}catch(t){e(xs.create("storage-open",{originalErrorMessage:t.message}))}}),fD)}function lA(){return lA=(0,we.Z)(function*(n,e){const r=(yield WM()).transaction(e0,"readwrite"),u=r.objectStore(e0).put({compositeKey:n,value:e});return new Promise((c,f)=>{u.onsuccess=y=>{c()},r.onerror=y=>{var b;f(xs.create("storage-set",{originalErrorMessage:null===(b=y.target.error)||void 0===b?void 0:b.message}))}})}),lA.apply(this,arguments)}const t0=new Lu.Yd("@firebase/app-check");function YM(n,e){return(0,en.hl)()?function DP(n,e){return function qM(n,e){return lA.apply(this,arguments)}(function ZM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{t0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function QM(){return cD().enabled}function JM(){return fA.apply(this,arguments)}function fA(){return fA=(0,we.Z)(function*(){const n=cD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),fA.apply(this,arguments)}const MP={error:"UNKNOWN_ERROR"};function xP(n){return en.US.encodeString(JSON.stringify(n),!1)}function pD(n){return pA.apply(this,arguments)}function pA(){return pA=(0,we.Z)(function*(n,e=!1){const t=n.app;GM(t);const r=Ei(t);let u,i=r.token;if(!i){const y=yield r.cachedTokenPromise;y&&gD(y)&&(i=y)}if(!e&&i&&gD(i))return{token:i.token};let f,c=!1;if(QM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=aA(vP(t,yield JM()),n.heartbeatServiceProvider).then(b=>(r.exchangeTokenPromise=void 0,b)),c=!0);const y=yield r.exchangeTokenPromise;return yield YM(t,y),du(t,Object.assign(Object.assign({},r),{token:y})),{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0),i=yield r.exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?t0.warn(y.message):t0.error(y),u=y}return i?(f={token:i.token},du(t,Object.assign(Object.assign({},r),{token:i})),yield YM(t,i)):f=NP(u),c&&ex(t,f),f}),pA.apply(this,arguments)}function mA(n,e){const t=Ei(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),du(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function XM(n){const{app:e}=n,t=Ei(e);let r=t.tokenRefresher;r||(r=function RP(n){const{app:e}=n;return new fP((0,we.Z)(function*(){let r;if(r=Ei(e).token?yield pD(n,!0):yield pD(n),r.error)throw r.error}),()=>!0,()=>{const t=Ei(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),du(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ex(n,e){const t=Ei(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function gD(n){return n.expireTimeMillis-Date.now()>0}function NP(n){return{token:xP(MP),error:n}}class OP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ei(this.app);for(const t of e)mA(this.app,t.next);return Promise.resolve()}}const ux="app-check-internal";!function qP(){(0,ga._registerComponent)(new Zp.wA("app-check",n=>function PP(n,e){return new OP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ux).initialize()})),(0,ga._registerComponent)(new Zp.wA(ux,n=>function kP(n){return{getToken:e=>pD(n,e),addTokenListener:e=>function gA(n,e,t,r){const{app:i}=n,u=Ei(i),c={next:t,error:r,type:e};if(du(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&gD(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),XM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>XM(n))}(n,"INTERNAL",e),removeTokenListener:e=>mA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ga.registerVersion)("@firebase/app-check","0.5.6")}();class yD{constructor(){return(0,Sn.vb)("app-check")}}"undefined"!=typeof window&&window;var JP=P(127);const cx=new h.OlP("angularfire2.auth.use-emulator"),dx=new h.OlP("angularfire2.auth.settings"),hx=new h.OlP("angularfire2.auth.tenant-id"),fx=new h.OlP("angularfire2.auth.langugage-code"),px=new h.OlP("angularfire2.auth.use-device-language"),gx=new h.OlP("angularfire.auth.persistence"),mx=(n,e,t,r,i,u,c,f)=>(0,vo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,u&&y.useDeviceLanguage(),c)for(const[b,A]of Object.entries(c))y.settings[b]=A;return f&&y.setPersistence(f),y},[t,r,i,u,c,f]);let yx=(()=>{class n{constructor(t,r,i,u,c,f,y,b,A,S,L,H){const K=new Ki.x,se=vt(void 0).pipe((0,lD.Q)(c.outsideAngular),Wn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,5881)))),(0,jt.U)(()=>(0,vo.on)(t,u,r)),(0,jt.U)(Ie=>mx(Ie,u,f,b,A,S,y,L)),UM({bufferSize:1,refCount:!1}));if($o(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=vt(null);else{se.pipe(co()).subscribe();const tt=se.pipe(Wn(ot=>ot.getRedirectResult().then(It=>It,()=>null)),Sn.iC,UM({bufferSize:1,refCount:!1})),it=se.pipe(Wn(ot=>new or.y(It=>({unsubscribe:u.runOutsideAngular(()=>ot.onAuthStateChanged(St=>It.next(St),St=>It.error(St),()=>It.complete()))})))),ze=se.pipe(Wn(ot=>new or.y(It=>({unsubscribe:u.runOutsideAngular(()=>ot.onIdTokenChanged(St=>It.next(St),St=>It.error(St),()=>It.complete()))}))));this.authState=tt.pipe(BM(it),(0,rA.R)(c.outsideAngular),(0,lD.Q)(c.insideAngular)),this.user=tt.pipe(BM(ze),(0,rA.R)(c.outsideAngular),(0,lD.Q)(c.insideAngular)),this.idToken=this.user.pipe(Wn(ot=>ot?(0,On.D)(ot.getIdToken()):vt(null))),this.idTokenResult=this.user.pipe(Wn(ot=>ot?(0,On.D)(ot.getIdTokenResult()):vt(null))),this.credential=(0,VM.T)(tt,K,this.authState.pipe(Yi(ot=>!ot))).pipe((0,jt.U)(ot=>(null==ot?void 0:ot.user)?ot:null),(0,rA.R)(c.outsideAngular),(0,lD.Q)(c.insideAngular))}return(0,vo.pX)(this,se,u,{spy:{apply:(Ie,tt,it)=>{(Ie.startsWith("signIn")||Ie.startsWith("createUser"))&&it.then(ze=>K.next(ze))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(vo.Dh),h.LFG(vo.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Sn.HU),h.LFG(cx,8),h.LFG(dx,8),h.LFG(hx,8),h.LFG(fx,8),h.LFG(px,8),h.LFG(gx,8),h.LFG(yD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function _x(n,e){return function ek(n,e=q0.z){return new or.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function wA(n,e){return _x(n,e).pipe((0,jt.U)(t=>({payload:t,type:"query"})))}function _D(n,e){return wA(n,e).pipe(Si(void 0),Kp(),(0,jt.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const y=i.find(A=>A.doc.ref.isEqual(c.ref)),b=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),u}))}function vx(n,e,t){return _D(n,t).pipe(pi((r,i)=>function nk(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function rk(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return bA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return bA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return bA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function FI(n,e=Zi.y){return n=null!=n?n:K0,(0,Cr.e)((t,r)=>{let i,u=!0;t.subscribe((0,Pn.x)(r,c=>{const f=e(c);(u||!n(i,f))&&(u=!1,i=f,r.next(c))}))})}(),(0,jt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function bA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Ex(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class wx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=_D(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,jt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Si(void 0),Kp(),Yi(([r,i])=>i.length>0||!r),(0,jt.U)(([r,i])=>i),Sn.iC)}auditTrail(e){return this.stateChanges(e).pipe(pi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ex(e);return vx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(e={}){return wA(this.query,this.afs.schedulers.outsideAngular).pipe((0,jt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Sn.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(Sn.iC)}add(e){return this.ref.add(e)}doc(e){return new bx(this.ref.doc(e),this.afs)}}class bx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=Cx(r,t);return new wx(i,u,this.afs)}snapshotChanges(){return function tk(n,e){return _x(n,e).pipe(Si(void 0),Kp(),(0,jt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,jt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,On.D)(this.ref.get(e)).pipe(Sn.iC)}}class ik{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?_D(this.query,this.afs.schedulers.outsideAngular).pipe((0,jt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Yi(t=>t.length>0),Sn.iC):_D(this.query,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}auditTrail(e){return this.stateChanges(e).pipe(pi((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Ex(e);return vx(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(e={}){return wA(this.query,this.afs.schedulers.outsideAngular).pipe((0,jt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Sn.iC)}get(e){return(0,On.D)(this.query.get(e)).pipe(Sn.iC)}}const Dx=new h.OlP("angularfire2.enableFirestorePersistence"),Ix=new h.OlP("angularfire2.firestore.persistenceSettings"),sk=new h.OlP("angularfire2.firestore.settings"),ok=new h.OlP("angularfire2.firestore.use-emulator");function Cx(n,e=(t=>t)){return{query:e(n),ref:n}}let DA=(()=>{class n{constructor(t,r,i,u,c,f,y,b,A,S,L,H,K,se,Ie,tt,it){this.schedulers=y;const ze=(0,vo.on)(t,f,r),ot=A;S&&mx(ze,f,L,K,se,Ie,H,tt),[this.firestore,this.persistenceEnabled$]=(0,vo.cc)(`${ze.name}.firestore`,"AngularFirestore",ze.name,()=>{const It=f.runOutsideAngular(()=>ze.firestore());if(u&&It.settings(u),ot&&It.useEmulator(...ot),i&&!$o(c)){const St=()=>{try{return(0,On.D)(It.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Kt){return"undefined"!=typeof console&&console.warn(Kt),vt(!1)}};return[It,f.runOutsideAngular(St)]}return[It,vt(!1)]},[u,ot,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=Cx(i,r),f=this.schedulers.ngZone.run(()=>u);return new wx(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new ik(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new bx(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(vo.Dh),h.LFG(vo.xv,8),h.LFG(Dx,8),h.LFG(sk,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Sn.HU),h.LFG(Ix,8),h.LFG(ok,8),h.LFG(yx,8),h.LFG(cx,8),h.LFG(dx,8),h.LFG(hx,8),h.LFG(fx,8),h.LFG(px,8),h.LFG(gx,8),h.LFG(yD,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Tx=(()=>{class n{constructor(){JP.Z.registerVersion("angularfire",Sn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Dx,useValue:!0},{provide:Ix,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[DA]}),n})();const Ax=(n,e)=>{if(void 0===e)return n;const t=Object.keys(e);return n.filter(i=>((i,u,c)=>void 0===i.find(f=>u[f]!==c[f]))(t,i,e))};let Sx=(()=>{class n{constructor(t){this._client=t}getAll(t){return this._client.collection("images").valueChanges({idField:"id"}).pipe((0,jt.U)(r=>Ax(r,t)))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(DA))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),IA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Sx,{provide:by,useExisting:Sx}],imports:[[Tx]]}),n})(),CA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zi]]}),n})(),ak=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zi,pa.forChild([{path:"",component:W0}]),qp,IA,CA]]}),n})();const Mx=new h.OlP("GETS_ALL_ADDTASK_DTO"),xx=new h.OlP("SETS_ADDTASK_DTO"),Rx=new h.OlP("REMOVES_ADDTASK_DTO");class uk{constructor(e,t){this.open=e,this.close=t||e}isManual(){return"manual"===this.open||"manual"===this.close}}const lk={hover:["mouseover","mouseout"],focus:["focusin","focusout"]};const cr="undefined"!=typeof window&&window||{};let No;function TA(){if(void 0===cr.document)return"bs4";const n=cr.document.createElement("span");n.innerText="testing bs version",n.classList.add("d-none"),n.classList.add("pl-1"),cr.document.head.appendChild(n);const e=n.getBoundingClientRect(),t=cr.getComputedStyle(n).paddingLeft;return!e||e&&0!==e.top?(cr.document.head.removeChild(n),"bs3"):t&&parseFloat(t)?(cr.document.head.removeChild(n),"bs4"):(cr.document.head.removeChild(n),"bs5")}function Um(){return void 0===cr||(void 0===cr.__theme?(No||(No=TA()),"bs3"===No):"bs3"===cr.__theme)}function Ox(){return!Um()&&(No||(No=TA()),"bs4"===No)}function n0(){return{isBs3:Um(),isBs4:Ox(),isBs5:!Um()&&!Ox()&&(No||(No=TA()),"bs5"===No)}}function mk(){const n="Change";return function(t,r){const i=` __${r}Value`;Object.defineProperty(t,r,{get(){return this[i]},set(u){const c=this[i];this[i]=u,c!==u&&this[r+n]&&this[r+n].emit(u)}})}}"undefined"==typeof console||console;class vD{}const Uc="*";function kx(n,e=null){return{type:2,steps:n,options:e}}function ED(n){return{type:6,styles:n,offset:null}}function Fx(n){Promise.resolve(null).then(n)}class r0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Fx(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Lx{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?Fx(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}var Ek=P(1144);const wk=["addListener","removeListener"],bk=["addEventListener","removeEventListener"],Dk=["on","off"];function wD(n,e,t,r){if((0,ni.m)(t)&&(r=t,t=void 0),r)return wD(n,e,t).pipe(ta(r));const[i,u]=function Tk(n){return(0,ni.m)(n.addEventListener)&&(0,ni.m)(n.removeEventListener)}(n)?bk.map(c=>f=>n[c](e,f,t)):function Ik(n){return(0,ni.m)(n.addListener)&&(0,ni.m)(n.removeListener)}(n)?wk.map(Vx(n,e)):function Ck(n){return(0,ni.m)(n.on)&&(0,ni.m)(n.off)}(n)?Dk.map(Vx(n,e)):[];if(!i&&(0,Ek.z)(n))return(0,Cn.z)(c=>wD(c,e,t))((0,ys.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new or.y(c=>{const f=(...y)=>c.next(1<y.length?y:y[0]);return i(f),()=>u(f)})}function Vx(n,e){return t=>r=>n[t](e,r)}var Ak=P(4408);const s0={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=s0;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(u=>{t=void 0,n(u)});return new ia.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=s0;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=s0;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var Mk=P(7565);const Rk=new class xk extends Mk.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class Sk extends Ak.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=s0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(s0.cancelAnimationFrame(t),e._scheduled=void 0)}});var bD=(()=>(function(n){n.top="top",n.bottom="bottom",n.left="left",n.right="right",n.auto="auto",n.end="right",n.start="left",n["top left"]="top left",n["top right"]="top right",n["right top"]="right top",n["right bottom"]="right bottom",n["bottom right"]="bottom right",n["bottom left"]="bottom left",n["left bottom"]="left bottom",n["left top"]="left top",n["top start"]="top left",n["top end"]="top right",n["end top"]="right top",n["end bottom"]="right bottom",n["bottom end"]="bottom right",n["bottom start"]="bottom left",n["start bottom"]="start bottom",n["start top"]="left top"}(bD||(bD={})),bD))(),o0=(()=>(function(n){n.top="top",n.bottom="bottom",n.left="start",n.right="end",n.auto="auto",n.end="end",n.start="start",n["top left"]="top start",n["top right"]="top end",n["right top"]="end top",n["right bottom"]="end bottom",n["bottom right"]="bottom end",n["bottom left"]="bottom start",n["left bottom"]="start bottom",n["left top"]="start top",n["top start"]="top start",n["top end"]="top end",n["end top"]="end top",n["end bottom"]="end bottom",n["bottom end"]="bottom end",n["bottom start"]="bottom start",n["start bottom"]="start bottom",n["start top"]="start top"}(o0||(o0={})),o0))();function cp(n,e){if(1!==n.nodeType)return[];const t=n.ownerDocument.defaultView,r=null==t?void 0:t.getComputedStyle(n,null);return e?r&&r[e]:r}function SA(n){if(!n)return document.documentElement;let r,t=null==n?void 0:n.offsetParent;for(;null===t&&n.nextElementSibling&&r!==n.nextElementSibling;)r=n.nextElementSibling,t=r.offsetParent;const i=t&&t.nodeName;return i&&"BODY"!==i&&"HTML"!==i?t&&-1!==["TH","TD","TABLE"].indexOf(t.nodeName)&&"static"===cp(t,"position")?SA(t):t:r?r.ownerDocument.documentElement:document.documentElement}function MA(n){return null!==n.parentNode?MA(n.parentNode):n}function DD(n,e){if(!(n&&n.nodeType&&e&&e.nodeType))return document.documentElement;const t=n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=t?n:e,i=t?e:n,u=document.createRange();u.setStart(r,0),u.setEnd(i,0);const c=u.commonAncestorContainer;if(n!==c&&e!==c||r.contains(i))return function Nk(n){const{nodeName:e}=n;return"BODY"!==e&&("HTML"===e||SA(n.firstElementChild)===n)}(c)?c:SA(c);const f=MA(n);return f.host?DD(f.host,e):DD(n,MA(e).host)}function Ux(n){if(!n||!n.parentElement)return document.documentElement;let e=n.parentElement;for(;(null==e?void 0:e.parentElement)&&"none"===cp(e,"transform");)e=e.parentElement;return e||document.documentElement}function Bx(n,e){const t="x"===e?"Left":"Top",r="Left"===t?"Right":"Bottom";return parseFloat(n[`border${t}Width`])+parseFloat(n[`border${r}Width`])}function jx(n,e,t,r){return Math.max(e[`offset${n}`],e[`scroll${n}`],t[`client${n}`],t[`offset${n}`],t[`scroll${n}`],0)}function $x(n){const e=n.body,t=n.documentElement;return{height:jx("Height",e,t),width:jx("Width",e,t)}}function a0(n){return Object.assign(Object.assign({},n),{right:(n.left||0)+n.width,bottom:(n.top||0)+n.height})}function dr(n){return"number"==typeof n||"[object Number]"===Object.prototype.toString.call(n)}function Hx(n){const e=n.getBoundingClientRect();if(!(e&&dr(e.top)&&dr(e.left)&&dr(e.bottom)&&dr(e.right)))return e;const t={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},r="HTML"===n.nodeName?$x(n.ownerDocument):void 0,i=(null==r?void 0:r.width)||n.clientWidth||dr(e.right)&&dr(t.left)&&e.right-t.left||0,u=(null==r?void 0:r.height)||n.clientHeight||dr(e.bottom)&&dr(t.top)&&e.bottom-t.top||0;let c=n.offsetWidth-i,f=n.offsetHeight-u;if(c||f){const y=cp(n);c-=Bx(y,"x"),f-=Bx(y,"y"),t.width-=c,t.height-=f}return a0(t)}function xA(n){return"HTML"===n.nodeName?n:n.parentNode||n.host}function RA(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}const{overflow:e,overflowX:t,overflowY:r}=cp(n);return/(auto|scroll|overlay)/.test(String(e)+String(r)+String(t))?n:RA(xA(n))}function NA(n,e,t=!1){var r,i,u,c,f,y;const b="HTML"===e.nodeName,A=Hx(n),S=Hx(e),H=(RA(n),cp(e)),K=parseFloat(H.borderTopWidth),se=parseFloat(H.borderLeftWidth);t&&b&&(S.top=Math.max(null!==(r=S.top)&&void 0!==r?r:0,0),S.left=Math.max(null!==(i=S.left)&&void 0!==i?i:0,0));const Ie=a0({top:(null!==(u=A.top)&&void 0!==u?u:0)-(null!==(c=S.top)&&void 0!==c?c:0)-K,left:(null!==(f=A.left)&&void 0!==f?f:0)-(null!==(y=S.left)&&void 0!==y?y:0)-se,width:A.width,height:A.height});if(Ie.marginTop=0,Ie.marginLeft=0,b){const tt=parseFloat(H.marginTop),it=parseFloat(H.marginLeft);dr(Ie.top)&&(Ie.top-=K-tt),dr(Ie.bottom)&&(Ie.bottom-=K-tt),dr(Ie.left)&&(Ie.left-=se-it),dr(Ie.right)&&(Ie.right-=se-it),Ie.marginTop=tt,Ie.marginLeft=it}return Ie}function Gx(n,e="top"){const t="top"===e?"scrollTop":"scrollLeft",r=n.nodeName;if("BODY"===r||"HTML"===r){const i=n.ownerDocument.documentElement;return(n.ownerDocument.scrollingElement||i)[t]}return n[t]}function zx(n){const e=n.nodeName;return"BODY"!==e&&"HTML"!==e&&("fixed"===cp(n,"position")||zx(xA(n)))}function OA(n,e,t=0,r,i=!1){let u={top:0,left:0};const c=i?Ux(n):DD(n,e);if("viewport"===r)u=function Pk(n,e=!1){const t=n.ownerDocument.documentElement,r=NA(n,t),i=Math.max(t.clientWidth,window.innerWidth||0),u=Math.max(t.clientHeight,window.innerHeight||0),c=e?0:Gx(t),f=e?0:Gx(t,"left");return a0({top:c-Number(null==r?void 0:r.top)+Number(null==r?void 0:r.marginTop),left:f-Number(null==r?void 0:r.left)+Number(null==r?void 0:r.marginLeft),width:i,height:u})}(c,i);else{let f;"scrollParent"===r?(f=RA(xA(e)),"BODY"===f.nodeName&&(f=n.ownerDocument.documentElement)):f="window"===r?n.ownerDocument.documentElement:r;const y=NA(f,c,i);if(y&&"HTML"===f.nodeName&&!zx(c)){const{height:b,width:A}=$x(n.ownerDocument);dr(u.top)&&dr(y.top)&&dr(y.marginTop)&&(u.top+=y.top-y.marginTop),dr(u.top)&&(u.bottom=Number(b)+Number(y.top)),dr(u.left)&&dr(y.left)&&dr(y.marginLeft)&&(u.left+=y.left-y.marginLeft),dr(u.top)&&(u.right=Number(A)+Number(y.left))}else y&&(u=y)}return dr(u.left)&&(u.left+=t),dr(u.top)&&(u.top+=t),dr(u.right)&&(u.right-=t),dr(u.bottom)&&(u.bottom-=t),u}function kk({width:n,height:e}){return n*e}function Wx(n,e,t,r,i=["top","bottom","right","left"],u="viewport",c=0){var f,y,b,A,S,L,H,K,se,Ie,tt,it;if(-1===n.indexOf("auto"))return n;const ze=OA(t,r,c,u),ot={top:{width:null!==(f=null==ze?void 0:ze.width)&&void 0!==f?f:0,height:(null!==(y=null==e?void 0:e.top)&&void 0!==y?y:0)-(null!==(b=null==ze?void 0:ze.top)&&void 0!==b?b:0)},right:{width:(null!==(A=null==ze?void 0:ze.right)&&void 0!==A?A:0)-(null!==(S=null==e?void 0:e.right)&&void 0!==S?S:0),height:null!==(L=null==ze?void 0:ze.height)&&void 0!==L?L:0},bottom:{width:null!==(H=null==ze?void 0:ze.width)&&void 0!==H?H:0,height:(null!==(K=null==ze?void 0:ze.bottom)&&void 0!==K?K:0)-(null!==(se=null==e?void 0:e.bottom)&&void 0!==se?se:0)},left:{width:(null!==(Ie=e.left)&&void 0!==Ie?Ie:0)-(null!==(tt=null==ze?void 0:ze.left)&&void 0!==tt?tt:0),height:null!==(it=null==ze?void 0:ze.height)&&void 0!==it?it:0}},It=Object.keys(ot).map(vr=>Object.assign(Object.assign({position:vr},ot[vr]),{area:kk(ot[vr])})).sort((vr,li)=>li.area-vr.area);let St=It.filter(({width:vr,height:li})=>vr>=t.clientWidth&&li>=t.clientHeight);St=St.filter(({position:vr})=>i.some(li=>li===vr));const Kt=St.length>0?St[0].position:It[0].position,hr=n.split(" ")[1];return t.className=t.className.replace(/bs-tooltip-auto/g,`bs-tooltip-${n0().isBs5?o0[Kt]:Kt}`),Kt+(hr?`-${hr}`:"")}const ID=(n,e=0)=>n?parseFloat(n):e;function qx(n){const e=n.ownerDocument.defaultView,t=null==e?void 0:e.getComputedStyle(n),r=ID(null==t?void 0:t.marginTop)+ID(null==t?void 0:t.marginBottom),i=ID(null==t?void 0:t.marginLeft)+ID(null==t?void 0:t.marginRight);return{width:Number(n.offsetWidth)+i,height:Number(n.offsetHeight)+r}}function Kx(n,e,t){return NA(e,t?Ux(n):DD(n,e),t)}function PA(n,e,t){var r,i,u;const c=t.split(" ")[0],f=qx(n),y={width:f.width,height:f.height},b=-1!==["right","left"].indexOf(c),A=b?"top":"left",S=b?"left":"top",L=b?"height":"width",H=b?"width":"height";return y[A]=(null!==(r=e[A])&&void 0!==r?r:0)+e[L]/2-f[L]/2,y[S]=c===S?(null!==(i=e[S])&&void 0!==i?i:0)-f[H]:null!==(u=e[function Lk(n){const e={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,t=>e[t])}(S)])&&void 0!==u?u:0,y}function Zx(n,e){var t;return!!(null===(t=n.modifiers[e])||void 0===t?void 0:t.enabled)}const Uk={top:["top","top start","top end"],bottom:["bottom","bottom start","bottom end"],start:["start","start top","start bottom"],end:["end","end top","end bottom"]};function CD(n,e){return!!n0().isBs5&&Uk[e].includes(n)}function Yx(n,e,t){!n||!e||Object.keys(e).forEach(r=>{let i="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&function Ok(n){return""!==n&&!isNaN(parseFloat(n))&&isFinite(Number(n))}(e[r])&&(i="px"),t?t.setStyle(n,r,`${String(e[r])}${i}`):n.style[r]=String(e[r])+i})}function $k(n){var e,t,r,i,u,c;let f=n.offsets.target;const y=n.instance.target.querySelector(".arrow");if(!y)return n;const b=-1!==["left","right"].indexOf(n.placement.split(" ")[0]),A=b?"height":"width",S=b?"Top":"Left",L=S.toLowerCase(),H=b?"left":"top",K=b?"bottom":"right",se=qx(y)[A],Ie=n.placement.split(" ")[1];(null!==(e=n.offsets.host[K])&&void 0!==e?e:0)-se<(null!==(t=f[L])&&void 0!==t?t:0)&&(f[L]-=(null!==(r=f[L])&&void 0!==r?r:0)-((null!==(i=n.offsets.host[K])&&void 0!==i?i:0)-se)),Number(n.offsets.host[L])+Number(se)>(null!==(u=f[K])&&void 0!==u?u:0)&&(f[L]+=Number(n.offsets.host[L])+Number(se)-Number(f[K])),f=a0(f);const tt=cp(n.instance.target),it=parseFloat(tt[`margin${S}`])||0,ze=parseFloat(tt[`border${S}Width`])||0;let ot;if(Ie){const St=parseFloat(tt.borderRadius)||0,Kt=Number(it+ze+St);ot=L===Ie?Number(n.offsets.host[L])+Kt:Number(n.offsets.host[L])+Number(n.offsets.host[A]-Kt)}else ot=Number(n.offsets.host[L])+Number(n.offsets.host[A]/2-se/2);let It=ot-(null!==(c=f[L])&&void 0!==c?c:0)-it-ze;return It=Math.max(Math.min(f[A]-(se+5),It),0),n.offsets.arrow={[L]:Math.round(It),[H]:""},n.instance.arrow=y,n}function Hk(n){if(n.offsets.target=a0(n.offsets.target),!Zx(n.options,"flip"))return n.offsets.target=Object.assign(Object.assign({},n.offsets.target),PA(n.instance.target,n.offsets.host,n.placement)),n;const e=OA(n.instance.target,n.instance.host,0,"viewport",!1);let t=n.placement.split(" ")[0],r=n.placement.split(" ")[1]||"";const f=Wx("auto",n.offsets.host,n.instance.target,n.instance.host,n.options.allowedPositions),y=[t,f];return y.forEach((b,A)=>{var S,L,H,K,se,Ie,tt,it,ze,ot,It,St,Kt,hr,vr,li;if(t!==b||y.length===A+1)return;t=n.placement.split(" ")[0];const m0="left"===t&&Math.floor(null!==(S=n.offsets.target.right)&&void 0!==S?S:0)>Math.floor(null!==(L=n.offsets.host.left)&&void 0!==L?L:0)||"right"===t&&Math.floor(null!==(H=n.offsets.target.left)&&void 0!==H?H:0)<Math.floor(null!==(K=n.offsets.host.right)&&void 0!==K?K:0)||"top"===t&&Math.floor(null!==(se=n.offsets.target.bottom)&&void 0!==se?se:0)>Math.floor(null!==(Ie=n.offsets.host.top)&&void 0!==Ie?Ie:0)||"bottom"===t&&Math.floor(null!==(tt=n.offsets.target.top)&&void 0!==tt?tt:0)<Math.floor(null!==(it=n.offsets.host.bottom)&&void 0!==it?it:0),ch=Math.floor(null!==(ze=n.offsets.target.left)&&void 0!==ze?ze:0)<Math.floor(null!==(ot=e.left)&&void 0!==ot?ot:0),dl=Math.floor(null!==(It=n.offsets.target.right)&&void 0!==It?It:0)>Math.floor(null!==(St=e.right)&&void 0!==St?St:0),y0=Math.floor(null!==(Kt=n.offsets.target.top)&&void 0!==Kt?Kt:0)<Math.floor(null!==(hr=e.top)&&void 0!==hr?hr:0),_0=Math.floor(null!==(vr=n.offsets.target.bottom)&&void 0!==vr?vr:0)>Math.floor(null!==(li=e.bottom)&&void 0!==li?li:0),ht="left"===t&&ch||"right"===t&&dl||"top"===t&&y0||"bottom"===t&&_0,Et=-1!==["top","bottom"].indexOf(t),Nt=Et&&"left"===r&&ch||Et&&"right"===r&&dl||!Et&&"left"===r&&y0||!Et&&"right"===r&&_0;(m0||ht||Nt)&&((m0||ht)&&(t=y[A+1]),Nt&&(r=function Vk(n){return"right"===n?"left":"left"===n?"right":n}(r)),n.placement=t+(r?` ${r}`:""),n.offsets.target=Object.assign(Object.assign({},n.offsets.target),PA(n.instance.target,n.offsets.host,n.placement)))}),n}function zk(n){var e;if(!Zx(n.options,"preventOverflow"))return n;const t="transform",r=n.instance.target.style,{top:i,left:u,[t]:c}=r;r.top="",r.left="",r[t]="";const f=OA(n.instance.target,n.instance.host,0,(null===(e=n.options.modifiers.preventOverflow)||void 0===e?void 0:e.boundariesElement)||"scrollParent",!1);r.top=i,r.left=u,r[t]=c;const b={primary(A){var S,L,H,K;let se=n.offsets.target[A];return(null!==(S=n.offsets.target[A])&&void 0!==S?S:0)<(null!==(L=f[A])&&void 0!==L?L:0)&&(se=Math.max(null!==(H=n.offsets.target[A])&&void 0!==H?H:0,null!==(K=f[A])&&void 0!==K?K:0)),{[A]:se}},secondary(A){var S,L,H,K;const se="right"===A,Ie=se?"left":"top";let it=n.offsets.target[Ie];return(null!==(S=n.offsets.target[A])&&void 0!==S?S:0)>(null!==(L=f[A])&&void 0!==L?L:0)&&(it=Math.min(null!==(H=n.offsets.target[Ie])&&void 0!==H?H:0,(null!==(K=f[A])&&void 0!==K?K:0)-n.offsets.target[se?"width":"height"])),{[Ie]:it}}};return["left","right","top","bottom"].forEach(A=>{const S=-1!==["left","top","start"].indexOf(A)?b.primary:b.secondary;n.offsets.target=Object.assign(Object.assign({},n.offsets.target),S(A))}),n}function Wk(n){var e;const t=n.placement,r=t.split(" ")[0],i=t.split(" ")[1];if(i){const{host:u,target:c}=n.offsets,f=-1!==["bottom","top"].indexOf(r),y=f?"left":"top",b=f?"width":"height",A={start:{[y]:u[y]},end:{[y]:(null!==(e=u[y])&&void 0!==e?e:0)+u[b]-c[b]}};n.offsets.target=Object.assign(Object.assign({},c),{[y]:y===i?A.start[y]:A.end[y]})}return n}const Kk=new class qk{position(e,t){return this.offset(e,t)}offset(e,t){return Kx(t,e)}positionElements(e,t,r,i,u){const c=[Hk,Wk,zk,$k],y=function Gk(n,e,t,r){if(!n||!e)return;const i=Kx(n,e);!t.match(/^(auto)*\s*(left|right|top|bottom|start|end)*$/)&&!t.match(/^(left|right|top|bottom|start|end)*(?: (left|right|top|bottom|start|end))*$/)&&(t="auto");const u=!!t.match(/auto/g);let c=t.match(/auto\s(left|right|top|bottom|start|end)/)?t.split(" ")[1]||"auto":t;const f=c.match(/^(left|right|top|bottom|start|end)* ?(?!\1)(left|right|top|bottom|start|end)?/);return f&&(c=f[1]+(f[2]?` ${f[2]}`:"")),-1!==["left right","right left","top bottom","bottom top"].indexOf(c)&&(c="auto"),c=Wx(c,i,n,e,r?r.allowedPositions:void 0),{options:r||{modifiers:{}},instance:{target:n,host:e,arrow:void 0},offsets:{target:PA(n,i,c),host:i,arrow:void 0},positionFixed:!1,placement:c,placementAuto:u}}(t,e,bD[r],u);if(y)return c.reduce((b,A)=>A(b),y)}};function Zk(n,e,t,r,i,u){const c=Kk.positionElements(n,e,t,r,i);if(!c)return;const f=function Fk(n){var e,t,r,i;return{width:n.offsets.target.width,height:n.offsets.target.height,left:Math.floor(null!==(e=n.offsets.target.left)&&void 0!==e?e:0),top:Math.round(null!==(t=n.offsets.target.top)&&void 0!==t?t:0),bottom:Math.round(null!==(r=n.offsets.target.bottom)&&void 0!==r?r:0),right:Math.floor(null!==(i=n.offsets.target.right)&&void 0!==i?i:0)}}(c);Yx(e,{"will-change":"transform",top:"0px",left:"0px",transform:`translate3d(${f.left}px, ${f.top}px, 0px)`},u),c.instance.arrow&&Yx(c.instance.arrow,c.offsets.arrow,u),function jk(n,e){const t=n.instance.target;let r=t.className;const i=n0().isBs5?o0[n.placement]:n.placement;n.placementAuto&&(r=r.replace(/bs-popover-auto/g,`bs-popover-${i}`),r=r.replace(/ms-2|me-2|mb-2|mt-2/g,""),r=r.replace(/bs-tooltip-auto/g,`bs-tooltip-${i}`),r=r.replace(/\sauto/g,` ${i}`),-1!==r.indexOf("popover")&&(r=r+" "+function Bk(n){return n0().isBs5?CD(n,"end")?"ms-2":CD(n,"start")?"me-2":CD(n,"top")?"mb-2":CD(n,"bottom")?"mt-2":"":""}(i)),-1!==r.indexOf("popover")&&-1===r.indexOf("popover-auto")&&(r+=" popover-auto"),-1!==r.indexOf("tooltip")&&-1===r.indexOf("tooltip-auto")&&(r+=" tooltip-auto")),r=r.replace(/left|right|top|bottom|end|start/g,`${i.split(" ")[0]}`),e?e.setAttribute(t,"class",r):t.className=r}(c,u)}let Qx=(()=>{class n{constructor(t,r,i){this.update$$=new Ki.x,this.positionElements=new Map,this.isDisabled=!1,function An(n){return n===Ci}(i)&&t.runOutsideAngular(()=>{this.triggerEvent$=(0,VM.T)(wD(window,"scroll",{passive:!0}),wD(window,"resize",{passive:!0}),vt(0,Rk),this.update$$),this.triggerEvent$.subscribe(()=>{this.isDisabled||this.positionElements.forEach(u=>{Zk(TD(u.target),TD(u.element),u.attachment,u.appendToBody,this.options,r.createRenderer(null,null))})})})}position(t){this.addPositionElement(t)}get event$(){return this.triggerEvent$}disable(){this.isDisabled=!0}enable(){this.isDisabled=!1}addPositionElement(t){this.positionElements.set(TD(t.element),t)}calcPosition(){this.update$$.next(null)}deletePositionElement(t){this.positionElements.delete(TD(t))}setOptions(t){this.options=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.R0b),h.LFG(h.FYo),h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function TD(n){return"string"==typeof n?document.querySelector(n):n instanceof h.SBq?n.nativeElement:null!=n?n:null}class u0{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}class Yk{constructor(e,t,r,i,u,c,f,y){this._viewContainerRef=e,this._renderer=t,this._elementRef=r,this._injector=i,this._componentFactoryResolver=u,this._ngZone=c,this._applicationRef=f,this._posService=y,this.onBeforeShow=new h.vpe,this.onShown=new h.vpe,this.onBeforeHide=new h.vpe,this.onHidden=new h.vpe,this._providers=[],this._isHiding=!1,this.containerDefaultSelector="body",this._listenOpts={},this._globalListener=Function.prototype}get isShown(){return!this._isHiding&&!!this._componentRef}attach(e){return this._componentFactory=this._componentFactoryResolver.resolveComponentFactory(e),this}to(e){return this.container=e||this.container,this}position(e){return e?(this.attachment=e.attachment||this.attachment,this._elementRef=e.target||this._elementRef,this):this}provide(e){return this._providers.push(e),this}show(e={}){if(this._subscribePositioning(),this._innerComponent=void 0,!this._componentRef){this.onBeforeShow.emit(),this._contentRef=this._getContentRef(e.content,e.context,e.initialState);const t=h.zs3.create({providers:this._providers,parent:this._injector});if(!this._componentFactory)return;if(this._componentRef=this._componentFactory.create(t,this._contentRef.nodes),this._applicationRef.attachView(this._componentRef.hostView),this.instance=this._componentRef.instance,Object.assign(this._componentRef.instance,e),this.container instanceof h.SBq&&this.container.nativeElement.appendChild(this._componentRef.location.nativeElement),"string"==typeof this.container&&"undefined"!=typeof document){const r=document.querySelector(this.container)||document.querySelector(this.containerDefaultSelector);if(!r)return;r.appendChild(this._componentRef.location.nativeElement)}!this.container&&this._elementRef&&this._elementRef.nativeElement.parentElement&&this._elementRef.nativeElement.parentElement.appendChild(this._componentRef.location.nativeElement),this._contentRef.componentRef&&(this._innerComponent=this._contentRef.componentRef.instance,this._contentRef.componentRef.changeDetectorRef.markForCheck(),this._contentRef.componentRef.changeDetectorRef.detectChanges()),this._componentRef.changeDetectorRef.markForCheck(),this._componentRef.changeDetectorRef.detectChanges(),this.onShown.emit(e.id?{id:e.id}:this._componentRef.instance)}return this._registerOutsideClick(),this._componentRef}hide(e){var t,r,i,u,c,f;if(!this._componentRef)return this;this._posService.deletePositionElement(this._componentRef.location),this.onBeforeHide.emit(this._componentRef.instance);const y=this._componentRef.location.nativeElement;return null===(t=y.parentNode)||void 0===t||t.removeChild(y),null===(i=null===(r=this._contentRef)||void 0===r?void 0:r.componentRef)||void 0===i||i.destroy(),this._viewContainerRef&&(null===(u=this._contentRef)||void 0===u?void 0:u.viewRef)&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._contentRef.viewRef)),null===(f=null===(c=this._contentRef)||void 0===c?void 0:c.viewRef)||void 0===f||f.destroy(),this._contentRef=void 0,this._componentRef=void 0,this._removeGlobalListener(),this.onHidden.emit(e?{id:e}:null),this}toggle(){this.isShown?this.hide():this.show()}dispose(){this.isShown&&this.hide(),this._unsubscribePositioning(),this._unregisterListenersFn&&this._unregisterListenersFn()}listen(e){var t;this.triggers=e.triggers||this.triggers,this._listenOpts.outsideClick=e.outsideClick,this._listenOpts.outsideEsc=e.outsideEsc,e.target=e.target||(null===(t=this._elementRef)||void 0===t?void 0:t.nativeElement);const r=this._listenOpts.hide=()=>e.hide?e.hide():void this.hide(),i=this._listenOpts.show=c=>{e.show?e.show(c):this.show(c),c()};return this._renderer&&(this._unregisterListenersFn=function ck(n,e){const t=function Nx(n,e=lk){const t=(n||"").trim();if(0===t.length)return[];const r=t.split(/\s+/).map(u=>u.split(":")).map(u=>{const c=e[u[0]]||u;return new uk(c[0],c[1])}),i=r.filter(u=>u.isManual());if(i.length>1)throw new Error("Triggers parse error: only one manual trigger is allowed");if(1===i.length&&r.length>1)throw new Error("Triggers parse error: manual trigger can't be mixed with other triggers");return r}(e.triggers),r=e.target;if(1===t.length&&t[0].isManual())return Function.prototype;const i=[],u=[],c=()=>{u.forEach(f=>i.push(f())),u.length=0};return t.forEach(f=>{const y=f.open===f.close,b=y?e.toggle:e.show;if(!y&&f.close&&e.hide){const A=n.listen(r,f.close,e.hide);u.push(()=>A)}b&&i.push(n.listen(r,f.open,()=>b(c)))}),()=>{i.forEach(f=>f())}}(this._renderer,{target:e.target,triggers:e.triggers,show:i,hide:r,toggle:c=>{this.isShown?r():i(c)}})),this}_removeGlobalListener(){this._globalListener&&(this._globalListener(),this._globalListener=Function.prototype)}attachInline(e,t){return e&&t&&(this._inlineViewRef=e.createEmbeddedView(t)),this}_registerOutsideClick(){if(this._componentRef&&this._componentRef.location){if(this._listenOpts.outsideClick){const e=this._componentRef.location.nativeElement;setTimeout(()=>{this._renderer&&this._elementRef&&(this._globalListener=function dk(n,e){return e.outsideClick?n.listen("document","click",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[e,this._elementRef.nativeElement],outsideClick:this._listenOpts.outsideClick,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))})}this._listenOpts.outsideEsc&&this._renderer&&this._elementRef&&(this._globalListener=function hk(n,e){return e.outsideEsc?n.listen("document","keyup.esc",t=>{e.target&&e.target.contains(t.target)||e.targets&&e.targets.some(r=>r.contains(t.target))||e.hide&&e.hide()}):Function.prototype}(this._renderer,{targets:[this._componentRef.location.nativeElement,this._elementRef.nativeElement],outsideEsc:this._listenOpts.outsideEsc,hide:()=>this._listenOpts.hide&&this._listenOpts.hide()}))}}getInnerComponent(){return this._innerComponent}_subscribePositioning(){this._zoneSubscription||!this.attachment||(this.onShown.subscribe(()=>{var e;this._posService.position({element:null===(e=this._componentRef)||void 0===e?void 0:e.location,target:this._elementRef,attachment:this.attachment,appendToBody:"body"===this.container})}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>{!this._componentRef||this._posService.calcPosition()}))}_unsubscribePositioning(){!this._zoneSubscription||(this._zoneSubscription.unsubscribe(),this._zoneSubscription=void 0)}_getContentRef(e,t,r){if(!e)return new u0([]);if(e instanceof h.Rgc){if(this._viewContainerRef){const c=this._viewContainerRef.createEmbeddedView(e,t);return c.markForCheck(),new u0([c.rootNodes],c)}const u=e.createEmbeddedView({});return this._applicationRef.attachView(u),new u0([u.rootNodes],u)}if("function"==typeof e){const u=this._componentFactoryResolver.resolveComponentFactory(e),c=h.zs3.create({providers:this._providers,parent:this._injector}),f=u.create(c);return Object.assign(f.instance,r),this._applicationRef.attachView(f.hostView),new u0([[f.location.nativeElement]],f.hostView,f)}const i=this._renderer?[this._renderer.createText(`${e}`)]:[];return new u0([i])}}let Jx=(()=>{class n{constructor(t,r,i,u,c){this._componentFactoryResolver=t,this._ngZone=r,this._injector=i,this._posService=u,this._applicationRef=c}createLoader(t,r,i){return new Yk(r,i,t,this._injector,this._componentFactoryResolver,this._ngZone,this._applicationRef,this._posService)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h._Vd),h.LFG(h.R0b),h.LFG(h.zs3),h.LFG(Qx),h.LFG(h.z2F))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Qk=function(n){return{dropdown:n}},Jk=["*"],Xx=[ED({height:0,overflow:"hidden"}),function vk(n,e=null){return{type:4,styles:e,timings:n}}("220ms cubic-bezier(0, 0, 0.2, 1)",ED({height:"*",overflow:"hidden"}))];let dp=(()=>{class n{constructor(){this.direction="down",this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.stopOnClickPropagation=!1,this.isOpenChange=new h.vpe,this.isDisabledChange=new h.vpe,this.toggleClick=new h.vpe,this.counts=0,this.dropdownMenu=new Promise(t=>{this.resolveDropdownMenu=t})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),e1=(()=>{class n{constructor(t,r,i,u,c){this._state=t,this.cd=r,this._renderer=i,this._element=u,this.isOpen=!1,this._factoryDropDownAnimation=c.build(Xx),this._subscription=t.isOpenChange.subscribe(f=>{this.isOpen=f;const y=this._element.nativeElement.querySelector(".dropdown-menu");this._renderer.addClass(this._element.nativeElement.querySelector("div"),"open"),y&&!Um()&&(this._renderer.addClass(y,"show"),(y.classList.contains("dropdown-menu-right")||y.classList.contains("dropdown-menu-end"))&&(this._renderer.setStyle(y,"left","auto"),this._renderer.setStyle(y,"right","0")),"up"===this.direction&&(this._renderer.setStyle(y,"top","auto"),this._renderer.setStyle(y,"transform","translateY(-101%)"))),y&&this._state.isAnimated&&this._factoryDropDownAnimation.create(y).play(),this.cd.markForCheck(),this.cd.detectChanges()})}get direction(){return this._state.direction}_contains(t){return this._element.nativeElement.contains(t)}ngOnDestroy(){this._subscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(dp),h.Y36(h.sBO),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(vD))},n.\u0275cmp=h.Xpm({type:n,selectors:[["bs-dropdown-container"]],hostAttrs:[2,"display","block","position","absolute","z-index","1040"],ngContentSelectors:Jk,decls:2,vars:9,consts:[[3,"ngClass"]],template:function(t,r){1&t&&(h.F$t(),h.TgZ(0,"div",0),h.Hsn(1),h.qZA()),2&t&&(h.ekj("dropup","up"===r.direction)("show",r.isOpen)("open",r.isOpen),h.Q6J("ngClass",h.VKq(7,Qk,"down"===r.direction)))},directives:[Di],encapsulation:2,changeDetection:0}),n})(),eR=(()=>{class n{constructor(){this.autoClose=!0,this.insideClick=!1,this.isAnimated=!1,this.stopOnClickPropagation=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tR=(()=>{class n{constructor(t,r,i,u,c,f,y){this._elementRef=t,this._renderer=r,this._viewContainerRef=i,this._cis=u,this._state=c,this._config=f,this.dropup=!1,this._isInlineOpen=!1,this._isDisabled=!1,this._subscriptions=[],this._isInited=!1,this._state.autoClose=this._config.autoClose,this._state.insideClick=this._config.insideClick,this._state.isAnimated=this._config.isAnimated,this._state.stopOnClickPropagation=this._config.stopOnClickPropagation,this._factoryDropDownAnimation=y.build(Xx),this._dropdown=this._cis.createLoader(this._elementRef,this._viewContainerRef,this._renderer).provide({provide:dp,useValue:this._state}),this.onShown=this._dropdown.onShown,this.onHidden=this._dropdown.onHidden,this.isOpenChange=this._state.isOpenChange}set autoClose(t){this._state.autoClose=t}get autoClose(){return this._state.autoClose}set isAnimated(t){this._state.isAnimated=t}get isAnimated(){return this._state.isAnimated}set insideClick(t){this._state.insideClick=t}get insideClick(){return this._state.insideClick}set isDisabled(t){this._isDisabled=t,this._state.isDisabledChange.emit(t),t&&this.hide()}get isDisabled(){return this._isDisabled}get isOpen(){return this._showInline?this._isInlineOpen:this._dropdown.isShown}set isOpen(t){t?this.show():this.hide()}get isBs4(){return!Um()}get _showInline(){return!this.container}ngOnInit(){this._isInited||(this._isInited=!0,this._dropdown.listen({outsideClick:!1,triggers:this.triggers,show:()=>this.show()}),this._subscriptions.push(this._state.toggleClick.subscribe(t=>this.toggle(t))),this._subscriptions.push(this._state.isDisabledChange.pipe(Yi(t=>t)).subscribe(()=>this.hide())))}show(){if(!this.isOpen&&!this.isDisabled){if(this._showInline)return this._inlinedMenu||this._state.dropdownMenu.then(t=>{this._dropdown.attachInline(t.viewContainer,t.templateRef),this._inlinedMenu=this._dropdown._inlineViewRef,this.addBs4Polyfills(),this._inlinedMenu&&this._renderer.addClass(this._inlinedMenu.rootNodes[0].parentNode,"open"),this.playAnimation()}).catch(),this.addBs4Polyfills(),this._isInlineOpen=!0,this.onShown.emit(!0),this._state.isOpenChange.emit(!0),void this.playAnimation();this._state.dropdownMenu.then(t=>{const r=this.dropup||void 0!==this.dropup&&this.dropup;this._state.direction=r?"up":"down";const i=this.placement||(r?"top start":"bottom start");this._dropdown.attach(e1).to(this.container).position({attachment:i}).show({content:t.templateRef,placement:i}),this._state.isOpenChange.emit(!0)}).catch()}}hide(){!this.isOpen||(this._showInline?(this.removeShowClass(),this.removeDropupStyles(),this._isInlineOpen=!1,this.onHidden.emit(!0)):this._dropdown.hide(),this._state.isOpenChange.emit(!1))}toggle(t){return this.isOpen||!t?this.hide():this.show()}_contains(t){return this._elementRef.nativeElement.contains(t.target)||this._dropdown.instance&&this._dropdown.instance._contains(t.target)}navigationClick(t){const r=this._elementRef.nativeElement.querySelector(".dropdown-menu");if(!r)return;const i=this._elementRef.nativeElement.ownerDocument.activeElement,u=r.querySelectorAll(".dropdown-item");switch(t.keyCode){case 38:this._state.counts>0&&u[--this._state.counts].focus();break;case 40:this._state.counts+1<u.length&&(i.classList!==u[this._state.counts].classList?u[this._state.counts].focus():u[++this._state.counts].focus())}t.preventDefault()}ngOnDestroy(){for(const t of this._subscriptions)t.unsubscribe();this._dropdown.dispose()}addBs4Polyfills(){Um()||(this.addShowClass(),this.checkRightAlignment(),this.addDropupStyles())}playAnimation(){this._state.isAnimated&&this._inlinedMenu&&setTimeout(()=>{this._inlinedMenu&&this._factoryDropDownAnimation.create(this._inlinedMenu.rootNodes[0]).play()})}addShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.addClass(this._inlinedMenu.rootNodes[0],"show")}removeShowClass(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&this._renderer.removeClass(this._inlinedMenu.rootNodes[0],"show")}checkRightAlignment(){if(this._inlinedMenu&&this._inlinedMenu.rootNodes[0]){const t=this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-right")||this._inlinedMenu.rootNodes[0].classList.contains("dropdown-menu-end");this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"left",t?"auto":"0"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"right",t?"0":"auto")}}addDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"top",this.dropup?"auto":"100%"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"transform",this.dropup?"translateY(-101%)":"translateY(0)"),this._renderer.setStyle(this._inlinedMenu.rootNodes[0],"bottom","auto"))}removeDropupStyles(){this._inlinedMenu&&this._inlinedMenu.rootNodes[0]&&(this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"top"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"transform"),this._renderer.removeStyle(this._inlinedMenu.rootNodes[0],"bottom"))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(h.s_b),h.Y36(Jx),h.Y36(dp),h.Y36(eR),h.Y36(vD))},n.\u0275dir=h.lG2({type:n,selectors:[["","bsDropdown",""],["","dropdown",""]],hostVars:6,hostBindings:function(t,r){1&t&&h.NdJ("keydown.arrowDown",function(u){return r.navigationClick(u)})("keydown.arrowUp",function(u){return r.navigationClick(u)}),2&t&&h.ekj("dropup",r.dropup)("open",r.isOpen)("show",r.isOpen&&r.isBs4)},inputs:{placement:"placement",triggers:"triggers",container:"container",dropup:"dropup",autoClose:"autoClose",isAnimated:"isAnimated",insideClick:"insideClick",isDisabled:"isDisabled",isOpen:"isOpen"},outputs:{isOpenChange:"isOpenChange",onShown:"onShown",onHidden:"onHidden"},exportAs:["bs-dropdown"],features:[h._Bn([dp])]}),n})(),t1=(()=>{class n{constructor(t,r,i){t.resolveDropdownMenu({templateRef:i,viewContainer:r})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(dp),h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","bsDropdownMenu",""],["","dropdownMenu",""]],exportAs:["bs-dropdown-menu"]}),n})(),n1=(()=>{class n{constructor(t,r,i,u,c){this._changeDetectorRef=t,this._dropdown=r,this._element=i,this._renderer=u,this._state=c,this.isOpen=!1,this._subscriptions=[],this._subscriptions.push(this._state.isOpenChange.subscribe(f=>{this.isOpen=f,f?(this._documentClickListener=this._renderer.listen("document","click",y=>{this._state.autoClose&&2!==y.button&&!this._element.nativeElement.contains(y.target)&&(!this._state.insideClick||!this._dropdown._contains(y))&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())}),this._escKeyUpListener=this._renderer.listen(this._element.nativeElement,"keyup.esc",()=>{this._state.autoClose&&(this._state.toggleClick.emit(!1),this._changeDetectorRef.detectChanges())})):(this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener())})),this._subscriptions.push(this._state.isDisabledChange.subscribe(f=>this.isDisabled=f||void 0))}onClick(t){this._state.stopOnClickPropagation&&t.stopPropagation(),!this.isDisabled&&this._state.toggleClick.emit(!0)}ngOnDestroy(){this._documentClickListener&&this._documentClickListener(),this._escKeyUpListener&&this._escKeyUpListener();for(const t of this._subscriptions)t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.sBO),h.Y36(tR),h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(dp))},n.\u0275dir=h.lG2({type:n,selectors:[["","bsDropdownToggle",""],["","dropdownToggle",""]],hostVars:3,hostBindings:function(t,r){1&t&&h.NdJ("click",function(u){return r.onClick(u)}),2&t&&h.uIk("aria-haspopup",!0)("disabled",r.isDisabled)("aria-expanded",r.isOpen)},exportAs:["bs-dropdown-toggle"]}),n})(),r1=(()=>{class n{static forRoot(){return{ngModule:n,providers:[Jx,Qx,dp]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[zi]]}),n})();var nR=P(655);function i1(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",2),h.NdJ("click",function(){return h.CHM(t),h.oxw(2).close()}),h.TgZ(1,"span",3),h._uU(2,"\xd7"),h.qZA(),h.TgZ(3,"span",4),h._uU(4,"Close"),h.qZA()()}}function s1(n,e){if(1&n&&(h.TgZ(0,"div",1),h.YNc(1,i1,5,0,"ng-template",0),h.Hsn(2),h.qZA()),2&n){const t=h.oxw();h.Tol("alert alert-"+t.type),h.Q6J("ngClass",t.classes),h.xp6(1),h.Q6J("ngIf",t.dismissible)}}const o1=["*"];let rR=(()=>{class n{constructor(){this.type="warning",this.dismissible=!1,this.dismissOnTimeout=void 0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),a1=(()=>{class n{constructor(t,r){this.changeDetection=r,this.type="warning",this.dismissible=!1,this.isOpen=!0,this.onClose=new h.vpe,this.onClosed=new h.vpe,this.classes="",this.dismissibleChange=new h.vpe,Object.assign(this,t),this.dismissibleChange.subscribe(()=>{this.classes=this.dismissible?"alert-dismissible":"",this.changeDetection.markForCheck()})}ngOnInit(){this.dismissOnTimeout&&setTimeout(()=>this.close(),parseInt(this.dismissOnTimeout,10))}close(){!this.isOpen||(this.onClose.emit(this),this.isOpen=!1,this.changeDetection.markForCheck(),this.onClosed.emit(this))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(rR),h.Y36(h.sBO))},n.\u0275cmp=h.Xpm({type:n,selectors:[["alert"],["bs-alert"]],inputs:{type:"type",dismissible:"dismissible",dismissOnTimeout:"dismissOnTimeout",isOpen:"isOpen"},outputs:{onClose:"onClose",onClosed:"onClosed"},ngContentSelectors:o1,decls:1,vars:1,consts:[[3,"ngIf"],["role","alert",3,"ngClass"],["type","button","aria-label","Close",1,"close","btn-close",3,"click"],["aria-hidden","true",1,"visually-hidden"],[1,"sr-only","visually-hidden"]],template:function(t,r){1&t&&(h.F$t(),h.YNc(0,s1,3,4,"ng-template",0)),2&t&&h.Q6J("ngIf",r.isOpen)},directives:[Or,Di],encapsulation:2,changeDetection:0}),(0,nR.gn)([mk(),(0,nR.w6)("design:type",Object)],n.prototype,"dismissible",void 0),n})(),u1=(()=>{class n{static forRoot(){return{ngModule:n,providers:[]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[zi]]}),n})();function l1(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div",9)(1,"input",10),h.NdJ("change",function(){h.CHM(t);const i=h.oxw().$implicit;return h.oxw(2).onRadioCheckeded(i)}),h.qZA(),h._uU(2),h.qZA()}if(2&n){const t=h.oxw().$implicit;h.xp6(2),h.hij(" ",t.name," ")}}function c1(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"div")(1,"input",11),h.NdJ("change",function(){h.CHM(t);const i=h.oxw().$implicit;return h.oxw(2).onRadioCheckeded(i)})("change",function(){return h.CHM(t),h.oxw(3).showCompleteAlert()}),h.qZA(),h._uU(2),h.qZA()}if(2&n){const t=h.oxw().$implicit;h.xp6(2),h.hij(" ",t.name," ")}}function d1(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"ul",12)(1,"li",13)(2,"a",14),h.NdJ("click",function(){h.CHM(t);const i=h.oxw().$implicit,u=h.oxw().ngIf;return h.oxw().onTaskDeleteed(i,u)}),h._uU(3,"Delete task"),h.qZA()()()}}function h1(n,e){if(1&n&&(h.TgZ(0,"li",4),h.YNc(1,l1,3,1,"div",5),h.YNc(2,c1,3,1,"div",0),h.TgZ(3,"div",6)(4,"button",7),h._uU(5," ... "),h.qZA(),h.YNc(6,d1,4,0,"ul",8),h.qZA()()),2&n){const t=e.$implicit;h.xp6(1),h.Q6J("ngIf",1==t.radio),h.xp6(1),h.Q6J("ngIf",0==t.radio)}}function f1(n,e){if(1&n&&(h.TgZ(0,"div")(1,"ul"),h.YNc(2,h1,7,2,"li",3),h.qZA()()),2&n){const t=e.ngIf;h.xp6(2),h.Q6J("ngForOf",t)}}let p1=(()=>{class n{constructor(t,r,i,u){this._getsAllAddtaskDto=t,this.router=r,this._setsAddtaskDto=i,this._removesAddtaskDto=u,this.taskList$=this._getsAllAddtaskDto.getAll().pipe((0,jt.U)(c=>c.sort((f,y)=>f.count-y.count))),this.deleteAlert=!1,this.completeAlert=!1,this.dismissible=!0}onRadioCheckeded(t){1==t.radio&&this._setsAddtaskDto.set({id:t.id,name:t.name,radio:!1,count:t.count}),0==t.radio&&this._setsAddtaskDto.set({id:t.id,name:t.name,radio:!0,count:t.count})}onTaskDeleteed(t,r){confirm("Are you sure you want to delete this task?")&&(this._removesAddtaskDto.remove(t.id),this.deleteAlert=!0,r.length-1<1&&this.router.navigate(["/"]))}showCompleteAlert(){this.completeAlert=!0}close(){this.deleteAlert=!1,this.completeAlert=!1}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Mx),h.Y36(Pi),h.Y36(xx),h.Y36(Rx))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-task-list"]],features:[h._Bn([{provide:eR,useValue:{isAnimated:!0,autoClose:!0}}])],decls:8,vars:7,consts:[[4,"ngIf"],["type","success",3,"dismissible","isOpen","onClose"],[1,"alert-heading"],["class","header",4,"ngFor","ngForOf"],[1,"header"],["class","text-decoration-line-through",4,"ngIf"],["dropdown","",1,"btn-group","dots","bg-hover-medium"],["id","button-basic","dropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","btn-white","fw-bold"],["id","dropdown-basic","class","dropdown-menu bg-hover-light","role","menu","aria-labelledby","button-basic",4,"dropdownMenu"],[1,"text-decoration-line-through"],["type","checkbox","value","","checked","",1,"form-check-input","rounded-circle","border-light","border-1","bg-purple",3,"change"],["type","checkbox","value","",1,"form-check-input","rounded-circle","border-purple","border-1","hover",3,"change"],["id","dropdown-basic","role","menu","aria-labelledby","button-basic",1,"dropdown-menu","bg-hover-light"],["role","menuitem"],[1,"dropdown-item","bg-hover-light",3,"click"]],template:function(t,r){1&t&&(h.YNc(0,f1,3,1,"div",0),h.ALo(1,"async"),h.TgZ(2,"alert",1),h.NdJ("onClose",function(){return r.close()}),h.TgZ(3,"h4",2),h._uU(4,"Task deleted"),h.qZA()(),h.TgZ(5,"alert",1),h.NdJ("onClose",function(){return r.close()}),h.TgZ(6,"h4",2),h._uU(7,"Task completed!"),h.qZA()()),2&t&&(h.Q6J("ngIf",h.lcZ(1,5,r.taskList$)),h.xp6(2),h.Q6J("dismissible",r.dismissible)("isOpen",r.deleteAlert),h.xp6(3),h.Q6J("dismissible",r.dismissible)("isOpen",r.completeAlert))},directives:[Or,ir,tR,n1,t1,a1],pipes:[$c],encapsulation:2,changeDetection:0}),n})(),iR=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),hp=(()=>{class n extends iR{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const ll=new h.OlP("NgValueAccessor"),y1={provide:ll,useExisting:(0,h.Gpc)(()=>AD),multi:!0},v1=new h.OlP("CompositionEventMode");let AD=(()=>{class n extends iR{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _1(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(v1,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([y1]),h.qOj]}),n})();function sh(n){return null==n||0===n.length}function oR(n){return null!=n&&"number"==typeof n.length}const os=new h.OlP("NgValidators"),oh=new h.OlP("NgAsyncValidators"),E1=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class w1{static min(e){return function aR(n){return e=>{if(sh(e.value)||sh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function uR(n){return e=>{if(sh(e.value)||sh(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function lR(n){return sh(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function cR(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function dR(n){return sh(n.value)||E1.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function hR(n){return e=>sh(e.value)||!oR(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function fR(n){return e=>oR(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function pR(n){if(!n)return SD;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(sh(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return ER(e)}static composeAsync(e){return wR(e)}}function SD(n){return null}function gR(n){return null!=n}function mR(n){const e=(0,h.QGY)(n)?(0,On.D)(n):n;return(0,h.CqO)(e),e}function yR(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function _R(n,e){return e.map(t=>t(n))}function vR(n){return n.map(e=>function b1(n){return!n.validate}(e)?e:t=>e.validate(t))}function ER(n){if(!n)return null;const e=n.filter(gR);return 0==e.length?null:function(t){return yR(_R(t,e))}}function kA(n){return null!=n?ER(vR(n)):null}function wR(n){if(!n)return null;const e=n.filter(gR);return 0==e.length?null:function(t){return function g1(...n){const e=(0,Ir.jO)(n),{args:t,keys:r}=gs(n),i=new or.y(u=>{const{length:c}=t;if(!c)return void u.complete();const f=new Array(c);let y=c,b=c;for(let A=0;A<c;A++){let S=!1;(0,ys.Xf)(t[A]).subscribe((0,Pn.x)(u,L=>{S||(S=!0,b--),f[A]=L},()=>y--,void 0,()=>{(!y||!S)&&(b||u.next(r?Ba(r,f):f),u.complete())}))}});return e?i.pipe(ta(e)):i}(_R(t,e).map(mR)).pipe((0,jt.U)(yR))}}function FA(n){return null!=n?wR(vR(n)):null}function bR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function DR(n){return n._rawValidators}function IR(n){return n._rawAsyncValidators}function LA(n){return n?Array.isArray(n)?n:[n]:[]}function MD(n,e){return Array.isArray(n)?n.includes(e):n===e}function CR(n,e){const t=LA(e);return LA(n).forEach(i=>{MD(t,i)||t.push(i)}),t}function TR(n,e){return LA(e).filter(t=>!MD(n,t))}class AR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kA(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ah extends AR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Rs extends AR{get formDirective(){return null}get path(){return null}}class SR{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let MR=(()=>{class n extends SR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ah,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),xR=(()=>{class n extends SR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Rs,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function l0(n,e){BA(n,e),e.valueAccessor.writeValue(n.value),function x1(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&NR(n,e)})}(n,e),function N1(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function R1(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&NR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function M1(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ND(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),PD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function OD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function BA(n,e){const t=DR(n);null!==e.validator?n.setValidators(bR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=IR(n);null!==e.asyncValidator?n.setAsyncValidators(bR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();OD(e._rawValidators,i),OD(e._rawAsyncValidators,i)}function PD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=DR(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=IR(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return OD(e._rawValidators,r),OD(e._rawAsyncValidators,r),t}function NR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function HA(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const c0="VALID",kD="INVALID",Bm="PENDING",d0="DISABLED";function zA(n){return(FD(n)?n.validators:n)||null}function FR(n){return Array.isArray(n)?kA(n):n||null}function WA(n,e){return(FD(e)?e.asyncValidators:n)||null}function LR(n){return Array.isArray(n)?FA(n):n||null}function FD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const VR=n=>n instanceof ZA,qA=n=>n instanceof LD;function UR(n){return VR(n)?n.value:n.getRawValue()}function BR(n,e){const t=qA(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function jR(n,e){qA(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new h.vHH(1002,"")})}class KA{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=FR(this._rawValidators),this._composedAsyncValidatorFn=LR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===c0}get invalid(){return this.status===kD}get pending(){return this.status==Bm}get disabled(){return this.status===d0}get enabled(){return this.status!==d0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=FR(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=LR(e)}addValidators(e){this.setValidators(CR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(CR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(TR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(TR(e,this._rawAsyncValidators))}hasValidator(e){return MD(this._rawValidators,e)}hasAsyncValidator(e){return MD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Bm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=d0,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=c0,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===c0||this.status===Bm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?d0:c0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Bm,this._hasOwnPendingAsyncValidator=!0;const t=mR(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function F1(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=qA(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof V1)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?d0:this.errors?kD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bm)?Bm:this._anyControlsHaveStatus(kD)?kD:c0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){FD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ZA extends KA{constructor(e=null,t,r){super(zA(t),WA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),FD(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){HA(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){HA(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class LD extends KA{constructor(e,t,r){super(zA(t),WA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){jR(this,e),Object.keys(e).forEach(r=>{BR(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=UR(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class V1 extends KA{constructor(e,t,r){super(zA(t),WA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){jR(this,e),e.forEach((r,i)=>{BR(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>UR(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let WR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),KR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const QA=new h.OlP("NgModelWithFormControlWarning"),q1={provide:Rs,useExisting:(0,h.Gpc)(()=>VD)};let VD=(()=>{class n extends Rs{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(PD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return l0(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ND(t.control||null,t,!1),HA(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function kR(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ND(r||null,t),VR(i)&&(l0(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function OR(n,e){BA(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function O1(n,e){return PD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){BA(this.form,this),this._oldForm&&PD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(os,10),h.Y36(oh,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([q1]),h.qOj,h.TTD]}),n})();const Y1={provide:ah,useExisting:(0,h.Gpc)(()=>eS)};let eS=(()=>{class n extends ah{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function $A(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===AD?t=u:function k1(n){return Object.getPrototypeOf(n.constructor)===hp}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function jA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function RD(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Rs,13),h.Y36(os,10),h.Y36(oh,10),h.Y36(ll,10),h.Y36(QA,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([Y1]),h.qOj,h.TTD]}),n})(),hF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[KR]]}),n})(),fF=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:QA,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[hF]}),n})();const cN=new h.OlP("ADDS_ADDTASK_DTO");let dN=(()=>{class n{constructor(t,r){this._addsAddtaskDto=t,this.router=r,this.addTask=new LD({name:new ZA("",[w1.required])})}onAddTaskSubmited(t){var r;t.invalid||(this._addsAddtaskDto.add({name:null===(r=null==t?void 0:t.get("name"))||void 0===r?void 0:r.value,radio:!1,count:Date.now()}),this.addTask.reset(),this.router.navigate(["/tasks"]))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(cN),h.Y36(Pi))},n.\u0275cmp=h.Xpm({type:n,selectors:[["lib-addtask"]],decls:9,vars:2,consts:[[1,"px-4","py-5","my-5","text-center",3,"formGroup","ngSubmit"],["type","text","formControlName","name","placeholder","What is your task?",2,"height","200px","width","650px"],["type","submit","value","Add Task",1,"btn","bg-purple","text-white",3,"disabled"],["routerLink","/","role","button",1,"btn","bg-purple","text-white"]],template:function(t,r){1&t&&(h.TgZ(0,"form",0),h.NdJ("ngSubmit",function(){return r.onAddTaskSubmited(r.addTask)}),h._UZ(1,"input",1),h.TgZ(2,"div"),h._UZ(3,"br")(4,"input",2)(5,"br")(6,"br"),h.TgZ(7,"a",3),h._uU(8,"No task to add"),h.qZA()()()),2&t&&(h.Q6J("formGroup",r.addTask),h.xp6(4),h.Q6J("disabled",r.addTask.invalid))},directives:[WR,xR,VD,AD,MR,eS,Zl],encapsulation:2,changeDetection:0}),n})(),pF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-task-list-page"]],decls:8,vars:0,consts:[[1,"d-grid","gap-2","d-sm-flex","justify-content-sm-center"],["routerLink","/","role","button",1,"btn","bg-purple","text-white"]],template:function(t,r){1&t&&(h._UZ(0,"lib-view-date")(1,"br")(2,"lib-task-list")(3,"br")(4,"lib-addtask"),h.TgZ(5,"div",0)(6,"a",1),h._uU(7,"Home page"),h.qZA()())},directives:[wy,p1,dN,Zl],encapsulation:2,changeDetection:0}),n})(),iS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zi,fF,pa]]}),n})(),f0=(()=>{class n{constructor(t){this._client=t}add(t){this._client.collection("tasks").add(t)}getAll(t){return this._client.collection("tasks").valueChanges({idField:"id"}).pipe((0,jt.U)(r=>Ax(r,t)))}remove(t){this._client.doc("tasks/"+t).delete()}set(t){this._client.doc("tasks/"+t.id).update(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(DA))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),sS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[f0,{provide:cN,useExisting:f0},{provide:Mx,useExisting:f0},{provide:xx,useExisting:f0},{provide:Rx,useExisting:f0}],imports:[[Tx]]}),n})(),gF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[rR],imports:[[zi,r1.forRoot(),u1]]}),n})(),mF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zi,pa.forChild([{path:"",component:pF}]),iS,sS,iS,gF,CA]]}),n})(),yF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-new-task-page"]],decls:9,vars:0,consts:[[1,"d-grid","gap-2","d-sm-flex","justify-content-sm-center"],["routerLink","/","role","button",1,"btn","bg-purple","text-white"]],template:function(t,r){1&t&&(h._UZ(0,"lib-view-date")(1,"lib-addtask")(2,"br")(3,"br")(4,"lib-images")(5,"br"),h.TgZ(6,"div",0)(7,"a",1),h._uU(8,"Home page"),h.qZA()())},directives:[wy,dN,z0,Zl],encapsulation:2,changeDetection:0}),n})(),_F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[],imports:[[zi,pa.forChild([{path:"",component:yF}]),qp,IA,iS,sS,CA]]}),n})();const vF=[{path:"",loadChildren:()=>ak},{path:"tasks",loadChildren:()=>mF},{path:"newtask",loadChildren:()=>_F}];let EF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[pa.forRoot(vF)],pa]}),n})(),wF=(()=>{class n{constructor(){this.title="TODO-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:8,vars:0,consts:[[1,"container-fluid","text-white","header","bg-purple"],[1,"display-6","fw-bold"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"p",1),h._uU(2,"TODO-APP by Iltur"),h.qZA()(),h._UZ(3,"br")(4,"br")(5,"br")(6,"br")(7,"router-outlet"))},directives:[Gl],styles:[".body[_ngcontent-%COMP%]{margin:0;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);background-color:var(--bs-body-bg);-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}.header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;padding:4px 166px;position:absolute;width:100%;height:6%;left:0px;top:0px}.text[_ngcontent-%COMP%]{font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);text-align:var(--bs-body-text-align)}.bg-purple[_ngcontent-%COMP%]{background-color:#7749f8!important}"]}),n})();const un=!1;function hN(n){return new h.vHH(3e3,un)}function tL(){return"undefined"!=typeof window&&void 0!==window.document}function oS(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function uh(n){switch(n.length){case 0:return new r0;case 1:return n[0];default:return new Lx(n)}}function fN(n,e,t,r,i={},u={}){const c=[],f=[];let y=-1,b=null;if(r.forEach(A=>{const S=A.offset,L=S==y,H=L&&b||{};Object.keys(A).forEach(K=>{let se=K,Ie=A[K];if("offset"!==K)switch(se=e.normalizePropertyName(se,c),Ie){case"!":Ie=i[K];break;case Uc:Ie=u[K];break;default:Ie=e.normalizeStyleValue(K,se,Ie,c)}H[se]=Ie}),L||f.push(H),b=H,y=S}),c.length)throw function GF(n){return new h.vHH(3502,un)}();return f}function aS(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&uS(t,"start",n)));break;case"done":n.onDone(()=>r(t&&uS(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&uS(t,"destroy",n)))}}function uS(n,e,t){const r=t.totalTime,u=lS(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function lS(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Oo(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function pN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let cS=(n,e)=>!1,gN=(n,e,t)=>[],mN=null;function dS(n){const e=n.parentNode||n.host;return e===mN?null:e}(oS()||"undefined"!=typeof Element)&&(tL()?(mN=(()=>document.documentElement)(),cS=(n,e)=>{for(;e;){if(e===n)return!0;e=dS(e)}return!1}):cS=(n,e)=>n.contains(e),gN=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let pp=null,yN=!1;function _N(n){pp||(pp=function rL(){return"undefined"!=typeof document?document.body:null}()||{},yN=!!pp.style&&"WebkitAppearance"in pp.style);let e=!0;return pp.style&&!function nL(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in pp.style,!e&&yN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in pp.style)),e}const vN=cS,EN=gN;let wN=(()=>{class n{validateStyleProperty(t){return _N(t)}matchesElement(t,r){return!1}containsElement(t,r){return vN(t,r)}getParentElement(t){return dS(t)}query(t,r,i){return EN(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,f=[],y){return new r0(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),hS=(()=>{class n{}return n.NOOP=new wN,n})();const fS="ng-enter",BD="ng-leave",jD="ng-trigger",$D=".ng-trigger",DN="ng-animating",pS=".ng-animating";function gp(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:gS(parseFloat(e[1]),e[2])}function gS(n,e){return"s"===e?1e3*n:n}function HD(n,e,t){return n.hasOwnProperty("duration")?n:function oL(n,e,t){let i,u=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(hN()),{duration:0,delay:0,easing:""};i=gS(parseFloat(f[1]),f[2]);const y=f[3];null!=y&&(u=gS(parseFloat(y),f[4]));const b=f[5];b&&(c=b)}else i=n;if(!t){let f=!1,y=e.length;i<0&&(e.push(function bF(){return new h.vHH(3100,un)}()),f=!0),u<0&&(e.push(function DF(){return new h.vHH(3101,un)}()),f=!0),f&&e.splice(y,0,hN())}return{duration:i,delay:u,easing:c}}(n,e,t)}function jm(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function lh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else jm(n,t);return t}function CN(n,e,t){return t?e+":"+t+";":""}function TN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=CN(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=CN(0,lL(t),n.style[t]));n.setAttribute("style",e)}function cl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=yS(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),oS()&&TN(n))}function mp(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=yS(t);n.style[r]=""}),oS()&&TN(n))}function p0(n){return Array.isArray(n)?1==n.length?n[0]:kx(n):n}const mS=new RegExp("{{\\s*(.+?)\\s*}}","g");function AN(n){let e=[];if("string"==typeof n){let t;for(;t=mS.exec(n);)e.push(t[1]);mS.lastIndex=0}return e}function GD(n,e,t){const r=n.toString(),i=r.replace(mS,(u,c)=>{let f=e[c];return e.hasOwnProperty(c)||(t.push(function CF(n){return new h.vHH(3003,un)}()),f=""),f.toString()});return i==r?n:i}function zD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const uL=/-+([a-z0-9])/g;function yS(n){return n.replace(uL,(...e)=>e[1].toUpperCase())}function lL(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Po(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function TF(n){return new h.vHH(3004,un)}()}}function SN(n,e){return window.getComputedStyle(n)[e]}function gL(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function mL(n,e,t){if(":"==n[0]){const y=function yL(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function BF(n){return new h.vHH(3016,un)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function UF(n){return new h.vHH(3015,un)}()),e;const i=r[1],u=r[2],c=r[3];e.push(MN(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(MN(c,i))}(r,t,e)):t.push(n),t}const ZD=new Set(["true","1"]),YD=new Set(["false","0"]);function MN(n,e){const t=ZD.has(n)||YD.has(n),r=ZD.has(e)||YD.has(e);return(i,u)=>{let c="*"==n||n==i,f="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?ZD.has(n):YD.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?ZD.has(e):YD.has(e)),c&&f}}const _L=new RegExp("s*:selfs*,?","g");function _S(n,e,t,r){return new vL(n).build(e,t,r)}class vL{constructor(e){this._driver=e}build(e,t,r){const i=new bL(t);this._resetContextStyleTimingState(i);const u=Po(this,p0(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function SF(){return new h.vHH(3006,un)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const y=f,b=y.name;b.toString().split(/\s*,\s*/).forEach(A=>{y.name=A,u.push(this.visitState(y,t))}),y.name=b}else if(1==f.type){const y=this.visitTransition(f,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function MF(){return new h.vHH(3007,un)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(f=>{if(QD(f)){const y=f;Object.keys(y).forEach(b=>{AN(y[b]).forEach(A=>{c.hasOwnProperty(A)||u.add(A)})})}}),u.size&&(zD(u.values()),t.errors.push(function xF(n,e){return new h.vHH(3008,un)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Po(this,p0(e.animation),t);return{type:1,matchers:gL(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:yp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Po(this,r,t)),options:yp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const f=Po(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:u,options:yp(e.options)}}visitAnimate(e,t){const r=function IL(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return vS(HD(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=vS(0,0,"");return u.dynamic=!0,u.strValue=r,u}return t=t||HD(r,e),vS(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:ED({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,f=!1;if(!c){f=!0;const b={};r.easing&&(b.easing=r.easing),c=ED(b)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=f,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Uc?r.push(c):t.errors.push(function RF(n){return new h.vHH(3002,un)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(QD(c)){const f=c,y=f.easing;if(y&&(u=y,delete f.easing),!i)for(let b in f)if(f[b].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(f=>{if(!this._driver.validateStyleProperty(f))return delete c[f],void t.unsupportedCSSPropertiesFound.add(f);const y=t.collectedStyles[t.currentQuerySelector],b=y[f];let A=!0;b&&(u!=i&&u>=b.startTime&&i<=b.endTime&&(t.errors.push(function NF(n,e,t,r,i){return new h.vHH(3010,un)}()),A=!1),u=b.startTime),A&&(y[f]={startTime:u,endTime:i}),t.options&&function aL(n,e,t){const r=e.params||{},i=AN(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function IF(n){return new h.vHH(3001,un)}())})}(c[f],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function OF(){return new h.vHH(3011,un)}()),r;let u=0;const c=[];let f=!1,y=!1,b=0;const A=e.steps.map(tt=>{const it=this._makeStyleAst(tt,t);let ze=null!=it.offset?it.offset:function DL(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(QD(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(QD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(it.styles),ot=0;return null!=ze&&(u++,ot=it.offset=ze),y=y||ot<0||ot>1,f=f||ot<b,b=ot,c.push(ot),it});y&&t.errors.push(function PF(){return new h.vHH(3012,un)}()),f&&t.errors.push(function kF(){return new h.vHH(3200,un)}());const S=e.steps.length;let L=0;u>0&&u<S?t.errors.push(function FF(){return new h.vHH(3202,un)}()):0==u&&(L=1/(S-1));const H=S-1,K=t.currentTime,se=t.currentAnimateTimings,Ie=se.duration;return A.forEach((tt,it)=>{const ze=L>0?it==H?1:L*it:c[it],ot=ze*Ie;t.currentTime=K+se.delay+ot,se.duration=ot,this._validateStyleAst(tt,t),tt.offset=ze,r.styles.push(tt)}),r}visitReference(e,t){return{type:8,animation:Po(this,p0(e.animation),t),options:yp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:yp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:yp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function EL(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(_L,"")),n=n.replace(/@\*/g,$D).replace(/@\w+/g,t=>$D+"-"+t.substr(1)).replace(/:animating/g,pS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Oo(t.collectedStyles,t.currentQuerySelector,{});const f=Po(this,p0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:yp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function LF(){return new h.vHH(3013,un)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:HD(e.timings,t.errors,!0);return{type:12,animation:Po(this,p0(e.animation),t),timings:r,options:null}}}class bL{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function QD(n){return!Array.isArray(n)&&"object"==typeof n}function yp(n){return n?(n=jm(n)).params&&(n.params=function wL(n){return n?jm(n):null}(n.params)):n={},n}function vS(n,e,t){return{duration:n,delay:e,easing:t}}function ES(n,e,t,r,i,u,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:f}}class JD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const AL=new RegExp(":enter","g"),ML=new RegExp(":leave","g");function wS(n,e,t,r,i,u={},c={},f,y,b=[]){return(new xL).buildKeyframes(n,e,t,r,i,u,c,f,y,b)}class xL{buildKeyframes(e,t,r,i,u,c,f,y,b,A=[]){b=b||new JD;const S=new bS(e,t,b,i,u,A,[]);S.options=y,S.currentTimeline.setStyles([c],null,S.errors,y),Po(this,r,S);const L=S.timelines.filter(H=>H.containsAnimation());if(Object.keys(f).length){let H;for(let K=L.length-1;K>=0;K--){const se=L[K];if(se.element===t){H=se;break}}H&&!H.allowOnlyTimelineStyles()&&H.setStyles([f],null,S.errors,y)}return L.length?L.map(H=>H.buildKeyframes()):[ES(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?gp(r.duration):null,f=null!=r.delay?gp(r.delay):null;return 0!==c&&e.forEach(y=>{const b=t.appendInstructionToTimeline(y,c,f);u=Math.max(u,b.duration+b.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Po(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=XD);const c=gp(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Po(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?gp(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),Po(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return HD(t.params?GD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(y=>{f.forwardTime((y.offset||0)*u),f.setStyles(y.styles,y.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?gp(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=XD);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let y=null;f.forEach((b,A)=>{t.currentQueryIndex=A;const S=t.createSubContext(e.options,b);u&&S.delayNextStep(u),b===t.element&&(y=S.currentTimeline),Po(this,e.animation,S),S.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),f=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":y=f-y;break;case"full":y=r.currentStaggerTime}const A=t.currentTimeline;y&&A.delayNextStep(y);const S=A.currentTime;Po(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-S+(i.startTime-r.currentTimeline.startTime)}}const XD={};class bS{constructor(e,t,r,i,u,c,f,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=XD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new eI(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=gp(r.duration)),null!=r.delay&&(i.delay=gp(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=GD(u[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new bS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=XD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new RL(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(AL,"."+this._enterClassName)).replace(ML,"."+this._leaveClassName);let b=this._driver.query(this.element,e,1!=r);0!==r&&(b=r<0?b.slice(b.length+r,b.length):b.slice(0,r)),f.push(...b)}return!u&&0==f.length&&c.push(function VF(n){return new h.vHH(3014,un)}()),f}}class eI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new eI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Uc,this._currentKeyframe[t]=Uc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function NL(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=Uc})):lh(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(f=>{const y=GD(c[f],u,r);this._pendingStyles[f]=y,this._localTimelineStyles.hasOwnProperty(f)||(this._backFill[f]=this._globalTimelineStyles.hasOwnProperty(f)?this._globalTimelineStyles[f]:Uc),this._updateStyle(f,y)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,y)=>{const b=lh(f,!0);Object.keys(b).forEach(A=>{const S=b[A];"!"==S?e.add(A):S==Uc&&t.add(A)}),r||(b.offset=y/this.duration),i.push(b)});const u=e.size?zD(e.values()):[],c=t.size?zD(t.values()):[];if(r){const f=i[0],y=jm(f);f.offset=0,y.offset=1,i=[f,y]}return ES(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class RL extends eI{constructor(e,t,r,i,u,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,f=t/c,y=lh(e[0],!1);y.offset=0,u.push(y);const b=lh(e[0],!1);b.offset=NN(f),u.push(b);const A=e.length-1;for(let S=1;S<=A;S++){let L=lh(e[S],!1);L.offset=NN((t+L.offset*r)/c),u.push(L)}r=c,t=0,i="",e=u}return ES(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function NN(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class DS{}class OL extends DS{normalizePropertyName(e,t){return yS(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(PL[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function AF(n,e){return new h.vHH(3005,un)}())}return c+u}}const PL=(()=>function kL(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function ON(n,e,t,r,i,u,c,f,y,b,A,S,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:f,queriedElements:y,preStyleProps:b,postStyleProps:A,totalTime:S,errors:L}}const IS={};class PN{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function FL(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,f,y,b,A){const S=[],L=this.ast.options&&this.ast.options.params||IS,K=this.buildStyles(r,f&&f.params||IS,S),se=y&&y.params||IS,Ie=this.buildStyles(i,se,S),tt=new Set,it=new Map,ze=new Map,ot="void"===i,It={params:Object.assign(Object.assign({},L),se)},St=A?[]:wS(e,t,this.ast.animation,u,c,K,Ie,It,b,S);let Kt=0;if(St.forEach(vr=>{Kt=Math.max(vr.duration+vr.delay,Kt)}),S.length)return ON(t,this._triggerName,r,i,ot,K,Ie,[],[],it,ze,Kt,S);St.forEach(vr=>{const li=vr.element,m0=Oo(it,li,{});vr.preStyleProps.forEach(dl=>m0[dl]=!0);const ch=Oo(ze,li,{});vr.postStyleProps.forEach(dl=>ch[dl]=!0),li!==t&&tt.add(li)});const hr=zD(tt.values());return ON(t,this._triggerName,r,i,ot,K,Ie,St,hr,it,ze,Kt)}}class LL{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=jm(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(f=>{let y=c[f];y.length>1&&(y=GD(y,i,t));const b=this.normalizer.normalizePropertyName(f,t);y=this.normalizer.normalizeStyleValue(f,b,y,t),r[b]=y})}}),r}}class UL{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new LL(i.style,i.options&&i.options.params||{},r)}),kN(this.states,"true","1"),kN(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new PN(e,i,this.states))}),this.fallbackTransition=function BL(n,e,t){return new PN(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function kN(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const jL=new JD;class $L{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=_S(this._driver,t,r,[]);if(r.length)throw function zF(n){return new h.vHH(3503,un)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=fN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const f=new Map;if(u?(c=wS(this._driver,t,u,fS,BD,{},{},r,jL,i),c.forEach(A=>{const S=Oo(f,A.element,{});A.postStyleProps.forEach(L=>S[L]=null)})):(i.push(function WF(){return new h.vHH(3300,un)}()),c=[]),i.length)throw function qF(n){return new h.vHH(3504,un)}();f.forEach((A,S)=>{Object.keys(A).forEach(L=>{A[L]=this._driver.computeStyle(S,L,Uc)})});const b=uh(c.map(A=>{const S=f.get(A.element);return this._buildPlayer(A,{},S)}));return this._playersById[e]=b,b.onDestroy(()=>this.destroy(e)),this.players.push(b),b}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function KF(n){return new h.vHH(3301,un)}();return t}listen(e,t,r,i){const u=lS(t,"","","");return aS(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const FN="ng-animate-queued",CS="ng-animate-disabled",qL=[],LN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},KL={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Aa="__ng_removed";class TS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function JL(n){return null!=n?n:null}(r?e.value:e),r){const u=jm(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const g0="void",AS=new TS(g0);class ZL{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Sa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function ZF(n,e){return new h.vHH(3302,un)}();if(null==r||0==r.length)throw function YF(n){return new h.vHH(3303,un)}();if(!function XL(n){return"start"==n||"done"==n}(r))throw function QF(n,e){return new h.vHH(3400,un)}();const u=Oo(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const f=Oo(this._engine.statesByElement,e,{});return f.hasOwnProperty(t)||(Sa(e,jD),Sa(e,jD+"-"+t),f[t]=AS),()=>{this._engine.afterFlush(()=>{const y=u.indexOf(c);y>=0&&u.splice(y,1),this._triggers[t]||delete f[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function JF(n){return new h.vHH(3401,un)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new SS(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Sa(e,jD),Sa(e,jD+"-"+t),this._engine.statesByElement.set(e,f={}));let y=f[t];const b=new TS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&b.absorbOptions(y.options),f[t]=b,y||(y=AS),b.value!==g0&&y.value===b.value){if(!function nV(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(y.params,b.params)){const se=[],Ie=u.matchStyles(y.value,y.params,se),tt=u.matchStyles(b.value,b.params,se);se.length?this._engine.reportError(se):this._engine.afterFlush(()=>{mp(e,Ie),cl(e,tt)})}return}const L=Oo(this._engine.playersByElement,e,[]);L.forEach(se=>{se.namespaceId==this.id&&se.triggerName==t&&se.queued&&se.destroy()});let H=u.matchTransition(y.value,b.value,e,b.params),K=!1;if(!H){if(!i)return;H=u.fallbackTransition,K=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:H,fromState:y,toState:b,player:c,isFallbackTransition:K}),K||(Sa(e,FN),c.onStart(()=>{$m(e,FN)})),c.onDone(()=>{let se=this.players.indexOf(c);se>=0&&this.players.splice(se,1);const Ie=this._engine.playersByElement.get(e);if(Ie){let tt=Ie.indexOf(c);tt>=0&&Ie.splice(tt,1)}}),this.players.push(c),L.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,$D,!0);r.forEach(i=>{if(i[Aa])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const f=[];if(Object.keys(u).forEach(y=>{if(c.set(y,u[y].value),this._triggers[y]){const b=this.trigger(e,y,g0,i);b&&f.push(b)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&uh(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const y=this._triggers[c].fallbackTransition,b=r[c]||AS,A=new TS(g0),S=new SS(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:b,toState:A,player:S,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Aa];(!u||u===LN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Sa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(f=>{if(f.name==r.triggerName){const y=lS(u,r.triggerName,r.fromState.value,r.toState.value);y._data=e,aS(r.player,f.phase,y,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class YL{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new ZL(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let f=this.driver.getParentElement(t);for(;f;){const y=i.get(f);if(y){const b=r.indexOf(y);r.splice(b+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}}else for(let f=u;f>=0;f--)if(this.driver.containsElement(r[f].hostElement,t)){r.splice(f+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const f=this._fetchNamespace(c);f&&t.add(f)}}}return t}trigger(e,t,r,i){if(tI(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!tI(t))return;const u=t[Aa];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Sa(e,CS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),$m(e,CS))}removeNode(e,t,r,i){if(tI(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Aa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return tI(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,$D,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,pS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return uh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Aa];if(r&&r.setForRemoval){if(e[Aa]=LN,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(CS))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Sa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?uh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function XF(n){return new h.vHH(3402,un)}()}_flushAnimations(e,t){const r=new JD,i=[],u=new Map,c=[],f=new Map,y=new Map,b=new Map,A=new Set;this.disabledNodes.forEach(ht=>{A.add(ht);const Et=this.driver.query(ht,".ng-animate-queued",!0);for(let Nt=0;Nt<Et.length;Nt++)A.add(Et[Nt])});const S=this.bodyNode,L=Array.from(this.statesByElement.keys()),H=BN(L,this.collectedEnterElements),K=new Map;let se=0;H.forEach((ht,Et)=>{const Nt=fS+se++;K.set(Et,Nt),ht.forEach(mn=>Sa(mn,Nt))});const Ie=[],tt=new Set,it=new Set;for(let ht=0;ht<this.collectedLeaveElements.length;ht++){const Et=this.collectedLeaveElements[ht],Nt=Et[Aa];Nt&&Nt.setForRemoval&&(Ie.push(Et),tt.add(Et),Nt.hasAnimation?this.driver.query(Et,".ng-star-inserted",!0).forEach(mn=>tt.add(mn)):it.add(Et))}const ze=new Map,ot=BN(L,Array.from(tt));ot.forEach((ht,Et)=>{const Nt=BD+se++;ze.set(Et,Nt),ht.forEach(mn=>Sa(mn,Nt))}),e.push(()=>{H.forEach((ht,Et)=>{const Nt=K.get(Et);ht.forEach(mn=>$m(mn,Nt))}),ot.forEach((ht,Et)=>{const Nt=ze.get(Et);ht.forEach(mn=>$m(mn,Nt))}),Ie.forEach(ht=>{this.processLeaveNode(ht)})});const It=[],St=[];for(let ht=this._namespaceList.length-1;ht>=0;ht--)this._namespaceList[ht].drainQueuedTransitions(t).forEach(Nt=>{const mn=Nt.player,wi=Nt.element;if(It.push(mn),this.collectedEnterElements.length){const Ns=wi[Aa];if(Ns&&Ns.setForMove){if(Ns.previousTriggersValues&&Ns.previousTriggersValues.has(Nt.triggerName)){const _p=Ns.previousTriggersValues.get(Nt.triggerName),hh=this.statesByElement.get(Nt.element);hh&&hh[Nt.triggerName]&&(hh[Nt.triggerName].value=_p)}return void mn.destroy()}}const hl=!S||!this.driver.containsElement(S,wi),ko=ze.get(wi),dh=K.get(wi),Er=this._buildInstruction(Nt,r,dh,ko,hl);if(Er.errors&&Er.errors.length)return void St.push(Er);if(hl)return mn.onStart(()=>mp(wi,Er.fromStyles)),mn.onDestroy(()=>cl(wi,Er.toStyles)),void i.push(mn);if(Nt.isFallbackTransition)return mn.onStart(()=>mp(wi,Er.fromStyles)),mn.onDestroy(()=>cl(wi,Er.toStyles)),void i.push(mn);const XN=[];Er.timelines.forEach(Ns=>{Ns.stretchStartingKeyframe=!0,this.disabledNodes.has(Ns.element)||XN.push(Ns)}),Er.timelines=XN,r.append(wi,Er.timelines),c.push({instruction:Er,player:mn,element:wi}),Er.queriedElements.forEach(Ns=>Oo(f,Ns,[]).push(mn)),Er.preStyleProps.forEach((Ns,_p)=>{const hh=Object.keys(Ns);if(hh.length){let vp=y.get(_p);vp||y.set(_p,vp=new Set),hh.forEach(kS=>vp.add(kS))}}),Er.postStyleProps.forEach((Ns,_p)=>{const hh=Object.keys(Ns);let vp=b.get(_p);vp||b.set(_p,vp=new Set),hh.forEach(kS=>vp.add(kS))})});if(St.length){const ht=[];St.forEach(Et=>{ht.push(function eL(n,e){return new h.vHH(3505,un)}())}),It.forEach(Et=>Et.destroy()),this.reportError(ht)}const Kt=new Map,hr=new Map;c.forEach(ht=>{const Et=ht.element;r.has(Et)&&(hr.set(Et,Et),this._beforeAnimationBuild(ht.player.namespaceId,ht.instruction,Kt))}),i.forEach(ht=>{const Et=ht.element;this._getPreviousPlayers(Et,!1,ht.namespaceId,ht.triggerName,null).forEach(mn=>{Oo(Kt,Et,[]).push(mn),mn.destroy()})});const vr=Ie.filter(ht=>$N(ht,y,b)),li=new Map;UN(li,this.driver,it,b,Uc).forEach(ht=>{$N(ht,y,b)&&vr.push(ht)});const ch=new Map;H.forEach((ht,Et)=>{UN(ch,this.driver,new Set(ht),y,"!")}),vr.forEach(ht=>{const Et=li.get(ht),Nt=ch.get(ht);li.set(ht,Object.assign(Object.assign({},Et),Nt))});const dl=[],y0=[],_0={};c.forEach(ht=>{const{element:Et,player:Nt,instruction:mn}=ht;if(r.has(Et)){if(A.has(Et))return Nt.onDestroy(()=>cl(Et,mn.toStyles)),Nt.disabled=!0,Nt.overrideTotalTime(mn.totalTime),void i.push(Nt);let wi=_0;if(hr.size>1){let ko=Et;const dh=[];for(;ko=ko.parentNode;){const Er=hr.get(ko);if(Er){wi=Er;break}dh.push(ko)}dh.forEach(Er=>hr.set(Er,wi))}const hl=this._buildAnimation(Nt.namespaceId,mn,Kt,u,ch,li);if(Nt.setRealPlayer(hl),wi===_0)dl.push(Nt);else{const ko=this.playersByElement.get(wi);ko&&ko.length&&(Nt.parentPlayer=uh(ko)),i.push(Nt)}}else mp(Et,mn.fromStyles),Nt.onDestroy(()=>cl(Et,mn.toStyles)),y0.push(Nt),A.has(Et)&&i.push(Nt)}),y0.forEach(ht=>{const Et=u.get(ht.element);if(Et&&Et.length){const Nt=uh(Et);ht.setRealPlayer(Nt)}}),i.forEach(ht=>{ht.parentPlayer?ht.syncPlayerEvents(ht.parentPlayer):ht.destroy()});for(let ht=0;ht<Ie.length;ht++){const Et=Ie[ht],Nt=Et[Aa];if($m(Et,BD),Nt&&Nt.hasAnimation)continue;let mn=[];if(f.size){let hl=f.get(Et);hl&&hl.length&&mn.push(...hl);let ko=this.driver.query(Et,pS,!0);for(let dh=0;dh<ko.length;dh++){let Er=f.get(ko[dh]);Er&&Er.length&&mn.push(...Er)}}const wi=mn.filter(hl=>!hl.destroyed);wi.length?eV(this,Et,wi):this.processLeaveNode(Et)}return Ie.length=0,dl.forEach(ht=>{this.players.push(ht),ht.onDone(()=>{ht.destroy();const Et=this.players.indexOf(ht);this.players.splice(Et,1)}),ht.play()}),dl}elementContainsData(e,t){let r=!1;const i=t[Aa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const y=!u||u==g0;f.forEach(b=>{b.queued||!y&&b.triggerName!=i||c.push(b)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const b=y.element,A=b!==u,S=Oo(r,b,[]);this._getPreviousPlayers(b,A,c,f,t.toState).forEach(H=>{const K=H.getRealPlayer();K.beforeDestroy&&K.beforeDestroy(),H.destroy(),S.push(H)})}mp(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const f=t.triggerName,y=t.element,b=[],A=new Set,S=new Set,L=t.timelines.map(K=>{const se=K.element;A.add(se);const Ie=se[Aa];if(Ie&&Ie.removedBeforeQueried)return new r0(K.duration,K.delay);const tt=se!==y,it=function tV(n){const e=[];return jN(n,e),e}((r.get(se)||qL).map(Kt=>Kt.getRealPlayer())).filter(Kt=>!!Kt.element&&Kt.element===se),ze=u.get(se),ot=c.get(se),It=fN(0,this._normalizer,0,K.keyframes,ze,ot),St=this._buildPlayer(K,It,it);if(K.subTimeline&&i&&S.add(se),tt){const Kt=new SS(e,f,se);Kt.setRealPlayer(St),b.push(Kt)}return St});b.forEach(K=>{Oo(this.playersByQueriedElement,K.element,[]).push(K),K.onDone(()=>function QL(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,K.element,K))}),A.forEach(K=>Sa(K,DN));const H=uh(L);return H.onDestroy(()=>{A.forEach(K=>$m(K,DN)),cl(y,t.toStyles)}),S.forEach(K=>{Oo(i,K,[]).push(H)}),H}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new r0(e.duration,e.delay)}}class SS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new r0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>aS(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Oo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function tI(n){return n&&1===n.nodeType}function VN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function UN(n,e,t,r,i){const u=[];t.forEach(y=>u.push(VN(y)));const c=[];r.forEach((y,b)=>{const A={};y.forEach(S=>{const L=A[S]=e.computeStyle(b,S,i);(!L||0==L.length)&&(b[Aa]=KL,c.push(b))}),n.set(b,A)});let f=0;return t.forEach(y=>VN(y,u[f++])),c}function BN(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(f){if(!f)return 1;let y=u.get(f);if(y)return y;const b=f.parentNode;return y=t.has(b)?b:i.has(b)?1:c(b),u.set(f,y),y}return e.forEach(f=>{const y=c(f);1!==y&&t.get(y).push(f)}),t}function Sa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function $m(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function eV(n,e,t){uh(t).onDone(()=>n.processLeaveNode(e))}function jN(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Lx?jN(r.players,e):e.push(r)}}function $N(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class nI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new YL(e,t,r),this._timelineEngine=new $L(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const y=[],A=_S(this._driver,u,y,[]);if(y.length)throw function HF(n,e){return new h.vHH(3404,un)}();f=function VL(n,e,t){return new UL(n,e,t)}(i,A,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=pN(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,f]=pN(r);return this._timelineEngine.listen(c,t,f,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let iV=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&cl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(cl(this._element,this._initialStyles),this._endStyles&&(cl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(mp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(mp(this._element,this._endStyles),this._endStyles=null),cl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function MS(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];sV(i)&&(e=e||{},e[i]=n[i])}return e}function sV(n){return"display"===n||"position"===n}class HN{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:SN(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class oV{validateStyleProperty(e){return _N(e)}matchesElement(e,t){return!1}containsElement(e,t){return vN(e,t)}getParentElement(e){return dS(e)}query(e,t,r){return EN(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(y.easing=u);const b={},A=c.filter(L=>L instanceof HN);(function cL(n,e){return 0===n||0===e})(r,i)&&A.forEach(L=>{let H=L.currentSnapshot;Object.keys(H).forEach(K=>b[K]=H[K])}),t=function dL(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(f=>{u.hasOwnProperty(f)||c.push(f),u[f]=t[f]}),c.length)for(var i=1;i<e.length;i++){let f=e[i];c.forEach(function(y){f[y]=SN(n,y)})}}return e}(e,t=t.map(L=>lh(L,!1)),b);const S=function rV(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=MS(e[0]),e.length>1&&(r=MS(e[e.length-1]))):e&&(t=MS(e)),t||r?new iV(n,t,r):null}(e,t);return new HN(e,t,y,S)}}let aV=(()=>{class n extends vD{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?kx(t):t;return GN(this._renderer,null,r,"register",[i]),new uV(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(ce))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class uV extends class _k{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new lV(this._id,e,t||{},this._renderer)}}class lV{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return GN(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function GN(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const zN="@.disabled";let cV=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const f=null==c?void 0:c.parentNode(u);f&&c.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let A=this._rendererCache.get(u);return A||(A=new WN("",u,this.engine),this._rendererCache.set(u,A)),A}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const y=A=>{Array.isArray(A)?A.forEach(y):this.engine.registerTrigger(c,f,t,A.name,A)};return r.data.animation.forEach(y),new dV(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,f]=u;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(nI),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class WN{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==zN?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class dV extends WN{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==zN?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function hV(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function fV(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let pV=(()=>{class n extends nI{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ce),h.LFG(hS),h.LFG(DS))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const qN=new h.OlP("AnimationModuleType"),KN=[{provide:vD,useClass:aV},{provide:DS,useFactory:function gV(){return new OL}},{provide:nI,useClass:pV},{provide:h.FYo,useFactory:function mV(n,e,t){return new cV(n,e,t)},deps:[_n,nI,h.R0b]}],ZN=[{provide:hS,useFactory:()=>new oV},{provide:qN,useValue:"BrowserAnimations"},...KN],yV=[{provide:hS,useClass:wN},{provide:qN,useValue:"NoopAnimations"},...KN];let _V=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?yV:ZN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:ZN,imports:[Us]}),n})();const xS_firebase={projectId:"todo-app-57ed7",appId:"1:38057183538:web:1b3d1092b84e61767f6f2b",storageBucket:"todo-app-57ed7.appspot.com",locationId:"europe-west",apiKey:"AIzaSyA5EV6uxsQv3W4hmjP1kQ9LfnD02XmMAbE",authDomain:"todo-app-57ed7.firebaseapp.com",messagingSenderId:"38057183538"};P(573);class QN{constructor(){return(0,Sn.vb)("auth")}}class OS{constructor(e){return e}}const JN="firestore",PS=new h.OlP("angularfire2.firestore-instances");function IV(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new OS(r)}}const CV={provide:class bV{constructor(){return(0,Sn.vb)(JN)}},deps:[[new h.FiY,PS]]},TV={provide:OS,useFactory:function DV(n,e){const t=(0,Sn.JM)(JN,n,e);return t&&new OS(t)},deps:[[new h.FiY,PS],Vm]};let AV=(()=>{class n{constructor(){(0,lp.KN)("angularfire",Sn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[TV,CV]}),n})();function SV(n,...e){return{ngModule:AV,providers:[{provide:PS,useFactory:IV(n),multi:!0,deps:[h.R0b,h.zs3,Sn.HU,jM,[new h.FiY,QN],[new h.FiY,yD],...e]}]}}const MV=(0,Sn.u3)(Gv,!0);let xV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[wF]}),n.\u0275inj=h.cJS({providers:[],imports:[[Us,EF,pa,_V,sP(()=>oP(xS_firebase)),SV(()=>MV()),vo.hO.initializeApp(xS_firebase),IA,sS]]}),n})();(0,h.G48)(),Fa().bootstrapModule(xV).catch(n=>console.error(n))},5867:(mt,Se,P)=>{P.d(Se,{Mq:()=>h.getApp,C6:()=>h.getApps,ZF:()=>h.initializeApp,KN:()=>h.registerVersion});var h=P(9681);(0,h.registerVersion)("firebase","9.6.11","app")},127:(mt,Se,P)=>{P.d(Se,{Z:()=>h.Z});var h=P(3942);h.Z.registerVersion("firebase","9.6.11","app-compat")},5881:(mt,Se,P)=>{P.r(Se);var h=P(5861),$=P(3942),N=P(573),re=P(2090),ce=(P(9681),P(1877),P(4859));function de(){return window}function z(){return(z=(0,h.Z)(function*(O,V,j){var ue;const{BuildInfo:Ve}=de();(0,N.ap)(V.sessionId,"AuthEvent did not contain a session ID");const Ye=yield be(V.sessionId),Ct={};return(0,N.aq)()?Ct.ibi=Ve.packageName:(0,N.ar)()?Ct.apn=Ve.packageName:(0,N.as)(O,"operation-not-supported-in-this-environment"),Ve.displayName&&(Ct.appDisplayName=Ve.displayName),Ct.sessionId=Ye,(0,N.at)(O,j,V.type,void 0,null!==(ue=V.eventId)&&void 0!==ue?ue:void 0,Ct)})).apply(this,arguments)}function Ke(){return(Ke=(0,h.Z)(function*(O){const{BuildInfo:V}=de(),j={};(0,N.aq)()?j.iosBundleId=V.packageName:(0,N.ar)()?j.androidPackageName=V.packageName:(0,N.as)(O,"operation-not-supported-in-this-environment"),yield(0,N.au)(O,j)})).apply(this,arguments)}function Le(){return(Le=(0,h.Z)(function*(O,V,j){const{cordova:ue}=de();let Ve=()=>{};try{yield new Promise((Ye,Ct)=>{let st=null;function Mt(){var Yt;Ye();const xr=null===(Yt=ue.plugins.browsertab)||void 0===Yt?void 0:Yt.close;"function"==typeof xr&&xr(),"function"==typeof(null==j?void 0:j.close)&&j.close()}function Dn(){st||(st=window.setTimeout(()=>{Ct((0,N.av)(O,"redirect-cancelled-by-user"))},2e3))}function nr(){"visible"===(null==document?void 0:document.visibilityState)&&Dn()}V.addPassiveListener(Mt),document.addEventListener("resume",Dn,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",nr,!1),Ve=()=>{V.removePassiveListener(Mt),document.removeEventListener("resume",Dn,!1),document.removeEventListener("visibilitychange",nr,!1),st&&window.clearTimeout(st)}})}finally{Ve()}})).apply(this,arguments)}function be(O){return nt.apply(this,arguments)}function nt(){return(nt=(0,h.Z)(function*(O){const V=$e(O),j=yield crypto.subtle.digest("SHA-256",V);return Array.from(new Uint8Array(j)).map(Ve=>Ve.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function $e(O){if((0,N.ap)(/[0-9a-zA-Z]+/.test(O),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(O);const V=new ArrayBuffer(O.length),j=new Uint8Array(V);for(let ue=0;ue<O.length;ue++)j[ue]=O.charCodeAt(ue);return j}class Me extends N.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(V=>{this.resolveInialized=V})}addPassiveListener(V){this.passiveListeners.add(V)}removePassiveListener(V){this.passiveListeners.delete(V)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(V){return this.resolveInialized(),this.passiveListeners.forEach(j=>j(V)),super.onEvent(V)}initialized(){var V=this;return(0,h.Z)(function*(){yield V.initPromise})()}}function ee(O){return et.apply(this,arguments)}function et(){return(et=(0,h.Z)(function*(O){const V=yield oe()._get(le(O));return V&&(yield oe()._remove(le(O))),V})).apply(this,arguments)}function ie(){const O=[],V="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let j=0;j<20;j++){const ue=Math.floor(Math.random()*V.length);O.push(V.charAt(ue))}return O.join("")}function oe(){return(0,N.ax)(N.b)}function le(O){return(0,N.ay)("authEvent",O.config.apiKey,O.name)}function Fe(O){if(!(null==O?void 0:O.includes("?")))return{};const[V,...j]=O.split("?");return(0,re.zd)(j.join("?"))}function Ge(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.av)("no-auth-event")}}function Xt(){var O;return(null===(O=null==self?void 0:self.location)||void 0===O?void 0:O.protocol)||null}function Rn(O=(0,re.z$)()){return!("file:"!==Xt()&&"ionic:"!==Xt()||!O.toLowerCase().match(/iphone|ipad|ipod|android/))}function ci(){try{const O=self.localStorage,V=N.aG();if(O)return O.setItem(V,"1"),O.removeItem(V),!function Bi(O=(0,re.z$)()){return function Sr(){return(0,re.w1)()&&11===(null==document?void 0:document.documentMode)}()||function wr(O=(0,re.z$)()){return/Edge\/\d+/.test(O)}(O)}()||(0,re.hl)()}catch(O){return pr()&&(0,re.hl)()}return!1}function pr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function br(){return(function rn(){return"http:"===Xt()||"https:"===Xt()}()||(0,re.ru)()||Rn())&&!function fr(){return(0,re.b$)()||(0,re.UG)()}()&&ci()&&!pr()}function as(){return Rn()&&"undefined"!=typeof document}function Mr(){return(Mr=(0,h.Z)(function*(){return!!as()&&new Promise(O=>{const V=setTimeout(()=>{O(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(V),O(!0)})})})).apply(this,arguments)}const an={LOCAL:"local",NONE:"none",SESSION:"session"},Gn=N.aw,di="persistence";function Nn(O){return $r.apply(this,arguments)}function $r(){return($r=(0,h.Z)(function*(O){yield O._initializationPromise;const V=Gt(),j=N.ay(di,O.config.apiKey,O.name);V&&V.setItem(j,O._getPersistence())})).apply(this,arguments)}function Gt(){var O;try{return(null===(O=function Fn(){return"undefined"!=typeof window?window:null}())||void 0===O?void 0:O.sessionStorage)||null}catch(V){return null}}const pt=N.aw;class at{constructor(){this.browserResolver=N.ax(N.k),this.cordovaResolver=N.ax(class Qt{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aA}_initialize(V){var j=this;return(0,h.Z)(function*(){const ue=V._key();let Ve=j.eventManagers.get(ue);return Ve||(Ve=new Me(V),j.eventManagers.set(ue,Ve),j.attachCallbackListeners(V,Ve)),Ve})()}_openPopup(V){(0,N.as)(V,"operation-not-supported-in-this-environment")}_openRedirect(V,j,ue,Ve){var Ye=this;return(0,h.Z)(function*(){!function me(O){var V,j,ue,Ve,Ye,Ct,st,Mt,Dn,nr;const Yt=de();(0,N.aw)("function"==typeof(null===(V=null==Yt?void 0:Yt.universalLinks)||void 0===V?void 0:V.subscribe),O,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aw)(void 0!==(null===(j=null==Yt?void 0:Yt.BuildInfo)||void 0===j?void 0:j.packageName),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aw)("function"==typeof(null===(Ye=null===(Ve=null===(ue=null==Yt?void 0:Yt.cordova)||void 0===ue?void 0:ue.plugins)||void 0===Ve?void 0:Ve.browsertab)||void 0===Ye?void 0:Ye.openUrl),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aw)("function"==typeof(null===(Mt=null===(st=null===(Ct=null==Yt?void 0:Yt.cordova)||void 0===Ct?void 0:Ct.plugins)||void 0===st?void 0:st.browsertab)||void 0===Mt?void 0:Mt.isAvailable),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aw)("function"==typeof(null===(nr=null===(Dn=null==Yt?void 0:Yt.cordova)||void 0===Dn?void 0:Dn.InAppBrowser)||void 0===nr?void 0:nr.open),O,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(V);const Ct=yield Ye._initialize(V);yield Ct.initialized(),Ct.resetRedirect(),(0,N.aB)(),yield Ye._originValidation(V);const st=function Ee(O,V,j=null){return{type:V,eventId:j,urlResponse:null,sessionId:ie(),postBody:null,tenantId:O.tenantId,error:(0,N.av)(O,"no-auth-event")}}(V,ue,Ve);yield function Qe(O,V){return oe()._set(le(O),V)}(V,st);const Mt=yield function W(O,V,j){return z.apply(this,arguments)}(V,st,j),Dn=yield function Ne(O){const{cordova:V}=de();return new Promise(j=>{V.plugins.browsertab.isAvailable(ue=>{let Ve=null;ue?V.plugins.browsertab.openUrl(O):Ve=V.InAppBrowser.open(O,(0,N.ao)()?"_blank":"_system","location=yes"),j(Ve)})})}(Mt);return function ke(O,V,j){return Le.apply(this,arguments)}(V,Ct,Dn)})()}_isIframeWebStorageSupported(V,j){throw new Error("Method not implemented.")}_originValidation(V){const j=V._key();return this.originValidationPromises[j]||(this.originValidationPromises[j]=function X(O){return Ke.apply(this,arguments)}(V)),this.originValidationPromises[j]}attachCallbackListeners(V,j){const{universalLinks:ue,handleOpenURL:Ve,BuildInfo:Ye}=de(),Ct=setTimeout((0,h.Z)(function*(){yield ee(V),j.onEvent(Ge())}),500),st=function(){var nr=(0,h.Z)(function*(Yt){clearTimeout(Ct);const xr=yield ee(V);let bi=null;xr&&(null==Yt?void 0:Yt.url)&&(bi=function Xe(O,V){var j,ue;const Ve=function pe(O){const V=Fe(O),j=V.link?decodeURIComponent(V.link):void 0,ue=Fe(j).link,Ve=V.deep_link_id?decodeURIComponent(V.deep_link_id):void 0;return Fe(Ve).link||Ve||ue||j||O}(V);if(Ve.includes("/__/auth/callback")){const Ye=Fe(Ve),Ct=Ye.firebaseError?function De(O){try{return JSON.parse(O)}catch(V){return null}}(decodeURIComponent(Ye.firebaseError)):null,st=null===(ue=null===(j=null==Ct?void 0:Ct.code)||void 0===j?void 0:j.split("auth/"))||void 0===ue?void 0:ue[1],Mt=st?(0,N.av)(st):null;return Mt?{type:O.type,eventId:O.eventId,tenantId:O.tenantId,error:Mt,urlResponse:null,sessionId:null,postBody:null}:{type:O.type,eventId:O.eventId,tenantId:O.tenantId,sessionId:O.sessionId,urlResponse:Ve,postBody:null}}return null}(xr,Yt.url)),j.onEvent(bi||Ge())});return function(xr){return nr.apply(this,arguments)}}();void 0!==ue&&"function"==typeof ue.subscribe&&ue.subscribe(null,st);const Mt=Ve,Dn=`${Ye.packageName.toLowerCase()}://`;de().handleOpenURL=function(){var nr=(0,h.Z)(function*(Yt){if(Yt.toLowerCase().startsWith(Dn)&&st({url:Yt}),"function"==typeof Mt)try{Mt(Yt)}catch(xr){console.error(xr)}});return function(Yt){return nr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aA}_initialize(V){var j=this;return(0,h.Z)(function*(){return yield j.selectUnderlyingResolver(),j.assertedUnderlyingResolver._initialize(V)})()}_openPopup(V,j,ue,Ve){var Ye=this;return(0,h.Z)(function*(){return yield Ye.selectUnderlyingResolver(),Ye.assertedUnderlyingResolver._openPopup(V,j,ue,Ve)})()}_openRedirect(V,j,ue,Ve){var Ye=this;return(0,h.Z)(function*(){return yield Ye.selectUnderlyingResolver(),Ye.assertedUnderlyingResolver._openRedirect(V,j,ue,Ve)})()}_isIframeWebStorageSupported(V,j){this.assertedUnderlyingResolver._isIframeWebStorageSupported(V,j)}_originValidation(V){return this.assertedUnderlyingResolver._originValidation(V)}get _shouldInitProactively(){return as()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var V=this;return(0,h.Z)(function*(){if(V.underlyingResolver)return;const j=yield function ft(){return Mr.apply(this,arguments)}();V.underlyingResolver=j?V.cordovaResolver:V.browserResolver})()}}function Qr(O){return O.unwrap()}function Wt(O){return Vn(O)}function Vn(O){const{_tokenResponse:V}=O instanceof re.ZR?O.customData:O;if(!V)return null;if(!(O instanceof re.ZR)&&"temporaryProof"in V&&"phoneNumber"in V)return N.P.credentialFromResult(O);const j=V.providerId;if(!j||j===N.o.PASSWORD)return null;let ue;switch(j){case N.o.GOOGLE:ue=N.N;break;case N.o.FACEBOOK:ue=N.M;break;case N.o.GITHUB:ue=N.Q;break;case N.o.TWITTER:ue=N.V;break;default:const{oauthIdToken:Ve,oauthAccessToken:Ye,oauthTokenSecret:Ct,pendingToken:st,nonce:Mt}=V;return Ye||Ct||Ve||st?st?j.startsWith("saml.")?N.aJ._create(j,st):N.I._fromParams({providerId:j,signInMethod:j,pendingToken:st,idToken:Ve,accessToken:Ye}):new N.T(j).credential({idToken:Ve,accessToken:Ye,rawNonce:Mt}):null}return O instanceof re.ZR?ue.credentialFromError(O):ue.credentialFromResult(O)}function ln(O,V){return V.catch(j=>{throw j instanceof re.ZR&&function $i(O,V){var j;const ue=null===(j=V.customData)||void 0===j?void 0:j._tokenResponse;if("auth/multi-factor-auth-required"===V.code)V.resolver=new qt(O,N.am(O,V));else if(ue){const Ve=Vn(V),Ye=V;Ve&&(Ye.credential=Ve,Ye.tenantId=ue.tenantId||void 0,Ye.email=ue.email||void 0,Ye.phoneNumber=ue.phoneNumber||void 0)}}(O,j),j}).then(j=>{const Ve=j.user;return{operationType:j.operationType,credential:Wt(j),additionalUserInfo:N.ak(j),user:We.getOrCreate(Ve)}})}function yt(O,V){return Un.apply(this,arguments)}function Un(){return(Un=(0,h.Z)(function*(O,V){const j=yield V;return{verificationId:j.verificationId,confirm:ue=>ln(O,j.confirm(ue))}})).apply(this,arguments)}class qt{constructor(V,j){this.resolver=j,this.auth=function ji(O){return O.wrapped()}(V)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(V){return ln(Qr(this.auth),this.resolver.resolveSignIn(V))}}class We{constructor(V){this._delegate=V,this.multiFactor=N.an(V)}static getOrCreate(V){return We.USER_MAP.has(V)||We.USER_MAP.set(V,new We(V)),We.USER_MAP.get(V)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(V){return this._delegate.getIdTokenResult(V)}getIdToken(V){return this._delegate.getIdToken(V)}linkAndRetrieveDataWithCredential(V){return this.linkWithCredential(V)}linkWithCredential(V){var j=this;return(0,h.Z)(function*(){return ln(j.auth,N.Y(j._delegate,V))})()}linkWithPhoneNumber(V,j){var ue=this;return(0,h.Z)(function*(){return yt(ue.auth,N.l(ue._delegate,V,j))})()}linkWithPopup(V){var j=this;return(0,h.Z)(function*(){return ln(j.auth,N.d(j._delegate,V,at))})()}linkWithRedirect(V){var j=this;return(0,h.Z)(function*(){return yield Nn(N.aC(j.auth)),N.g(j._delegate,V,at)})()}reauthenticateAndRetrieveDataWithCredential(V){return this.reauthenticateWithCredential(V)}reauthenticateWithCredential(V){var j=this;return(0,h.Z)(function*(){return ln(j.auth,N.Z(j._delegate,V))})()}reauthenticateWithPhoneNumber(V,j){return yt(this.auth,N.r(this._delegate,V,j))}reauthenticateWithPopup(V){return ln(this.auth,N.e(this._delegate,V,at))}reauthenticateWithRedirect(V){var j=this;return(0,h.Z)(function*(){return yield Nn(N.aC(j.auth)),N.h(j._delegate,V,at)})()}sendEmailVerification(V){return N.aa(this._delegate,V)}unlink(V){var j=this;return(0,h.Z)(function*(){return yield N.aj(j._delegate,V),j})()}updateEmail(V){return N.af(this._delegate,V)}updatePassword(V){return N.ag(this._delegate,V)}updatePhoneNumber(V){return N.u(this._delegate,V)}updateProfile(V){return N.ae(this._delegate,V)}verifyBeforeUpdateEmail(V,j){return N.ab(this._delegate,V,j)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}We.USER_MAP=new WeakMap;const Ce=N.aw;let rt=(()=>{class O{constructor(j,ue){if(this.app=j,ue.isInitialized())return this._delegate=ue.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ve}=j.options;Ce(Ve,"invalid-api-key",{appName:j.name}),Ce(Ve,"invalid-api-key",{appName:j.name});const Ye="undefined"!=typeof window?at:void 0;this._delegate=ue.initialize({options:{persistence:Ft(Ve,j.name),popupRedirectResolver:Ye}}),this._delegate._updateErrorMap(N.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?We.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(j){this._delegate.languageCode=j}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(j){this._delegate.tenantId=j}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(j,ue){N.E(this._delegate,j,ue)}applyActionCode(j){return N.a1(this._delegate,j)}checkActionCode(j){return N.a2(this._delegate,j)}confirmPasswordReset(j,ue){return N.a0(this._delegate,j,ue)}createUserWithEmailAndPassword(j,ue){var Ve=this;return(0,h.Z)(function*(){return ln(Ve._delegate,N.a4(Ve._delegate,j,ue))})()}fetchProvidersForEmail(j){return this.fetchSignInMethodsForEmail(j)}fetchSignInMethodsForEmail(j){return N.a9(this._delegate,j)}isSignInWithEmailLink(j){return N.a7(this._delegate,j)}getRedirectResult(){var j=this;return(0,h.Z)(function*(){Ce(br(),j._delegate,"operation-not-supported-in-this-environment");const ue=yield N.j(j._delegate,at);return ue?ln(j._delegate,Promise.resolve(ue)):{credential:null,user:null}})()}addFrameworkForLogging(j){!function Jt(O,V){(0,N.aC)(O)._logFramework(V)}(this._delegate,j)}onAuthStateChanged(j,ue,Ve){const{next:Ye,error:Ct,complete:st}=gt(j,ue,Ve);return this._delegate.onAuthStateChanged(Ye,Ct,st)}onIdTokenChanged(j,ue,Ve){const{next:Ye,error:Ct,complete:st}=gt(j,ue,Ve);return this._delegate.onIdTokenChanged(Ye,Ct,st)}sendSignInLinkToEmail(j,ue){return N.a6(this._delegate,j,ue)}sendPasswordResetEmail(j,ue){return N.$(this._delegate,j,ue||void 0)}setPersistence(j){var ue=this;return(0,h.Z)(function*(){let Ve;switch(function Ln(O,V){Gn(Object.values(an).includes(V),O,"invalid-persistence-type"),(0,re.b$)()?Gn(V!==an.SESSION,O,"unsupported-persistence-type"):(0,re.UG)()?Gn(V===an.NONE,O,"unsupported-persistence-type"):pr()?Gn(V===an.NONE||V===an.LOCAL&&(0,re.hl)(),O,"unsupported-persistence-type"):Gn(V===an.NONE||ci(),O,"unsupported-persistence-type")}(ue._delegate,j),j){case an.SESSION:Ve=N.a;break;case an.LOCAL:Ve=(yield N.ax(N.i)._isAvailable())?N.i:N.b;break;case an.NONE:Ve=N.K;break;default:return N.as("argument-error",{appName:ue._delegate.name})}return ue._delegate.setPersistence(Ve)})()}signInAndRetrieveDataWithCredential(j){return this.signInWithCredential(j)}signInAnonymously(){return ln(this._delegate,N.W(this._delegate))}signInWithCredential(j){return ln(this._delegate,N.X(this._delegate,j))}signInWithCustomToken(j){return ln(this._delegate,N._(this._delegate,j))}signInWithEmailAndPassword(j,ue){return ln(this._delegate,N.a5(this._delegate,j,ue))}signInWithEmailLink(j,ue){return ln(this._delegate,N.a8(this._delegate,j,ue))}signInWithPhoneNumber(j,ue){return yt(this._delegate,N.s(this._delegate,j,ue))}signInWithPopup(j){var ue=this;return(0,h.Z)(function*(){return Ce(br(),ue._delegate,"operation-not-supported-in-this-environment"),ln(ue._delegate,N.c(ue._delegate,j,at))})()}signInWithRedirect(j){var ue=this;return(0,h.Z)(function*(){return Ce(br(),ue._delegate,"operation-not-supported-in-this-environment"),yield Nn(ue._delegate),N.f(ue._delegate,j,at)})()}updateCurrentUser(j){return this._delegate.updateCurrentUser(j)}verifyPasswordResetCode(j){return N.a3(this._delegate,j)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return O.Persistence=an,O})();function gt(O,V,j){let ue=O;"function"!=typeof O&&({next:ue,error:V,complete:j}=O);const Ve=ue;return{next:Ct=>Ve(Ct&&We.getOrCreate(Ct)),error:V,complete:j}}function Ft(O,V){const j=function Js(O,V){const j=Gt();if(!j)return[];const ue=N.ay(di,O,V);switch(j.getItem(ue)){case an.NONE:return[N.K];case an.LOCAL:return[N.i,N.a];case an.SESSION:return[N.a];default:return[]}}(O,V);if("undefined"!=typeof self&&!j.includes(N.i)&&j.push(N.i),"undefined"!=typeof window)for(const ue of[N.b,N.a])j.includes(ue)||j.push(ue);return j.includes(N.K)||j.push(N.K),j}class Lt{constructor(){this.providerId="phone",this._delegate=new N.P(Qr($.Z.auth()))}static credential(V,j){return N.P.credential(V,j)}verifyPhoneNumber(V,j){return this._delegate.verifyPhoneNumber(V,j)}unwrap(){return this._delegate}}Lt.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,Lt.PROVIDER_ID=N.P.PROVIDER_ID;const q=N.aw;class B{constructor(V,j,ue=$.Z.app()){var Ve;q(null===(Ve=ue.options)||void 0===Ve?void 0:Ve.apiKey,"invalid-api-key",{appName:ue.name}),this._delegate=new N.R(V,j,ue.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function fe(O){O.INTERNAL.registerComponent(new ce.wA("auth-compat",V=>{const j=V.getProvider("app-compat").getImmediate(),ue=V.getProvider("auth");return new rt(j,ue)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.L,FacebookAuthProvider:N.M,GithubAuthProvider:N.Q,GoogleAuthProvider:N.N,OAuthProvider:N.T,SAMLAuthProvider:N.U,PhoneAuthProvider:Lt,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:B,TwitterAuthProvider:N.V,Auth:rt,AuthCredential:N.G,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),O.registerVersion("@firebase/auth-compat","0.2.12")}($.Z)},8306:(mt,Se,P)=>{P.d(Se,{y:()=>W});var h=P(2961),$=P(727),N=P(8822),re=P(4671);var ce=P(2416),de=P(576),ge=P(2806);let W=(()=>{class Ne{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const me=new Ne;return me.source=this,me.operator=Le,me}subscribe(Le,me,be){const nt=function Ke(Ne){return Ne&&Ne instanceof h.Lv||function X(Ne){return Ne&&(0,de.m)(Ne.next)&&(0,de.m)(Ne.error)&&(0,de.m)(Ne.complete)}(Ne)&&(0,$.Nn)(Ne)}(Le)?Le:new h.Hp(Le,me,be);return(0,ge.x)(()=>{const{operator:$e,source:Re}=this;nt.add($e?$e.call(nt,Re):Re?this._subscribe(nt):this._trySubscribe(nt))}),nt}_trySubscribe(Le){try{return this._subscribe(Le)}catch(me){Le.error(me)}}forEach(Le,me){return new(me=z(me))((be,nt)=>{const $e=new h.Hp({next:Re=>{try{Le(Re)}catch(Me){nt(Me),$e.unsubscribe()}},error:nt,complete:be});this.subscribe($e)})}_subscribe(Le){var me;return null===(me=this.source)||void 0===me?void 0:me.subscribe(Le)}[N.L](){return this}pipe(...Le){return function ve(Ne){return 0===Ne.length?re.y:1===Ne.length?Ne[0]:function(Le){return Ne.reduce((me,be)=>be(me),Le)}}(Le)(this)}toPromise(Le){return new(Le=z(Le))((me,be)=>{let nt;this.subscribe($e=>nt=$e,$e=>be($e),()=>me(nt))})}}return Ne.create=ke=>new Ne(ke),Ne})();function z(Ne){var ke;return null!==(ke=null!=Ne?Ne:ce.v.Promise)&&void 0!==ke?ke:Promise}},7579:(mt,Se,P)=>{P.d(Se,{x:()=>ce});var h=P(8306),$=P(727);const re=(0,P(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=P(8737),ve=P(2806);let ce=(()=>{class ge extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const X=new de(this,this);return X.operator=z,X}_throwIfClosed(){if(this.closed)throw new re}next(z){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(z)}})}error(z){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:X}=this;for(;X.length;)X.shift().error(z)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:X,isStopped:Ke,observers:Ne}=this;return X||Ke?$.Lc:(this.currentObservers=null,Ne.push(z),new $.w0(()=>{this.currentObservers=null,(0,te.P)(Ne,z)}))}_checkFinalizedStatuses(z){const{hasError:X,thrownError:Ke,isStopped:Ne}=this;X?z.error(Ke):Ne&&z.complete()}asObservable(){const z=new h.y;return z.source=this,z}}return ge.create=(W,z)=>new de(W,z),ge})();class de extends ce{constructor(W,z){super(),this.destination=W,this.source=z}next(W){var z,X;null===(X=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===X||X.call(z,W)}error(W){var z,X;null===(X=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===X||X.call(z,W)}complete(){var W,z;null===(z=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===z||z.call(W)}_subscribe(W){var z,X;return null!==(X=null===(z=this.source)||void 0===z?void 0:z.subscribe(W))&&void 0!==X?X:$.Lc}}},2961:(mt,Se,P)=>{P.d(Se,{Hp:()=>Le,Lv:()=>X});var h=P(576),$=P(727),N=P(2416),re=P(7849);function te(){}const ve=ge("C",void 0,void 0);function ge(Re,Me,Ee){return{kind:Re,value:Me,error:Ee}}var W=P(3410),z=P(2806);class X extends $.w0{constructor(Me){super(),this.isStopped=!1,Me?(this.destination=Me,(0,$.Nn)(Me)&&Me.add(this)):this.destination=$e}static create(Me,Ee,Qe){return new Le(Me,Ee,Qe)}next(Me){this.isStopped?nt(function de(Re){return ge("N",Re,void 0)}(Me),this):this._next(Me)}error(Me){this.isStopped?nt(function ce(Re){return ge("E",void 0,Re)}(Me),this):(this.isStopped=!0,this._error(Me))}complete(){this.isStopped?nt(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Me){this.destination.next(Me)}_error(Me){try{this.destination.error(Me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function Ne(Re,Me){return Ke.call(Re,Me)}class ke{constructor(Me){this.partialObserver=Me}next(Me){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(Me)}catch(Qe){me(Qe)}}error(Me){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(Me)}catch(Qe){me(Qe)}else me(Me)}complete(){const{partialObserver:Me}=this;if(Me.complete)try{Me.complete()}catch(Ee){me(Ee)}}}class Le extends X{constructor(Me,Ee,Qe){let ee;if(super(),(0,h.m)(Me)||!Me)ee={next:null!=Me?Me:void 0,error:null!=Ee?Ee:void 0,complete:null!=Qe?Qe:void 0};else{let et;this&&N.v.useDeprecatedNextContext?(et=Object.create(Me),et.unsubscribe=()=>this.unsubscribe(),ee={next:Me.next&&Ne(Me.next,et),error:Me.error&&Ne(Me.error,et),complete:Me.complete&&Ne(Me.complete,et)}):ee=Me}this.destination=new ke(ee)}}function me(Re){N.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Re):(0,re.h)(Re)}function nt(Re,Me){const{onStoppedNotification:Ee}=N.v;Ee&&W.z.setTimeout(()=>Ee(Re,Me))}const $e={closed:!0,next:te,error:function be(Re){throw Re},complete:te}},727:(mt,Se,P)=>{P.d(Se,{Lc:()=>ve,w0:()=>te,Nn:()=>ce});var h=P(576);const N=(0,P(3888).d)(ge=>function(z){ge(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((X,Ke)=>`${Ke+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var re=P(8737);class te{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Ne of z)Ne.remove(this);else z.remove(this);const{initialTeardown:X}=this;if((0,h.m)(X))try{X()}catch(Ne){W=Ne instanceof N?Ne.errors:[Ne]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const Ne of Ke)try{de(Ne)}catch(ke){W=null!=W?W:[],ke instanceof N?W=[...W,...ke.errors]:W.push(ke)}}if(W)throw new N(W)}}add(W){var z;if(W&&W!==this)if(this.closed)de(W);else{if(W instanceof te){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(W)}}_hasParent(W){const{_parentage:z}=this;return z===W||Array.isArray(z)&&z.includes(W)}_addParent(W){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(W),z):z?[z,W]:W}_removeParent(W){const{_parentage:z}=this;z===W?this._parentage=null:Array.isArray(z)&&(0,re.P)(z,W)}remove(W){const{_finalizers:z}=this;z&&(0,re.P)(z,W),W instanceof te&&W._removeParent(this)}}te.EMPTY=(()=>{const ge=new te;return ge.closed=!0,ge})();const ve=te.EMPTY;function ce(ge){return ge instanceof te||ge&&"closed"in ge&&(0,h.m)(ge.remove)&&(0,h.m)(ge.add)&&(0,h.m)(ge.unsubscribe)}function de(ge){(0,h.m)(ge)?ge():ge.unsubscribe()}},2416:(mt,Se,P)=>{P.d(Se,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(mt,Se,P)=>{P.d(Se,{E:()=>$});const $=new(P(8306).y)(te=>te.complete())},8996:(mt,Se,P)=>{P.d(Se,{D:()=>Me});var h=P(8421),$=P(5363),N=P(9468),ve=P(8306),de=P(2202),ge=P(576),W=P(9672);function X(Ee,Qe){if(!Ee)throw new Error("Iterable cannot be null");return new ve.y(ee=>{(0,W.f)(ee,Qe,()=>{const et=Ee[Symbol.asyncIterator]();(0,W.f)(ee,Qe,()=>{et.next().then(Xe=>{Xe.done?ee.complete():ee.next(Xe.value)})},0,!0)})})}var Ke=P(3670),Ne=P(8239),ke=P(1144),Le=P(6495),me=P(2206),be=P(4532),nt=P(3260);function Me(Ee,Qe){return Qe?function Re(Ee,Qe){if(null!=Ee){if((0,Ke.c)(Ee))return function re(Ee,Qe){return(0,h.Xf)(Ee).pipe((0,N.R)(Qe),(0,$.Q)(Qe))}(Ee,Qe);if((0,ke.z)(Ee))return function ce(Ee,Qe){return new ve.y(ee=>{let et=0;return Qe.schedule(function(){et===Ee.length?ee.complete():(ee.next(Ee[et++]),ee.closed||this.schedule())})})}(Ee,Qe);if((0,Ne.t)(Ee))return function te(Ee,Qe){return(0,h.Xf)(Ee).pipe((0,N.R)(Qe),(0,$.Q)(Qe))}(Ee,Qe);if((0,me.D)(Ee))return X(Ee,Qe);if((0,Le.T)(Ee))return function z(Ee,Qe){return new ve.y(ee=>{let et;return(0,W.f)(ee,Qe,()=>{et=Ee[de.h](),(0,W.f)(ee,Qe,()=>{let Xe,ie;try{({value:Xe,done:ie}=et.next())}catch(oe){return void ee.error(oe)}ie?ee.complete():ee.next(Xe)},0,!0)}),()=>(0,ge.m)(null==et?void 0:et.return)&&et.return()})}(Ee,Qe);if((0,nt.L)(Ee))return function $e(Ee,Qe){return X((0,nt.Q)(Ee),Qe)}(Ee,Qe)}throw(0,be.z)(Ee)}(Ee,Qe):(0,h.Xf)(Ee)}},8421:(mt,Se,P)=>{P.d(Se,{Xf:()=>Ke});var h=P(655),$=P(1144),N=P(8239),re=P(8306),te=P(3670),ve=P(2206),ce=P(4532),de=P(6495),ge=P(3260),W=P(576),z=P(7849),X=P(8822);function Ke(Re){if(Re instanceof re.y)return Re;if(null!=Re){if((0,te.c)(Re))return function Ne(Re){return new re.y(Me=>{const Ee=Re[X.L]();if((0,W.m)(Ee.subscribe))return Ee.subscribe(Me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,$.z)(Re))return function ke(Re){return new re.y(Me=>{for(let Ee=0;Ee<Re.length&&!Me.closed;Ee++)Me.next(Re[Ee]);Me.complete()})}(Re);if((0,N.t)(Re))return function Le(Re){return new re.y(Me=>{Re.then(Ee=>{Me.closed||(Me.next(Ee),Me.complete())},Ee=>Me.error(Ee)).then(null,z.h)})}(Re);if((0,ve.D)(Re))return be(Re);if((0,de.T)(Re))return function me(Re){return new re.y(Me=>{for(const Ee of Re)if(Me.next(Ee),Me.closed)return;Me.complete()})}(Re);if((0,ge.L)(Re))return function nt(Re){return be((0,ge.Q)(Re))}(Re)}throw(0,ce.z)(Re)}function be(Re){return new re.y(Me=>{(function $e(Re,Me){var Ee,Qe,ee,et;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,h.KL)(Re);!(Qe=yield Ee.next()).done;)if(Me.next(Qe.value),Me.closed)return}catch(Xe){ee={error:Xe}}finally{try{Qe&&!Qe.done&&(et=Ee.return)&&(yield et.call(Ee))}finally{if(ee)throw ee.error}}Me.complete()})})(Re,Me).catch(Ee=>Me.error(Ee))})}},6451:(mt,Se,P)=>{P.d(Se,{T:()=>ve});var h=P(8189),$=P(8421),N=P(515),re=P(7669),te=P(8996);function ve(...ce){const de=(0,re.yG)(ce),ge=(0,re._6)(ce,1/0),W=ce;return W.length?1===W.length?(0,$.Xf)(W[0]):(0,h.J)(ge)((0,te.D)(W,de)):N.E}},5403:(mt,Se,P)=>{P.d(Se,{x:()=>$});var h=P(2961);function $(re,te,ve,ce,de){return new N(re,te,ve,ce,de)}class N extends h.Lv{constructor(te,ve,ce,de,ge,W){super(te),this.onFinalize=ge,this.shouldUnsubscribe=W,this._next=ve?function(z){try{ve(z)}catch(X){te.error(X)}}:super._next,this._error=de?function(z){try{de(z)}catch(X){te.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(z){te.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(mt,Se,P)=>{P.d(Se,{U:()=>N});var h=P(4482),$=P(5403);function N(re,te){return(0,h.e)((ve,ce)=>{let de=0;ve.subscribe((0,$.x)(ce,ge=>{ce.next(re.call(te,ge,de++))}))})}},8189:(mt,Se,P)=>{P.d(Se,{J:()=>N});var h=P(5577),$=P(4671);function N(re=1/0){return(0,h.z)($.y,re)}},5577:(mt,Se,P)=>{P.d(Se,{z:()=>de});var h=P(4004),$=P(8421),N=P(4482),re=P(9672),te=P(5403),ce=P(576);function de(ge,W,z=1/0){return(0,ce.m)(W)?de((X,Ke)=>(0,h.U)((Ne,ke)=>W(X,Ne,Ke,ke))((0,$.Xf)(ge(X,Ke))),z):("number"==typeof W&&(z=W),(0,N.e)((X,Ke)=>function ve(ge,W,z,X,Ke,Ne,ke,Le){const me=[];let be=0,nt=0,$e=!1;const Re=()=>{$e&&!me.length&&!be&&W.complete()},Me=Qe=>be<X?Ee(Qe):me.push(Qe),Ee=Qe=>{Ne&&W.next(Qe),be++;let ee=!1;(0,$.Xf)(z(Qe,nt++)).subscribe((0,te.x)(W,et=>{null==Ke||Ke(et),Ne?Me(et):W.next(et)},()=>{ee=!0},void 0,()=>{if(ee)try{for(be--;me.length&&be<X;){const et=me.shift();ke?(0,re.f)(W,ke,()=>Ee(et)):Ee(et)}Re()}catch(et){W.error(et)}}))};return ge.subscribe((0,te.x)(W,Me,()=>{$e=!0,Re()})),()=>{null==Le||Le()}}(X,Ke,ge,z)))}},5363:(mt,Se,P)=>{P.d(Se,{Q:()=>re});var h=P(9672),$=P(4482),N=P(5403);function re(te,ve=0){return(0,$.e)((ce,de)=>{ce.subscribe((0,N.x)(de,ge=>(0,h.f)(de,te,()=>de.next(ge),ve),()=>(0,h.f)(de,te,()=>de.complete(),ve),ge=>(0,h.f)(de,te,()=>de.error(ge),ve)))})}},3099:(mt,Se,P)=>{P.d(Se,{B:()=>ve});var h=P(8996),$=P(5698),N=P(7579),re=P(2961),te=P(4482);function ve(de={}){const{connector:ge=(()=>new N.x),resetOnError:W=!0,resetOnComplete:z=!0,resetOnRefCountZero:X=!0}=de;return Ke=>{let Ne=null,ke=null,Le=null,me=0,be=!1,nt=!1;const $e=()=>{null==ke||ke.unsubscribe(),ke=null},Re=()=>{$e(),Ne=Le=null,be=nt=!1},Me=()=>{const Ee=Ne;Re(),null==Ee||Ee.unsubscribe()};return(0,te.e)((Ee,Qe)=>{me++,!nt&&!be&&$e();const ee=Le=null!=Le?Le:ge();Qe.add(()=>{me--,0===me&&!nt&&!be&&(ke=ce(Me,X))}),ee.subscribe(Qe),Ne||(Ne=new re.Hp({next:et=>ee.next(et),error:et=>{nt=!0,$e(),ke=ce(Re,W,et),ee.error(et)},complete:()=>{be=!0,$e(),ke=ce(Re,z),ee.complete()}}),(0,h.D)(Ee).subscribe(Ne))})(Ke)}}function ce(de,ge,...W){return!0===ge?(de(),null):!1===ge?null:ge(...W).pipe((0,$.q)(1)).subscribe(()=>de())}},9468:(mt,Se,P)=>{P.d(Se,{R:()=>$});var h=P(4482);function $(N,re=0){return(0,h.e)((te,ve)=>{ve.add(N.schedule(()=>te.subscribe(ve),re))})}},5698:(mt,Se,P)=>{P.d(Se,{q:()=>re});var h=P(515),$=P(4482),N=P(5403);function re(te){return te<=0?()=>h.E:(0,$.e)((ve,ce)=>{let de=0;ve.subscribe((0,N.x)(ce,ge=>{++de<=te&&(ce.next(ge),te<=de&&ce.complete())}))})}},8505:(mt,Se,P)=>{P.d(Se,{b:()=>te});var h=P(576),$=P(4482),N=P(5403),re=P(4671);function te(ve,ce,de){const ge=(0,h.m)(ve)||ce||de?{next:ve,error:ce,complete:de}:ve;return ge?(0,$.e)((W,z)=>{var X;null===(X=ge.subscribe)||void 0===X||X.call(ge);let Ke=!0;W.subscribe((0,N.x)(z,Ne=>{var ke;null===(ke=ge.next)||void 0===ke||ke.call(ge,Ne),z.next(Ne)},()=>{var Ne;Ke=!1,null===(Ne=ge.complete)||void 0===Ne||Ne.call(ge),z.complete()},Ne=>{var ke;Ke=!1,null===(ke=ge.error)||void 0===ke||ke.call(ge,Ne),z.error(Ne)},()=>{var Ne,ke;Ke&&(null===(Ne=ge.unsubscribe)||void 0===Ne||Ne.call(ge)),null===(ke=ge.finalize)||void 0===ke||ke.call(ge)}))}):re.y}},4408:(mt,Se,P)=>{P.d(Se,{o:()=>te});var h=P(727);class $ extends h.w0{constructor(ce,de){super()}schedule(ce,de=0){return this}}const N={setInterval(ve,ce,...de){const{delegate:ge}=N;return(null==ge?void 0:ge.setInterval)?ge.setInterval(ve,ce,...de):setInterval(ve,ce,...de)},clearInterval(ve){const{delegate:ce}=N;return((null==ce?void 0:ce.clearInterval)||clearInterval)(ve)},delegate:void 0};var re=P(8737);class te extends ${constructor(ce,de){super(ce,de),this.scheduler=ce,this.work=de,this.pending=!1}schedule(ce,de=0){if(this.closed)return this;this.state=ce;const ge=this.id,W=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(W,ge,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(W,this.id,de),this}requestAsyncId(ce,de,ge=0){return N.setInterval(ce.flush.bind(ce,this),ge)}recycleAsyncId(ce,de,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return de;N.clearInterval(de)}execute(ce,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(ce,de);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,de){let W,ge=!1;try{this.work(ce)}catch(z){ge=!0,W=z||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:ce,scheduler:de}=this,{actions:ge}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(ge,this),null!=ce&&(this.id=this.recycleAsyncId(de,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(mt,Se,P)=>{P.d(Se,{v:()=>N});var h=P(6063);class ${constructor(te,ve=$.now){this.schedulerActionCtor=te,this.now=ve}schedule(te,ve=0,ce){return new this.schedulerActionCtor(this,te).schedule(ce,ve)}}$.now=h.l.now;class N extends ${constructor(te,ve=$.now){super(te,ve),this.actions=[],this._active=!1,this._scheduled=void 0}flush(te){const{actions:ve}=this;if(this._active)return void ve.push(te);let ce;this._active=!0;do{if(ce=te.execute(te.state,te.delay))break}while(te=ve.shift());if(this._active=!1,ce){for(;te=ve.shift();)te.unsubscribe();throw ce}}}},4986:(mt,Se,P)=>{P.d(Se,{z:()=>N});var h=P(4408);const N=new(P(7565).v)(h.o)},6063:(mt,Se,P)=>{P.d(Se,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(mt,Se,P)=>{P.d(Se,{z:()=>h});const h={setTimeout($,N,...re){const{delegate:te}=h;return(null==te?void 0:te.setTimeout)?te.setTimeout($,N,...re):setTimeout($,N,...re)},clearTimeout($){const{delegate:N}=h;return((null==N?void 0:N.clearTimeout)||clearTimeout)($)},delegate:void 0}},2202:(mt,Se,P)=>{P.d(Se,{h:()=>$});const $=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,Se,P)=>{P.d(Se,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(mt,Se,P)=>{P.d(Se,{_6:()=>ve,jO:()=>re,yG:()=>te});var h=P(576);function N(ce){return ce[ce.length-1]}function re(ce){return(0,h.m)(N(ce))?ce.pop():void 0}function te(ce){return function $(ce){return ce&&(0,h.m)(ce.schedule)}(N(ce))?ce.pop():void 0}function ve(ce,de){return"number"==typeof N(ce)?ce.pop():de}},8737:(mt,Se,P)=>{function h($,N){if($){const re=$.indexOf(N);0<=re&&$.splice(re,1)}}P.d(Se,{P:()=>h})},3888:(mt,Se,P)=>{function h($){const re=$(te=>{Error.call(te),te.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}P.d(Se,{d:()=>h})},2806:(mt,Se,P)=>{P.d(Se,{x:()=>N,O:()=>re});var h=P(2416);let $=null;function N(te){if(h.v.useDeprecatedSynchronousErrorHandling){const ve=!$;if(ve&&($={errorThrown:!1,error:null}),te(),ve){const{errorThrown:ce,error:de}=$;if($=null,ce)throw de}}else te()}function re(te){h.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=te)}},9672:(mt,Se,P)=>{function h($,N,re,te=0,ve=!1){const ce=N.schedule(function(){re(),ve?$.add(this.schedule(null,te)):this.unsubscribe()},te);if($.add(ce),!ve)return ce}P.d(Se,{f:()=>h})},4671:(mt,Se,P)=>{function h($){return $}P.d(Se,{y:()=>h})},1144:(mt,Se,P)=>{P.d(Se,{z:()=>h});const h=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(mt,Se,P)=>{P.d(Se,{D:()=>$});var h=P(576);function $(N){return Symbol.asyncIterator&&(0,h.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(mt,Se,P)=>{function h($){return"function"==typeof $}P.d(Se,{m:()=>h})},3670:(mt,Se,P)=>{P.d(Se,{c:()=>N});var h=P(8822),$=P(576);function N(re){return(0,$.m)(re[h.L])}},6495:(mt,Se,P)=>{P.d(Se,{T:()=>N});var h=P(2202),$=P(576);function N(re){return(0,$.m)(null==re?void 0:re[h.h])}},8239:(mt,Se,P)=>{P.d(Se,{t:()=>$});var h=P(576);function $(N){return(0,h.m)(null==N?void 0:N.then)}},3260:(mt,Se,P)=>{P.d(Se,{Q:()=>N,L:()=>re});var h=P(655),$=P(576);function N(te){return(0,h.FC)(this,arguments,function*(){const ce=te.getReader();try{for(;;){const{value:de,done:ge}=yield(0,h.qq)(ce.read());if(ge)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(de)}}finally{ce.releaseLock()}})}function re(te){return(0,$.m)(null==te?void 0:te.getReader)}},4482:(mt,Se,P)=>{P.d(Se,{A:()=>$,e:()=>N});var h=P(576);function $(re){return(0,h.m)(null==re?void 0:re.lift)}function N(re){return te=>{if($(te))return te.lift(function(ve){try{return re(ve,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(mt,Se,P)=>{P.d(Se,{h:()=>N});var h=P(2416),$=P(3410);function N(re){$.z.setTimeout(()=>{const{onUnhandledError:te}=h.v;if(!te)throw re;te(re)})}},4532:(mt,Se,P)=>{function h($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Se,{z:()=>h})},655:(mt,Se,P)=>{function re(ie,oe){var le={};for(var De in ie)Object.prototype.hasOwnProperty.call(ie,De)&&oe.indexOf(De)<0&&(le[De]=ie[De]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(De=Object.getOwnPropertySymbols(ie);pe<De.length;pe++)oe.indexOf(De[pe])<0&&Object.prototype.propertyIsEnumerable.call(ie,De[pe])&&(le[De[pe]]=ie[De[pe]])}return le}function te(ie,oe,le,De){var Rt,pe=arguments.length,Fe=pe<3?oe:null===De?De=Object.getOwnPropertyDescriptor(oe,le):De;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Fe=Reflect.decorate(ie,oe,le,De);else for(var Qt=ie.length-1;Qt>=0;Qt--)(Rt=ie[Qt])&&(Fe=(pe<3?Rt(Fe):pe>3?Rt(oe,le,Fe):Rt(oe,le))||Fe);return pe>3&&Fe&&Object.defineProperty(oe,le,Fe),Fe}function ce(ie,oe){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(ie,oe)}function de(ie,oe,le,De){return new(le||(le=Promise))(function(Fe,Rt){function Qt(Jt){try{Ge(De.next(Jt))}catch(tr){Rt(tr)}}function on(Jt){try{Ge(De.throw(Jt))}catch(tr){Rt(tr)}}function Ge(Jt){Jt.done?Fe(Jt.value):function pe(Fe){return Fe instanceof le?Fe:new le(function(Rt){Rt(Fe)})}(Jt.value).then(Qt,on)}Ge((De=De.apply(ie,oe||[])).next())})}function me(ie){return this instanceof me?(this.v=ie,this):new me(ie)}function be(ie,oe,le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,De=le.apply(ie,oe||[]),Fe=[];return pe={},Rt("next"),Rt("throw"),Rt("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function Rt(xn){De[xn]&&(pe[xn]=function(nn){return new Promise(function(Xt,rn){Fe.push([xn,nn,Xt,rn])>1||Qt(xn,nn)})})}function Qt(xn,nn){try{!function on(xn){xn.value instanceof me?Promise.resolve(xn.value.v).then(Ge,Jt):tr(Fe[0][2],xn)}(De[xn](nn))}catch(Xt){tr(Fe[0][3],Xt)}}function Ge(xn){Qt("next",xn)}function Jt(xn){Qt("throw",xn)}function tr(xn,nn){xn(nn),Fe.shift(),Fe.length&&Qt(Fe[0][0],Fe[0][1])}}function $e(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,oe=ie[Symbol.asyncIterator];return oe?oe.call(ie):(ie=function X(ie){var oe="function"==typeof Symbol&&Symbol.iterator,le=oe&&ie[oe],De=0;if(le)return le.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&De>=ie.length&&(ie=void 0),{value:ie&&ie[De++],done:!ie}}};throw new TypeError(oe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),le={},De("next"),De("throw"),De("return"),le[Symbol.asyncIterator]=function(){return this},le);function De(Fe){le[Fe]=ie[Fe]&&function(Rt){return new Promise(function(Qt,on){!function pe(Fe,Rt,Qt,on){Promise.resolve(on).then(function(Ge){Fe({value:Ge,done:Qt})},Rt)}(Qt,on,(Rt=ie[Fe](Rt)).done,Rt.value)})}}}P.d(Se,{_T:()=>re,gn:()=>te,w6:()=>ce,mG:()=>de,qq:()=>me,FC:()=>be,KL:()=>$e})},5e3:(mt,Se,P)=>{P.d(Se,{deG:()=>Ap,tb:()=>bm,AFp:()=>Em,ip1:()=>dv,CZH:()=>hv,hGG:()=>Qb,z2F:()=>Tv,sBO:()=>LT,Sil:()=>xb,_Vd:()=>Pf,EJc:()=>Jd,SBq:()=>tl,qLn:()=>Bp,vpe:()=>ss,tBr:()=>Xi,XFs:()=>ft,OlP:()=>$n,zs3:()=>Do,ZZ4:()=>Pm,aQg:()=>Xf,soG:()=>zf,YKP:()=>tb,h0i:()=>Mc,PXZ:()=>Iv,R0b:()=>Ts,FiY:()=>Ri,Lbi:()=>Sb,g9A:()=>wm,Qsj:()=>kf,FYo:()=>Tc,JOm:()=>fa,tp0:()=>Ni,Rgc:()=>Bf,dDg:()=>Ev,q4F:()=>Jw,GfV:()=>F_,s_b:()=>Nc,ifc:()=>Gt,eFA:()=>Cm,G48:()=>Mv,Gpc:()=>z,X6Q:()=>Sv,_c5:()=>jv,VLi:()=>Ob,c2e:()=>Dm,zSh:()=>of,wAp:()=>He,vHH:()=>ke,cg1:()=>kg,kL8:()=>Lg,dqk:()=>Wt,sIi:()=>Ad,CqO:()=>YE,QGY:()=>Dg,F4k:()=>xd,RDi:()=>Fs,AaK:()=>de,qOj:()=>ur,TTD:()=>jo,_Bn:()=>Wg,xp6:()=>Yp,uIk:()=>Jy,Tol:()=>_f,ekj:()=>m_,Suo:()=>gb,Xpm:()=>Lt,lG2:()=>ue,Yz7:()=>nn,cJS:()=>rn,oAB:()=>O,Yjl:()=>Ve,Y36:()=>To,_UZ:()=>c_,qZA:()=>nu,TgZ:()=>yr,EpF:()=>bg,n5z:()=>Nl,LFG:()=>Be,$8M:()=>$a,$Z:()=>l_,NdJ:()=>Ao,CRH:()=>sm,oxw:()=>h_,ALo:()=>sb,lcZ:()=>ob,xi3:()=>ab,Hsn:()=>Rd,F$t:()=>So,Q6J:()=>hc,VKq:()=>U_,iGM:()=>pb,CHM:()=>mh,LSH:()=>dd,YNc:()=>dc,_uU:()=>Ef,hij:()=>Od});var h=P(7579),$=P(727),N=P(8306),re=P(6451),te=P(3099);function ve(s){for(let o in s)if(s[o]===ve)return o;throw Error("Could not find renamed property on target object.")}function ce(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function de(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(de).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const W=ve({__forward_ref__:ve});function z(s){return s.__forward_ref__=z,s.toString=function(){return de(this())},s}function X(s){return Ke(s)?s():s}function Ke(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===z}class ke extends Error{constructor(o,a){super(function Le(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function me(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():me(s)}function Me(s,o){const a=o?` in ${o}`:"";throw new ke(-201,`No provider for ${be(s)} found${a}`)}function on(s,o){null==s&&function Ge(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function nn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function rn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Rn(s){return fr(s,ci)||fr(s,br)}function fr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Bi(s){return s&&(s.hasOwnProperty(pr)||s.hasOwnProperty(as))?s[pr]:null}const ci=ve({\u0275prov:ve}),pr=ve({\u0275inj:ve}),br=ve({ngInjectableDef:ve}),as=ve({ngInjectorDef:ve});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Mr;function an(s){const o=Mr;return Mr=s,o}function Gn(s,o,a){const l=Rn(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ft.Optional?null:void 0!==o?o:void Me(de(s),"Injector")}function Ln(s){return{toString:s}.toString()}var Nn=(()=>((Nn=Nn||{})[Nn.OnPush=0]="OnPush",Nn[Nn.Default=1]="Default",Nn))(),Gt=(()=>{return(s=Gt||(Gt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Gt;var s})();const pt="undefined"!=typeof globalThis&&globalThis,at="undefined"!=typeof window&&window,Qr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Wt=pt||"undefined"!=typeof global&&global||at||Qr,ln={},yt=[],Un=ve({\u0275cmp:ve}),qt=ve({\u0275dir:ve}),We=ve({\u0275pipe:ve}),Ce=ve({\u0275mod:ve}),rt=ve({\u0275fac:ve}),gt=ve({__NG_ELEMENT_ID__:ve});let Ft=0;function Lt(s){return Ln(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Nn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||yt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Gt.Emulated,id:"c",styles:s.styles||yt,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,_=s.pipes;return l.id+=Ft++,l.inputs=j(s.inputs,a),l.outputs=j(s.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(B):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(Z):null,l})}function B(s){return Ye(s)||function Ct(s){return s[qt]||null}(s)}function Z(s){return function st(s){return s[We]||null}(s)}const fe={};function O(s){return Ln(()=>{const o={type:s.type,bootstrap:s.bootstrap||yt,declarations:s.declarations||yt,imports:s.imports||yt,exports:s.exports||yt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(fe[s.id]=s.type),o})}function j(s,o){if(null==s)return ln;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=l,o&&(o[d]=p)}return a}const ue=Lt;function Ve(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Ye(s){return s[Un]||null}function Mt(s,o){const a=s[Ce]||null;if(!a&&!0===o)throw new Error(`Type ${de(s)} does not have '\u0275mod' property.`);return a}function Jr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Gi(s){return Array.isArray(s)&&!0===s[1]}function pu(s){return 0!=(8&s.flags)}function Lo(s){return 2==(2&s.flags)}function Vo(s){return 1==(1&s.flags)}function Ii(s){return null!==s.template}function pl(s){return 0!=(512&s[2])}function hi(s,o){return s.hasOwnProperty(rt)?s[rt]:null}class fh{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function jo(){return yu}function yu(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ra),ph}function ph(){const s=Ci(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===ln)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Ra(s,o,a,l){const d=Ci(s)||function ds(s,o){return s[zi]=o}(s,{previous:ln,current:null}),p=d.current||(d.current={}),_=d.previous,E=this.declaredInputs[a],D=_[E];p[E]=new fh(D&&D.currentValue,o,_===ln),s[l]=o}jo.ngInherit=!0;const zi="__ngSimpleChanges__";function Ci(s){return s[zi]||null}let vu;function Fs(s){vu=s}function En(s){return!!s.listen}const no={createRenderer:(s,o)=>function to(){return void 0!==vu?vu:"undefined"!=typeof document?document:void 0}()};function fn(s){for(;Array.isArray(s);)s=s[0];return s}function Ls(s,o){return fn(o[s])}function Dr(s,o){return fn(o[s.index])}function Eu(s,o){return s.data[o]}function fi(s,o){return s[o]}function Hr(s,o){const a=o[s];return Jr(a)?a:a[0]}function hs(s){return 4==(4&s[2])}function io(s){return 128==(128&s[2])}function Ti(s,o){return null==o?null:s[o]}function Wi(s){s[18]=0}function fs(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const wt={lFrame:Il(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qo(){return wt.bindingsEnabled}function Te(){return wt.lFrame.lView}function $t(){return wt.lFrame.tView}function mh(s){return wt.lFrame.contextLView=s,s[8]}function _n(){let s=wu();for(;null!==s&&64===s.type;)s=s.parent;return s}function wu(){return wt.lFrame.currentTNode}function Ai(s,o){const a=wt.lFrame;a.currentTNode=s,a.isParent=o}function vl(){return wt.lFrame.isParent}function ka(){wt.lFrame.isParent=!1}function Ko(){return wt.isInCheckNoChangesMode}function Zo(s){wt.isInCheckNoChangesMode=s}function sr(){const s=wt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Qo(){return wt.lFrame.bindingIndex++}function ei(s){const o=wt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function Kc(s,o){const a=wt.lFrame;a.bindingIndex=a.bindingRootIndex=s,wl(o)}function wl(s){wt.lFrame.currentDirectiveIndex=s}function _h(){return wt.lFrame.currentQueryIndex}function bl(s){wt.lFrame.currentQueryIndex=s}function Dl(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function bu(s,o,a){if(a&ft.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||a&ft.Host||(d=Dl(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const l=wt.lFrame=so();return l.currentTNode=o,l.lView=s,!0}function La(s){const o=so(),a=s[1];wt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function so(){const s=wt.lFrame,o=null===s?null:s.child;return null===o?Il(s):o}function Il(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function vh(){const s=wt.lFrame;return wt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Zc=vh;function oo(){const s=vh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Gr(){return wt.lFrame.selectedIndex}function js(s){wt.lFrame.selectedIndex=s}function jn(){const s=wt.lFrame;return Eu(s.tView,s.selectedIndex)}function Va(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const p=s.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:T,ngOnDestroy:x}=p;_&&(s.contentHooks||(s.contentHooks=[])).push(-a,_),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),D&&(s.viewHooks||(s.viewHooks=[])).push(-a,D),T&&((s.viewHooks||(s.viewHooks=[])).push(a,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,T)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(a,x)}}function Al(s,o,a){Qc(s,o,3,a)}function Du(s,o,a,l){(3&s[2])===a&&Qc(s,o,a,l)}function Jn(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Qc(s,o,a,l){const p=null!=l?l:-1,_=o.length-1;let E=0;for(let D=void 0!==l?65535&s[18]:0;D<_;D++)if("number"==typeof o[D+1]){if(E=o[D],null!=l&&E>=l)break}else o[D]<0&&(s[18]+=65536),(E<p||-1==p)&&(Jc(s,a,o,D),s[18]=(4294901760&s[18])+D+2),D++}function Jc(s,o,a,l){const d=a[l]<0,p=a[l+1],E=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Iu{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function vt(s,o,a){const l=En(s);let d=0;for(;d<a.length;){const p=a[d];if("number"==typeof p){if(0!==p)break;d++;const _=a[d++],E=a[d++],D=a[d++];l?s.setAttribute(o,E,D,_):o.setAttributeNS(_,E,D)}else{const _=p,E=a[++d];ti(_)?l&&s.setProperty(o,_,E):l?s.setAttribute(o,_,E):o.setAttribute(_,E),d++}}return d}function Ki(s){return 3===s||4===s||6===s}function ti(s){return 64===s.charCodeAt(0)}function or(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||ed(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function ed(s,o,a,l,d){let p=0,_=s.length;if(-1===o)_=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(s[p+1]=d));if(l===s[p+1])return void(s[p+2]=d)}p++,null!==l&&p++,null!==d&&p++}-1!==_&&(s.splice(_,0,o),p=_+1),s.splice(p++,0,a),null!==l&&s.splice(p++,0,l),null!==d&&s.splice(p++,0,d)}function zn(s){return-1!==s}function $s(s){return 32767&s}function gs(s,o){let a=function Sl(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let ea=!0;function Zi(s){const o=ea;return ea=s,o}let ta=0;function Pn(s,o){const a=xl(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Hs(l.data,s),Hs(o,null),Hs(l.blueprint,null));const d=zr(s,o),p=s.injectorIndex;if(zn(d)){const _=$s(d),E=gs(d,o),D=E[1].data;for(let T=0;T<8;T++)o[p+T]=E[_+T]|D[_+T]}return o[p+8]=d,p}function Hs(s,o){s.push(0,0,0,0,0,0,0,0,o)}function xl(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function zr(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const p=d[1],_=p.type;if(l=2===_?p.declTNode:1===_?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function uo(s,o,a){!function Ba(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(gt)&&(l=a[gt]),null==l&&(l=a[gt]=ta++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Gs(s,o,a){if(a&ft.Optional)return s;Me(o,"NodeInjector")}function ja(s,o,a,l){if(a&ft.Optional&&void 0===l&&(l=null),0==(a&(ft.Self|ft.Host))){const d=s[9],p=an(void 0);try{return d?d.get(o,l,a&ft.Optional):Gn(o,l,a&ft.Optional)}finally{an(p)}}return Gs(l,o,a)}function lo(s,o,a,l=ft.Default,d){if(null!==s){const p=function ra(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(gt)?s[gt]:void 0;return"number"==typeof o?o>=0?255&o:Rl:o}(a);if("function"==typeof p){if(!bu(o,s,l))return l&ft.Host?Gs(d,a,l):ja(o,a,l,d);try{const _=p(l);if(null!=_||l&ft.Optional)return _;Me(a)}finally{Zc()}}else if("number"==typeof p){let _=null,E=xl(s,o),D=-1,T=l&ft.Host?o[16][6]:null;for((-1===E||l&ft.SkipSelf)&&(D=-1===E?zr(s,o):o[E+8],-1!==D&&Cr(l,!1)?(_=o[1],E=$s(D),o=gs(D,o)):E=-1);-1!==E;){const x=o[1];if(ia(p,E,x.data)){const F=Dh(E,o,a,_,l,T);if(F!==ms)return F}D=o[E+8],-1!==D&&Cr(l,o[1].data[E+8]===T)&&ia(p,E,o)?(_=x,E=$s(D),o=gs(D,o)):E=-1}}}return ja(o,a,l,d)}const ms={};function Rl(){return new _s(_n(),Te())}function Dh(s,o,a,l,d,p){const _=o[1],E=_.data[s+8],x=ys(E,_,a,null==l?Lo(E)&&ea:l!=_&&0!=(3&E.type),d&ft.Host&&p===E);return null!==x?na(o,_,x,E):ms}function ys(s,o,a,l,d){const p=s.providerIndexes,_=o.data,E=1048575&p,D=s.directiveStart,x=p>>20,G=d?E+x:s.directiveEnd;for(let Q=l?E:E+x;Q<G;Q++){const ae=_[Q];if(Q<D&&a===ae||Q>=D&&ae.type===a)return Q}if(d){const Q=_[D];if(Q&&Ii(Q)&&Q.type===a)return D}return null}function na(s,o,a,l){let d=s[a];const p=o.data;if(function Ua(s){return s instanceof Iu}(d)){const _=d;_.resolving&&function nt(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ke(-200,`Circular dependency in DI detected for ${s}${a}`)}(be(p[a]));const E=Zi(_.canSeeViewProviders);_.resolving=!0;const D=_.injectImpl?an(_.injectImpl):null;bu(s,l,ft.Default);try{d=s[a]=_.factory(void 0,p,s,l),o.firstCreatePass&&a>=l.directiveStart&&function ao(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(l){const _=yu(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,_)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,p))}(a,p[a],o)}finally{null!==D&&an(D),Zi(E),_.resolving=!1,Zc()}}return d}function ia(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Cr(s,o){return!(s&ft.Self||s&ft.Host&&o)}class _s{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return lo(this._tNode,this._lView,o,l,a)}}function Nl(s){return Ln(()=>{const o=s.prototype.constructor,a=o[rt]||Wn(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const p=d[rt]||Wn(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Wn(s){return Ke(s)?()=>{const o=Wn(X(s));return o&&o()}:hi(s)}function $a(s){return function ni(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const p=a[d];if(Ki(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(_n(),s)}const vs="__parameters__";function Cn(s,o,a){return Ln(()=>{const l=function Qi(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...p){if(this instanceof d)return l.apply(this,p),this;const _=new d(...p);return E.annotation=_,E;function E(D,T,x){const F=D.hasOwnProperty(vs)?D[vs]:Object.defineProperty(D,vs,{value:[]})[vs];for(;F.length<=x;)F.push(null);return(F[x]=F[x]||[]).push(_),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class $n{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=nn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ap=new $n("AnalyzeForEntryComponents");function Wr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Wr(l,o)):o!==s&&o.push(l)}return o}function Mi(s,o){s.forEach(a=>Array.isArray(a)?Mi(a,o):o(a))}function aa(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function za(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ii(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}function gr(s,o,a){let l=Es(s,o);return l>=0?s[1|l]=a:(l=~l,function Pl(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function Fl(s,o){const a=Es(s,o);if(a>=0)return s[1|a]}function Es(s,o){return function Tu(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const p=l+(d-l>>1),_=s[p<<a];if(o===_)return p<<a;_>o?d=p:l=p+1}return~(d<<a)}(s,o,1)}const zs={},Su="__NG_DI_FLAG__",ca="ngTempTokenPath",I=/\n/gm,R="__source",U=ve({provide:String,useValue:ve});let Y;function ne(s){const o=Y;return Y=s,o}function _e(s,o=ft.Default){if(void 0===Y)throw new ke(203,"");return null===Y?Gn(s,void 0,o):Y.get(s,o&ft.Optional?null:void 0,o)}function Be(s,o=ft.Default){return(function Fn(){return Mr}()||_e)(X(s),o)}const bt=Be;function Zt(s){const o=[];for(let a=0;a<s.length;a++){const l=X(s[a]);if(Array.isArray(l)){if(0===l.length)throw new ke(900,"");let d,p=ft.Default;for(let _=0;_<l.length;_++){const E=l[_],D=Pr(E);"number"==typeof D?-1===D?d=E.token:p|=D:d=E}o.push(Be(d,p))}else o.push(Be(l))}return o}function Tt(s,o){return s[Su]=o,s.prototype[Su]=o,s}function Pr(s){return s[Su]}const Xi=Tt(Cn("Inject",s=>({token:s})),-1),Ri=Tt(Cn("Optional"),8),Ni=Tt(Cn("SkipSelf"),4);class ud{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function da(s){return s instanceof ud?s.changingThisBreaksApplicationSecurity:s}const g=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,w=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var pn=(()=>((pn=pn||{})[pn.NONE=0]="NONE",pn[pn.HTML=1]="HTML",pn[pn.STYLE=2]="STYLE",pn[pn.SCRIPT=3]="SCRIPT",pn[pn.URL=4]="URL",pn[pn.RESOURCE_URL=5]="RESOURCE_URL",pn))();function dd(s){const o=function Fu(){const s=Te();return s&&s[12]}();return o?o.sanitize(pn.URL,s)||"":function mo(s,o){const a=function jl(s){return s instanceof ud&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}(s,"URL")?da(s):function M(s){return(s=String(s)).match(g)||s.match(w)?s:"unsafe:"+s}(me(s))}const C0="__ngContext__";function yi(s,o){s[C0]=o}function sy(s){const o=function Lh(s){return s[C0]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function ql(s){return s.ngOriginalError}function mI(s,...o){s.error(...o)}class Bp{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function gI(s){return s&&s.ngErrorLogger||mI}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&ql(o);for(;a&&ql(a);)a=ql(a);return a||null}}const CI=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Wt))();function _o(s){return s instanceof Function?s():s}var fa=(()=>((fa=fa||{})[fa.Important=1]="Important",fa[fa.DashCase=2]="DashCase",fa))();function jp(s,o){return undefined(s,o)}function Uh(s){const o=s[3];return Gi(o)?o[3]:o}function Bh(s){return k0(s[13])}function Hp(s){return k0(s[4])}function k0(s){for(;null!==s&&!Gi(s);)s=s[4];return s}function hd(s,o,a,l,d){if(null!=l){let p,_=!1;Gi(l)?p=l:Jr(l)&&(_=!0,l=l[0]);const E=fn(l);0===s&&null!==a?null==d?gy(o,a,E):bs(o,a,E,d||null,!0):1===s&&null!==a?bs(o,a,E,d||null,!0):2===s?function vy(s,o,a){const l=pa(s,o);l&&function OI(s,o,a,l){En(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,E,_):3===s&&o.destroyNode(E),null!=p&&function kI(s,o,a,l,d){const p=a[7];p!==fn(a)&&hd(o,s,l,p,d);for(let E=10;E<a.length;E++){const D=a[E];Wp(D[1],D,s,o,l,p)}}(o,s,p,a,d)}}function cy(s,o,a){if(En(s))return s.createElement(o,a);{const l=null!==a?function zc(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function L0(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,fs(d,-1)),a.splice(l,1)}function hy(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&L0(d,l),o>0&&(s[a-1][4]=l[4]);const p=za(s,10+o);!function Pi(s,o){Wp(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function fy(s,o){if(!(256&o[2])){const a=o[11];En(a)&&a.destroyNode&&Wp(s,o,a,3,null,null),function dy(s){let o=s[13];if(!o)return py(s[1],s);for(;o;){let a=null;if(Jr(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)Jr(o)&&py(o[1],o),o=o[3];null===o&&(o=s),Jr(o)&&py(o[1],o),a=o&&o[4]}o=a}}(o)}}function py(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function U0(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Iu)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=d[p[_]],D=p[_+1];try{D.call(E)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function V0(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(o):fn(o[_]),D=l[d=a[p+2]],T=a[p+3];"boolean"==typeof T?E.removeEventListener(a[p],D,T):T>=0?l[d=T]():l[d=-T].unsubscribe(),p+=2}else{const _=l[d=a[p+1]];a[p].call(_)}if(null!==l){for(let p=d+1;p<l.length;p++)l[p]();o[7]=null}}(s,o),1===o[1].type&&En(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&Gi(o[3])){a!==o[3]&&L0(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function Gp(s,o,a){return function NI(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===Gt.None||d===Gt.Emulated)return null}return Dr(l,a)}(s,o.parent,a)}function bs(s,o,a,l,d){En(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function gy(s,o,a){En(s)?s.appendChild(o,a):o.appendChild(a)}function B0(s,o,a,l,d){null!==l?bs(s,o,a,l,d):gy(s,o,a)}function pa(s,o){return En(s)?s.parentNode(o):o.parentNode}function j0(s,o,a){return my(s,o,a)}let my=function $0(s,o,a){return 40&s.type?Dr(s,a):null};function zp(s,o,a,l){const d=Gp(s,l,o),p=o[11],E=j0(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)B0(p,d,a[D],E,!1);else B0(p,d,a,E,!1)}function pd(s,o){if(null!==o){const a=o.type;if(3&a)return Dr(o,s);if(4&a)return _y(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return pd(s,l);{const d=s[o.index];return Gi(d)?_y(-1,d):fn(d)}}if(32&a)return jp(o,s)()||fn(s[o.index]);{const l=G0(s,o);return null!==l?Array.isArray(l)?l[0]:pd(Uh(s[16]),l):pd(s,o.next)}}return null}function G0(s,o){return null!==o?s[16][6].projection[o.projection]:null}function _y(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return pd(l,d)}return o[7]}function Ey(s,o,a,l,d,p,_){for(;null!=a;){const E=l[a.index],D=a.type;if(_&&0===o&&(E&&yi(fn(E),l),a.flags|=4),64!=(64&a.flags))if(8&D)Ey(s,o,a.child,l,d,p,!1),hd(o,s,d,E,p);else if(32&D){const T=jp(a,l);let x;for(;x=T();)hd(o,s,d,x,p);hd(o,s,d,E,p)}else 16&D?by(s,o,l,a,d,p):hd(o,s,d,E,p);a=_?a.projectionNext:a.next}}function Wp(s,o,a,l,d,p){Ey(a,l,s.firstChild,o,d,p,!1)}function by(s,o,a,l,d,p){const _=a[16],D=_[6].projection[l.projection];if(Array.isArray(D))for(let T=0;T<D.length;T++)hd(o,s,d,D[T],p);else Ey(s,o,D,_[3],d,p,!0)}function W0(s,o,a){En(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function qp(s,o,a){En(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function q0(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===l||s.charCodeAt(d+p)<=32)return d}a=d+1}}const Kp="ng-template";function FI(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==q0(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function K0(s){return 4===s.type&&s.value!==Kp}function vo(s,o,a){return o===(4!==s.type||a?s.value:Kp)}function US(s,o,a){let l=4;const d=s.attrs||[],p=function Lu(s){for(let o=0;o<s.length;o++)if(Ki(s[o]))return o;return s.length}(d);let _=!1;for(let E=0;E<o.length;E++){const D=o[E];if("number"!=typeof D){if(!_)if(4&l){if(l=2|1&l,""!==D&&!vo(s,D,a)||""===D&&1===o.length){if(Eo(l))return!1;_=!0}}else{const T=8&l?D:o[++E];if(8&l&&null!==s.attrs){if(!FI(s.attrs,T,a)){if(Eo(l))return!1;_=!0}continue}const F=we(8&l?"class":D,d,K0(s),a);if(-1===F){if(Eo(l))return!1;_=!0;continue}if(""!==T){let G;G=F>p?"":d[F+1].toLowerCase();const Q=8&l?G:null;if(Q&&-1!==q0(Q,T,0)||2&l&&T!==G){if(Eo(l))return!1;_=!0}}}}else{if(!_&&!Eo(l)&&!Eo(D))return!1;if(_&&Eo(D))continue;_=!1,l=D|1&l}}return Eo(l)||_}function Eo(s){return 0==(1&s)}function we(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let p=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=p?1:2}return-1}return function en(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function ga(s,o,a=!1){for(let l=0;l<o.length;l++)if(US(s,o[l],a))return!0;return!1}function LI(s,o){e:for(let a=0;a<o.length;a++){const l=o[a];if(s.length===l.length){for(let d=0;d<s.length;d++)if(s[d]!==l[d])continue e;return!0}}return!1}function ma(s,o){return s?":not("+o.trim()+")":o}function lt(s){let o=s[0],a=1,l=2,d="",p=!1;for(;a<s.length;){let _=s[a];if("string"==typeof _)if(2&l){const E=s[++a];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+_:4&l&&(d+=" "+_);else""!==d&&!Eo(_)&&(o+=ma(p,d),d=""),l=_,p=p||!Eo(l);a++}return""!==d&&(o+=ma(p,d)),o}const Ot={};function Yp(s){gd($t(),Te(),Gr()+s,Ko())}function gd(s,o,a,l){if(!l)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Al(o,p,a)}else{const p=s.preOrderHooks;null!==p&&Du(o,p,0,a)}js(a)}function md(s,o){return s<<17|o<<2}function wo(s){return s>>17&32767}function kr(s){return 2|s}function Ws(s){return(131068&s)>>2}function Fr(s,o){return-131069&s|o<<2}function Iy(s){return 1|s}function ng(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],p=a[l+1];if(-1!==p){const _=s.data[p];bl(d),_.contentQueries(2,o[p],p)}}}function Ql(s,o,a,l,d,p,_,E,D,T){const x=o.blueprint.slice();return x[0]=d,x[2]=140|l,Wi(x),x[3]=x[15]=s,x[8]=a,x[10]=_||s&&s[10],x[11]=E||s&&s[11],x[12]=D||s&&s[12]||null,x[9]=T||s&&s[9]||null,x[6]=p,x[16]=2==o.type?s[16]:x,x}function Jl(s,o,a,l,d){let p=s.data[o];if(null===p)p=function rg(s,o,a,l,d){const p=wu(),_=vl(),D=s.data[o]=function hE(s,o,a,l,d,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=D),null!==p&&(_?null==p.child&&null!==D.parent&&(p.child=D):null===p.next&&(p.next=D)),D}(s,o,a,l,d),function yh(){return wt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=d;const _=function Vs(){const s=wt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Ai(p,!0),p}function vd(s,o,a,l){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function Ed(s,o,a){La(o);try{const l=s.viewQuery;null!==l&&Uy(1,l,a);const d=s.template;null!==d&&Ny(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&ng(s,o),s.staticViewQueries&&Uy(2,s.viewQuery,a);const p=s.components;null!==p&&function xy(s,o){for(let a=0;a<o.length;a++)Ly(s,o[a])}(o,p)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,oo()}}function Xl(s,o,a,l){const d=o[2];if(256==(256&d))return;La(o);const p=Ko();try{Wi(o),function Yo(s){return wt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&Ny(s,o,a,2,l);const _=3==(3&d);if(!p)if(_){const T=s.preOrderCheckHooks;null!==T&&Al(o,T,null)}else{const T=s.preOrderHooks;null!==T&&Du(o,T,0,null),Jn(o,0)}if(function Yh(s){for(let o=Bh(s);null!==o;o=Hp(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],p=d[3];0==(1024&d[2])&&fs(p,1),d[2]|=1024}}}(o),function bE(s){for(let o=Bh(s);null!==o;o=Hp(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];io(l)&&Xl(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&ng(s,o),!p)if(_){const T=s.contentCheckHooks;null!==T&&Al(o,T)}else{const T=s.contentHooks;null!==T&&Du(o,T,1),Jn(o,1)}!function tg(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)js(~d);else{const p=d,_=a[++l],E=a[++l];Kc(_,p),E(2,o[p])}}}finally{js(-1)}}(s,o);const E=s.components;null!==E&&function My(s,o){for(let a=0;a<o.length;a++)ag(s,o[a])}(o,E);const D=s.viewQuery;if(null!==D&&Uy(2,D,l),!p)if(_){const T=s.viewCheckHooks;null!==T&&Al(o,T)}else{const T=s.viewHooks;null!==T&&Du(o,T,2),Jn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,fs(o[3],-1))}finally{oo()}}function Ry(s,o,a,l){const d=o[10],p=!Ko(),_=hs(o);try{p&&!_&&d.begin&&d.begin(),_&&Ed(s,o,l),Xl(s,o,a,l)}finally{p&&!_&&d.end&&d.end()}}function Ny(s,o,a,l,d){const p=Gr(),_=2&l;try{js(-1),_&&o.length>20&&gd(s,o,20,Ko()),a(l,d)}finally{js(p)}}function Gh(s,o,a){!qo()||(function mE(s,o,a,l){const d=a.directiveStart,p=a.directiveEnd;s.firstCreatePass||Pn(a,o),yi(l,o);const _=a.initialInputs;for(let E=d;E<p;E++){const D=s.data[E],T=Ii(D);T&&ec(o,a,D);const x=na(o,s,E,a);yi(x,o),null!==_&&wE(0,E-d,x,D,0,_),T&&(Hr(a.index,o)[8]=x)}}(s,o,a,Dr(a,o)),128==(128&a.flags)&&function yE(s,o,a){const l=a.directiveStart,d=a.directiveEnd,_=a.index,E=function Fa(){return wt.lFrame.currentDirectiveIndex}();try{js(_);for(let D=l;D<d;D++){const T=s.data[D],x=o[D];wl(D),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Fy(T,x)}}finally{js(-1),wl(E)}}(s,o,a))}function zh(s,o,a=Dr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],E=-1===_?a(o,s):s[_];s[d++]=E}}}function ig(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=mr(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function mr(s,o,a,l,d,p,_,E,D,T){const x=20+l,F=x+d,G=function ai(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Ot);return a}(x,F),Q="function"==typeof T?T():T;return G[1]={type:s,blueprint:G,template:a,queries:null,viewQuery:E,declTNode:o,data:G.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:D,consts:Q,incompleteFirstPass:!1}}function dE(s,o,a,l){const d=cg(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&By(s).push(l,d.length-1))}function fE(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function sg(s,o,a,l){let d=!1;if(qo()){const p=function og(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];ga(a,_.selectors,!1)&&(d||(d=[]),uo(Pn(a,o),s,_.type),Ii(_)?(_E(s,a),d.unshift(_)):d.push(_))}return d}(s,o,a),_=null===l?null:{"":-1};if(null!==p){d=!0,vE(a,s.data.length,p.length);for(let x=0;x<p.length;x++){const F=p[x];F.providersResolver&&F.providersResolver(F)}let E=!1,D=!1,T=vd(s,o,p.length,null);for(let x=0;x<p.length;x++){const F=p[x];a.mergedAttrs=or(a.mergedAttrs,F.hostAttrs),EE(s,a,o,T,F),wd(T,F,_),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const G=F.type.prototype;!E&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!D&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),D=!0),T++}!function KI(s,o){const l=o.directiveEnd,d=s.data,p=o.attrs,_=[];let E=null,D=null;for(let T=o.directiveStart;T<l;T++){const x=d[T],F=x.inputs,G=null===p||K0(o)?null:Zh(F,p);_.push(G),E=fE(F,T,E),D=fE(x.outputs,T,D)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=E,o.outputs=D}(s,a)}_&&function QI(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new ke(-301,!1);l.push(o[d],p)}}}(a,l,_)}return a.mergedAttrs=or(a.mergedAttrs,a.attrs),d}function gE(s,o,a,l,d,p){const _=p.hostBindings;if(_){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const D=~o.index;(function Kh(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=D&&E.push(D),E.push(l,d,_)}}function Fy(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function _E(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function wd(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Ii(o)&&(a[""]=s)}}function vE(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function EE(s,o,a,l,d){s.data[l]=d;const p=d.factory||(d.factory=hi(d.type)),_=new Iu(p,Ii(d),null);s.blueprint[l]=_,a[l]=_,gE(s,o,0,l,vd(s,a,d.hostVars,Ot),d)}function ec(s,o,a){const l=Dr(o,s),d=ig(a),p=s[10],_=Qh(s,Ql(s,d,null,a.onPush?64:16,l,o,p,p.createRenderer(l,a),null,null));s[o.index]=_}function bo(s,o,a,l,d,p){const _=Dr(s,o);!function bd(s,o,a,l,d,p,_){if(null==p)En(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const E=null==_?me(p):_(p,l||"",d);En(s)?s.setAttribute(o,d,E,a):a?o.setAttributeNS(a,d,E):o.setAttribute(d,E)}}(o[11],_,p,s.value,a,l,d)}function wE(s,o,a,l,d,p){const _=p[o];if(null!==_){const E=l.setInput;for(let D=0;D<_.length;){const T=_[D++],x=_[D++],F=_[D++];null!==E?l.setInput(a,F,T,x):a[x]=F}}}function Zh(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function _i(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function ag(s,o){const a=Hr(o,s);if(io(a)){const l=a[1];80&a[2]?Xl(l,a,l.template,a[8]):a[5]>0&&ug(a)}}function ug(s){for(let l=Bh(s);null!==l;l=Hp(l))for(let d=10;d<l.length;d++){const p=l[d];if(1024&p[2]){const _=p[1];Xl(_,p,_.template,p[8])}else p[5]>0&&ug(p)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Hr(a[l],s);io(d)&&d[5]>0&&ug(d)}}function Ly(s,o){const a=Hr(o,s),l=a[1];(function DE(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),Ed(l,a,a[8])}function Qh(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function tc(s){for(;s;){s[2]|=64;const o=Uh(s);if(pl(s)&&!o)return s;s=o}return null}function Xh(s,o,a){const l=o[10];l.begin&&l.begin();try{Xl(s,o,s.template,a)}catch(d){throw $y(o,d),d}finally{l.end&&l.end()}}function ef(s){!function Jh(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=sy(a),d=l[1];Ry(d,l,d.template,a)}}(s[8])}function Uy(s,o,a){bl(0),o(s,a)}const lg=(()=>Promise.resolve(null))();function cg(s){return s[7]||(s[7]=[])}function By(s){return s.cleanup||(s.cleanup=[])}function $y(s,o){const a=s[9],l=a?a.get(Bp,null):null;l&&l.handleError(o)}function TE(s,o,a,l,d){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],D=o[_],T=s.data[_];null!==T.setInput?T.setInput(D,d,l,E):D[E]=d}}function Ds(s,o,a){const l=Ls(o,s);!function ly(s,o,a){En(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function nf(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,p=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?p=E:1==p?d=ge(d,E):2==p&&(l=ge(l,E+": "+o[++_]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const sf=new $n("INJECTOR",-1);class AE{get(o,a=zs){if(a===zs){const l=new Error(`NullInjectorError: No provider for ${de(o)}!`);throw l.name="NullInjectorError",l}return a}}const of=new $n("Set Injector scope."),ya={},Hy={};let Qa;function Gy(){return void 0===Qa&&(Qa=new AE),Qa}function SE(s,o=null,a=null,l){const d=Bu(s,o,a,l);return d._resolveInjectorDefTypes(),d}function Bu(s,o=null,a=null,l){return new Ja(s,a,o||Gy(),l)}class Ja{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Mi(a,E=>this.processProvider(E,o,a)),Mi([o],E=>this.processInjectorType(E,[],p)),this.records.set(sf,bn(void 0,this));const _=this.records.get(of);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof o?null:de(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=zs,l=ft.Default){this.assertNotDestroyed();const d=ne(this),p=an(void 0);try{if(!(l&ft.SkipSelf)){let E=this.records.get(o);if(void 0===E){const D=function nC(s){return"function"==typeof s||"object"==typeof s&&s instanceof $n}(o)&&Rn(o);E=D&&this.injectableDefInScope(D)?bn(Id(o),ya):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&ft.Self?Gy():this.parent).get(o,a=l&ft.Optional&&a===zs?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[ca]=_[ca]||[]).unshift(de(o)),d)throw _;return function ar(s,o,a,l){const d=s[ca];throw o[R]&&d.unshift(o[R]),s.message=function ws(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=de(o);if(Array.isArray(o))d=o.map(de).join(" -> ");else if("object"==typeof o){let p=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):de(E)))}d=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(I,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[ca]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{an(p),ne(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(de(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(o,a,l){if(!(o=X(o)))return!1;let d=Bi(o);const p=null==d&&o.ngModule||void 0,_=void 0===p?o:p,E=-1!==l.indexOf(_);if(void 0!==p&&(d=Bi(p)),null==d)return!1;if(null!=d.imports&&!E){let x;l.push(_);try{Mi(d.imports,F=>{this.processInjectorType(F,a,l)&&(void 0===x&&(x=[]),x.push(F))})}finally{}if(void 0!==x)for(let F=0;F<x.length;F++){const{ngModule:G,providers:Q}=x[F];Mi(Q,ae=>this.processProvider(ae,G,Q||yt))}}this.injectorDefTypes.add(_);const D=hi(_)||(()=>new _);this.records.set(_,bn(D,ya));const T=d.providers;if(null!=T&&!E){const x=o;Mi(T,F=>this.processProvider(F,x,T))}return void 0!==p&&void 0!==o.providers}processProvider(o,a,l){let d=_a(o=X(o))?o:X(o&&o.provide);const p=function fg(s,o,a){return af(s)?bn(void 0,s.useValue):bn(zy(s),ya)}(o);if(_a(o)||!0!==o.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=bn(void 0,ya,!0),_.factory=()=>Zt(_.multi),this.records.set(d,_)),d=o,_.multi.push(o)}this.records.set(d,p)}hydrate(o,a){return a.value===ya&&(a.value=Hy,a.value=a.factory()),"object"==typeof a.value&&a.value&&function ME(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=X(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Id(s){const o=Rn(s),a=null!==o?o.factory:hi(s);if(null!==a)return a;if(s instanceof $n)throw new ke(204,!1);if(s instanceof Function)return function hg(s){const o=s.length;if(o>0)throw ii(o,"?"),new ke(204,!1);const a=function Sr(s){const o=s&&(s[ci]||s[br]);if(o){const a=function wr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new ke(204,!1)}function zy(s,o,a){let l;if(_a(s)){const d=X(s);return hi(d)||Id(d)}if(af(s))l=()=>X(s.useValue);else if(function eC(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...Zt(s.deps||[]));else if(function XI(s){return!(!s||!s.useExisting)}(s))l=()=>Be(X(s.useExisting));else{const d=X(s&&(s.useClass||s.provide));if(!function tC(s){return!!s.deps}(s))return hi(d)||Id(d);l=()=>new d(...Zt(s.deps))}return l}function bn(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function af(s){return null!==s&&"object"==typeof s&&U in s}function _a(s){return"function"==typeof s}let Do=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return SE({name:""},l,a,"");{const p=null!==(d=a.name)&&void 0!==d?d:"";return SE({name:p},a.parent,a.providers,p)}}}return s.THROW_IF_NOT_FOUND=zs,s.NULL=new AE,s.\u0275prov=nn({token:s,providedIn:"any",factory:()=>Be(sf)}),s.__NG_ELEMENT_ID__=-1,s})();function cf(s,o){Va(sy(s)[1],_n())}function ur(s){let o=function jE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Ii(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ke(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const _=s;_.inputs=Yy(s.inputs),_.declaredInputs=Yy(s.declaredInputs),_.outputs=Yy(s.outputs);const E=d.hostBindings;E&&aC(s,E);const D=d.viewQuery,T=d.contentQueries;if(D&&sC(s,D),T&&oC(s,T),ce(s.inputs,d.inputs),ce(s.declaredInputs,d.declaredInputs),ce(s.outputs,d.outputs),Ii(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(s),E===ur&&(a=!1)}}o=Object.getPrototypeOf(o)}!function $E(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=or(d.hostAttrs,a=or(a,d.hostAttrs))}}(l)}function Yy(s){return s===ln?{}:s===yt?[]:s}function sC(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function oC(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,p)=>{o(l,d,p),a(l,d,p)}:o}function aC(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let nc=null;function rc(){if(!nc){const s=Wt.Symbol;if(s&&s.iterator)nc=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(nc=l)}}}return nc}function Ad(s){return!!ic(s)&&(Array.isArray(s)||!(s instanceof Map)&&rc()in s)}function ic(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Co(s,o,a){return s[o]=a}function Lr(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Jy(s,o,a,l){const d=Te();return Lr(d,Qo(),o)&&($t(),bo(jn(),d,s,o,a,l)),Jy}function dc(s,o,a,l,d,p,_,E){const D=Te(),T=$t(),x=s+20,F=T.firstCreatePass?function WE(s,o,a,l,d,p,_,E,D){const T=o.consts,x=Jl(o,s,4,_||null,Ti(T,E));sg(o,a,x,Ti(T,D)),Va(o,x);const F=x.tViews=mr(2,x,l,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,x),F.queries=o.queries.embeddedTView(x)),x}(x,T,D,o,a,l,d,p,_):T.data[x];Ai(F,!1);const G=D[11].createComment("");zp(T,D,G,F),yi(G,D),Qh(D,D[x]=_i(G,D,G,F)),Vo(F)&&Gh(T,D,F),null!=_&&zh(D,F,E)}function To(s,o=ft.Default){const a=Te();return null===a?Be(s,o):lo(_n(),a,X(s),o)}function l_(){throw new Error("invalid")}function hc(s,o,a){const l=Te();return Lr(l,Qo(),o)&&function Fi(s,o,a,l,d,p,_,E){const D=Dr(o,a);let x,T=o.inputs;!E&&null!=T&&(x=T[l])?(TE(s,a,x,l,d),Lo(o)&&function ZI(s,o){const a=Hr(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function Oy(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=_?_(d,o.value||"",l):d,En(p)?p.setProperty(D,l,d):ti(l)||(D.setProperty?D.setProperty(l,d):D[l]=d))}($t(),jn(),l,s,o,l[11],a,!1),hc}function sn(s,o,a,l,d){const _=d?"class":"style";TE(s,a,o.inputs[_],_,l)}function yr(s,o,a,l){const d=Te(),p=$t(),_=20+s,E=d[11],D=d[_]=cy(E,o,function Yc(){return wt.lFrame.currentNamespace}()),T=p.firstCreatePass?function IC(s,o,a,l,d,p,_){const E=o.consts,T=Jl(o,s,2,d,Ti(E,p));return sg(o,a,T,Ti(E,_)),null!==T.attrs&&nf(T,T.attrs,!1),null!==T.mergedAttrs&&nf(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,p,d,0,o,a,l):p.data[_];Ai(T,!0);const x=T.mergedAttrs;null!==x&&vt(E,D,x);const F=T.classes;null!==F&&qp(E,D,F);const G=T.styles;return null!==G&&W0(E,D,G),64!=(64&T.flags)&&zp(p,d,D,T),0===function Wc(){return wt.lFrame.elementDepthCount}()&&yi(D,d),function Wo(){wt.lFrame.elementDepthCount++}(),Vo(T)&&(Gh(p,d,T),function uE(s,o,a){if(pu(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const _=s.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,T,d)),null!==l&&zh(d,T),yr}function nu(){let s=_n();vl()?ka():(s=s.parent,Ai(s,!1));const o=s;!function qc(){wt.lFrame.elementDepthCount--}();const a=$t();return a.firstCreatePass&&(Va(a,s),pu(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function bh(s){return 0!=(16&s.flags)}(o)&&sn(a,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Gm(s){return 0!=(32&s.flags)}(o)&&sn(a,o,Te(),o.stylesWithoutHost,!1),nu}function c_(s,o,a,l){return yr(s,o,a,l),nu(),c_}function bg(){return Te()}function Dg(s){return!!s&&"function"==typeof s.then}function xd(s){return!!s&&"function"==typeof s.subscribe}const YE=xd;function Ao(s,o,a,l){const d=Te(),p=$t(),_=_n();return function d_(s,o,a,l,d,p,_,E){const D=Vo(l),x=s.firstCreatePass&&By(s),F=o[8],G=cg(o);let Q=!0;if(3&l.type||E){const je=Dr(l,o),ut=E?E(je):je,Ae=G.length,_t=E?tn=>E(fn(tn[l.index])):l.index;if(En(a)){let tn=null;if(!E&&D&&(tn=function pf(s,o,a,l){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const _=d[p];if(_===a&&d[p+1]===l){const E=o[7],D=d[p+2];return E.length>D?E[D]:null}"string"==typeof _&&(p+=2)}return null}(s,o,d,l.index)),null!==tn)(tn.__ngLastListenerFn__||tn).__ngNextListenerFn__=p,tn.__ngLastListenerFn__=p,Q=!1;else{p=Ig(l,o,F,p,!1);const gn=a.listen(ut,d,p);G.push(p,gn),x&&x.push(d,_t,Ae,Ae+1)}}else p=Ig(l,o,F,p,!0),ut.addEventListener(d,p,_),G.push(p),x&&x.push(d,_t,Ae,_)}else p=Ig(l,o,F,p,!1);const ae=l.outputs;let Oe;if(Q&&null!==ae&&(Oe=ae[d])){const je=Oe.length;if(je)for(let ut=0;ut<je;ut+=2){const As=o[Oe[ut]][Oe[ut+1]].subscribe(p),cu=G.length;G.push(p,As),x&&x.push(d,l.index,cu,-(cu+1))}}}(p,d,d[11],_,s,o,!!a,l),Ao}function qe(s,o,a,l){try{return!1!==a(l)}catch(d){return $y(s,d),!1}}function Ig(s,o,a,l,d){return function p(_){if(_===Function)return l;const E=2&s.flags?Hr(s.index,o):o;0==(32&o[2])&&tc(E);let D=qe(o,0,l,_),T=p.__ngNextListenerFn__;for(;T;)D=qe(o,0,T,_)&&D,T=T.__ngNextListenerFn__;return d&&!1===D&&(_.preventDefault(),_.returnValue=!1),D}}function h_(s=1){return function Bs(s){return(wt.lFrame.contextLView=function Cl(s,o){for(;s>0;)o=o[15],s--;return o}(s,wt.lFrame.contextLView))[8]}(s)}function fc(s,o){let a=null;const l=function Zp(s){const o=s.attrs;if(null!=o){const a=o.indexOf(5);if(0==(1&a))return o[a+1]}return null}(s);for(let d=0;d<o.length;d++){const p=o[d];if("*"!==p){if(null===l?ga(s,p,!0):LI(l,p))return d}else a=d}return a}function So(s){const o=Te()[16][6];if(!o.projection){const l=o.projection=ii(s?s.length:1,null),d=l.slice();let p=o.child;for(;null!==p;){const _=s?fc(p,s):0;null!==_&&(d[_]?d[_].projectionNext=p:l[_]=p,d[_]=p),p=p.next}}}function Rd(s,o=0,a){const l=Te(),d=$t(),p=Jl(d,20+s,16,null,a||null);null===p.projection&&(p.projection=o),ka(),64!=(64&p.flags)&&function wy(s,o,a){by(o[11],0,o,a,Gp(s,a,o),j0(a.parent||o[6],a,o))}(d,l,p)}function JE(s,o,a,l,d){const p=s[a+1],_=null===o;let E=l?wo(p):Ws(p),D=!1;for(;0!==E&&(!1===D||_);){const x=s[E+1];XE(s[E],o)&&(D=!0,s[E+1]=l?Iy(x):kr(x)),E=l?wo(x):Ws(x)}D&&(s[a+1]=l?kr(p):Iy(p))}function XE(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Es(s,o)>=0}const Tr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ui(s){return s.substring(Tr.key,Tr.keyEnd)}function mf(s,o){const a=Tr.textEnd;return a===o?-1:(o=Tr.keyEnd=function tw(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,Tr.key=o,a),ba(s,o,a))}function ba(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function m_(s,o){return function Ks(s,o,a,l){const d=Te(),p=$t(),_=ei(2);p.firstUpdatePass&&iw(p,s,_,l),o!==Ot&&Lr(d,_,o)&&__(p,p.data[Gr()],d,d[11],s,d[_+1]=function ow(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=de(da(s)))),s}(o,a),l,_)}(s,o,null,!0),m_}function _f(s){!function Mn(s,o,a,l){const d=$t(),p=ei(2);d.firstUpdatePass&&iw(d,null,p,l);const _=Te();if(a!==Ot&&Lr(_,p,a)){const E=d.data[Gr()];if(mc(E,l)&&!rw(d,p)){let D=l?E.classesWithoutHost:E.stylesWithoutHost;null!==D&&(a=ge(D,a||"")),sn(d,E,_,a,l)}else!function OC(s,o,a,l,d,p,_,E){d===Ot&&(d=yt);let D=0,T=0,x=0<d.length?d[0]:null,F=0<p.length?p[0]:null;for(;null!==x||null!==F;){const G=D<d.length?d[D+1]:void 0,Q=T<p.length?p[T+1]:void 0;let Oe,ae=null;x===F?(D+=2,T+=2,G!==Q&&(ae=F,Oe=Q)):null===F||null!==x&&x<F?(D+=2,ae=x):(T+=2,ae=F,Oe=Q),null!==ae&&__(s,o,a,l,ae,Oe,_,E),x=D<d.length?d[D]:null,F=T<p.length?p[T]:null}}(d,E,_,_[11],_[p+1],_[p+1]=function Qu(s,o,a){if(null==a||""===a)return yt;const l=[],d=da(a);if(Array.isArray(d))for(let p=0;p<d.length;p++)s(l,d[p],!0);else if("object"==typeof d)for(const p in d)d.hasOwnProperty(p)&&s(l,p,d[p]);else"string"==typeof d&&o(l,d);return l}(s,o,a),l,p)}}(gr,Mo,s,!0)}function Mo(s,o){for(let a=function Hn(s){return function yf(s){Tr.key=0,Tr.keyEnd=0,Tr.value=0,Tr.valueEnd=0,Tr.textEnd=s.length}(s),mf(s,ba(s,0,Tr.textEnd))}(o);a>=0;a=mf(o,a))gr(s,ui(o),!0)}function rw(s,o){return o>=s.expandoStartIndex}function iw(s,o,a,l){const d=s.data;if(null===d[a+1]){const p=d[Gr()],_=rw(s,a);mc(p,l)&&null===o&&!_&&(o=!1),o=function xC(s,o,a,l){const d=function Us(s){const o=wt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=vf(a=y_(null,s,o,a,l),o.attrs,l),p=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==d)if(a=y_(d,s,o,a,l),null===p){let D=function sw(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Ws(l))return s[wo(l)]}(s,o,l);void 0!==D&&Array.isArray(D)&&(D=y_(null,s,o,D[1],l),D=vf(D,o.attrs,l),function RC(s,o,a,l){s[wo(a?o.classBindings:o.styleBindings)]=l}(s,o,l,D))}else p=function NC(s,o,a){let l;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)l=vf(l,s[p].hostAttrs,a);return vf(l,o.attrs,a)}(s,o,l)}return void 0!==p&&(l?o.residualClasses=p:o.residualStyles=p),a}(d,p,o,l),function QE(s,o,a,l,d,p){let _=p?o.classBindings:o.styleBindings,E=wo(_),D=Ws(_);s[l]=a;let x,T=!1;if(Array.isArray(a)){const F=a;x=F[1],(null===x||Es(F,x)>0)&&(T=!0)}else x=a;if(d)if(0!==D){const G=wo(s[E+1]);s[l+1]=md(G,E),0!==G&&(s[G+1]=Fr(s[G+1],l)),s[E+1]=function VI(s,o){return 131071&s|o<<17}(s[E+1],l)}else s[l+1]=md(E,0),0!==E&&(s[E+1]=Fr(s[E+1],l)),E=l;else s[l+1]=md(D,0),0===E?E=l:s[D+1]=Fr(s[D+1],l),D=l;T&&(s[l+1]=kr(s[l+1])),JE(s,x,l,!0),JE(s,x,l,!1),function TC(s,o,a,l,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Es(p,o)>=0&&(a[l+1]=Iy(a[l+1]))}(o,x,s,l,p),_=md(E,D),p?o.classBindings=_:o.styleBindings=_}(d,p,o,a,_,l)}}function y_(s,o,a,l,d){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=o[E],l=vf(l,p.hostAttrs,d),p!==s);)E++;return null!==s&&(a.directiveStylingLast=E),l}function vf(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const _=o[p];"number"==typeof _?d=_:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),gr(s,_,!!a||o[++p]))}return void 0===s?null:s}function __(s,o,a,l,d,p,_,E){if(!(3&o.type))return;const D=s.data,T=D[E+1];Zs(function Ya(s){return 1==(1&s)}(T)?v_(D,o,a,d,Ws(T),_):void 0)||(Zs(p)||function Y0(s){return 2==(2&s)}(T)&&(p=v_(D,null,a,d,E,_)),function z0(s,o,a,l,d){const p=En(s);if(o)d?p?s.addClass(a,l):a.classList.add(l):p?s.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:fa.DashCase;if(null==d)p?s.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),_|=fa.Important),p?s.setStyle(a,l,d,_):a.style.setProperty(l,d,E?"important":"")}}}(l,_,Ls(Gr(),a),d,p))}function v_(s,o,a,l,d,p){const _=null===o;let E;for(;d>0;){const D=s[d],T=Array.isArray(D),x=T?D[1]:D,F=null===x;let G=a[d+1];G===Ot&&(G=F?yt:void 0);let Q=F?Fl(G,l):x===l?G:void 0;if(T&&!Zs(Q)&&(Q=Fl(D,l)),Zs(Q)&&(E=Q,_))return E;const ae=s[d+1];d=_?wo(ae):Ws(ae)}if(null!==o){let D=p?o.residualClasses:o.residualStyles;null!=D&&(E=Fl(D,l))}return E}function Zs(s){return void 0!==s}function mc(s,o){return 0!=(s.flags&(o?16:32))}function Ef(s,o=""){const a=Te(),l=$t(),d=s+20,p=l.firstCreatePass?Jl(l,d,1,o,null):l.data[d],_=a[d]=function uy(s,o){return En(s)?s.createText(o):s.createTextNode(o)}(a[11],o);zp(l,a,_,p),Ai(p,!1)}function Od(s,o,a){const l=Te(),d=function va(s,o,a,l){return Lr(s,Qo(),a)?o+me(a)+l:Ot}(l,s,o,a);return d!==Ot&&Ds(l,Gr(),d),Od}const Ju=void 0;var Ec=["en",[["a","p"],["AM","PM"],Ju],[["AM","PM"],Ju,Ju],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ju,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ju,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ju,"{1} 'at' {0}",Ju],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function If(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let wc={};function kg(s){const o=function ww(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=Ew(o);if(a)return a;const l=o.split("-")[0];if(a=Ew(l),a)return a;if("en"===l)return Ec;throw new Error(`Missing locale data for the locale "${s}".`)}function Lg(s){return kg(s)[He.PluralCase]}function Ew(s){return s in wc||(wc[s]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[s]),wc[s]}var He=(()=>((He=He||{})[He.LocaleId=0]="LocaleId",He[He.DayPeriodsFormat=1]="DayPeriodsFormat",He[He.DayPeriodsStandalone=2]="DayPeriodsStandalone",He[He.DaysFormat=3]="DaysFormat",He[He.DaysStandalone=4]="DaysStandalone",He[He.MonthsFormat=5]="MonthsFormat",He[He.MonthsStandalone=6]="MonthsStandalone",He[He.Eras=7]="Eras",He[He.FirstDayOfWeek=8]="FirstDayOfWeek",He[He.WeekendRange=9]="WeekendRange",He[He.DateFormat=10]="DateFormat",He[He.TimeFormat=11]="TimeFormat",He[He.DateTimeFormat=12]="DateTimeFormat",He[He.NumberSymbols=13]="NumberSymbols",He[He.NumberFormats=14]="NumberFormats",He[He.CurrencyCode=15]="CurrencyCode",He[He.CurrencySymbol=16]="CurrencySymbol",He[He.CurrencyName=17]="CurrencyName",He[He.Currencies=18]="Currencies",He[He.Directionality=19]="Directionality",He[He.PluralCase=20]="PluralCase",He[He.ExtraData=21]="ExtraData",He))();const Zn="en-US";let Dw=Zn;function jd(s,o,a,l,d){if(s=X(s),Array.isArray(s))for(let p=0;p<s.length;p++)jd(s[p],o,a,l,d);else{const p=$t(),_=Te();let E=_a(s)?s:X(s.provide),D=zy(s);const T=_n(),x=1048575&T.providerIndexes,F=T.directiveStart,G=T.providerIndexes>>20;if(_a(s)||!s.multi){const Q=new Iu(D,d,To),ae=bc(E,o,d?x:x+G,F);-1===ae?(uo(Pn(T,_),p,E),Cs(p,s,o.length),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Q),_.push(Q)):(a[ae]=Q,_[ae]=Q)}else{const Q=bc(E,o,x+G,F),ae=bc(E,o,x,x+G),Oe=Q>=0&&a[Q],je=ae>=0&&a[ae];if(d&&!je||!d&&!Oe){uo(Pn(T,_),p,E);const ut=function Kw(s,o,a,l,d){const p=new Iu(s,a,To);return p.multi=[],p.index=o,p.componentProviders=0,qw(p,d,l&&!a),p}(d?uT:Dc,a.length,d,l,D);!d&&je&&(a[ae].providerFactory=ut),Cs(p,s,o.length,0),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(ut),_.push(ut)}else Cs(p,s,Q>-1?Q:ae,qw(a[d?ae:Q],D,!d&&l));!d&&l&&je&&a[ae].componentProviders++}}}function Cs(s,o,a,l){const d=_a(o),p=function uf(s){return!!s.useClass}(o);if(d||p){const D=(p?X(o.useClass):o).prototype.ngOnDestroy;if(D){const T=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const x=T.indexOf(a);-1===x?T.push(a,[l,D]):T[x+1].push(l,D)}else T.push(a,D)}}}function qw(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function bc(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function Dc(s,o,a,l){return su(this.multi,[])}function uT(s,o,a,l){const d=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=na(a,a[1],this.providerFactory.index,l);p=E.slice(0,_),su(d,p);for(let D=_;D<E.length;D++)p.push(E[D])}else p=[],su(d,p);return p}function su(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function Wg(s,o=[]){return a=>{a.providersResolver=(l,d)=>function ye(s,o,a){const l=$t();if(l.firstCreatePass){const d=Ii(s);jd(a,l.data,l.blueprint,d,!0),jd(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class jr{}class el{resolveComponentFactory(o){throw function O_(s){const o=Error(`No component factory found for ${de(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Pf=(()=>{class s{}return s.NULL=new el,s})();function lT(){return Ic(_n(),Te())}function Ic(s,o){return new tl(Dr(s,o))}let tl=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=lT,s})();function Cc(s){return s instanceof tl?s.nativeElement:s}class Tc{}let kf=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function P_(){const s=Te(),a=Hr(_n().index,s);return function Qw(s){return s[11]}(Jr(a)?a:s)}(),s})(),k_=(()=>{class s{}return s.\u0275prov=nn({token:s,providedIn:"root",factory:()=>null}),s})();class F_{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Jw=new F_("13.2.7"),Kg={};function Ff(s,o,a,l,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&l.push(fn(p)),Gi(p))for(let E=10;E<p.length;E++){const D=p[E],T=D[1].firstChild;null!==T&&Ff(D[1],D,T,l)}const _=a.type;if(8&_)Ff(s,o,a.child,l);else if(32&_){const E=jp(a,o);let D;for(;D=E();)l.push(D)}else if(16&_){const E=G0(o,a);if(Array.isArray(E))l.push(...E);else{const D=Uh(o[16]);Ff(D[1],D,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class Ac{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Ff(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Gi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(hy(o,l),za(a,l))}this._attachedToViewContainer=!1}fy(this._lView[1],this._lView)}onDestroy(o){dE(this._lView[1],this._lView,null,o)}markForCheck(){tc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Xh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function tf(s,o,a){Zo(!0);try{Xh(s,o,a)}finally{Zo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function F0(s,o){Wp(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=o}}class Lf extends Ac{constructor(o){super(o),this._view=o}detectChanges(){ef(this._view)}checkNoChanges(){!function IE(s){Zo(!0);try{ef(s)}finally{Zo(!1)}}(this._view)}get context(){return null}}class nl extends Pf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Ye(o);return new L_(a,this.ngModule)}}function Xw(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class L_ extends jr{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function Dy(s){return s.map(lt).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Xw(this.componentDef.inputs)}get outputs(){return Xw(this.componentDef.outputs)}create(o,a,l,d){const p=(d=d||this.ngModule)?function cT(s,o){return{get:(a,l,d)=>{const p=s.get(a,Kg,d);return p!==Kg||l===Kg?p:o.get(a,l,d)}}}(o,d.injector):o,_=p.get(Tc,no),E=p.get(k_,null),D=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",x=l?function cE(s,o,a){if(En(s))return s.selectRootElement(o,a===Gt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(D,l,this.componentDef.encapsulation):cy(_.createRenderer(null,this.componentDef),T,function eb(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(T)),F=this.componentDef.onPush?576:528,G=function Zy(s,o){return{components:[],scheduler:s||CI,clean:lg,playerHandler:o||null,flags:0}}(),Q=mr(0,null,null,1,0,null,null,null,null,null),ae=Ql(null,Q,G,F,null,null,_,D,E,p);let Oe,je;La(ae);try{const ut=function lf(s,o,a,l,d,p){const _=a[1];a[20]=s;const D=Jl(_,20,2,"#host",null),T=D.mergedAttrs=o.hostAttrs;null!==T&&(nf(D,T,!0),null!==s&&(vt(d,s,T),null!==D.classes&&qp(d,s,D.classes),null!==D.styles&&W0(d,s,D.styles)));const x=l.createRenderer(s,o),F=Ql(a,ig(o),null,o.onPush?64:16,a[20],D,l,x,p||null,null);return _.firstCreatePass&&(uo(Pn(D,a),_,o.type),_E(_,D),vE(D,a.length,1)),Qh(a,F),a[20]=F}(x,this.componentDef,ae,_,D);if(x)if(l)vt(D,x,["ng-version",Jw.full]);else{const{attrs:Ae,classes:_t}=function Bt(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let p=s[l];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++l]):8===d&&a.push(p);else{if(!Eo(d))break;d=p}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ae&&vt(D,x,Ae),_t&&_t.length>0&&qp(D,x,_t.join(" "))}if(je=Eu(Q,20),void 0!==a){const Ae=je.projection=[];for(let _t=0;_t<this.ngContentSelectors.length;_t++){const tn=a[_t];Ae.push(null!=tn?Array.from(tn):null)}}Oe=function yg(s,o,a,l,d){const p=a[1],_=function ky(s,o,a){const l=_n();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),EE(s,l,o,vd(s,o,1,null),a));const d=na(o,s,l.directiveStart,l);yi(d,o);const p=Dr(l,o);return p&&yi(p,o),d}(p,a,o);if(l.components.push(_),s[8]=_,d&&d.forEach(D=>D(_,o)),o.contentQueries){const D=_n();o.contentQueries(1,_,D.directiveStart)}const E=_n();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(js(E.index),gE(a[1],E,0,E.directiveStart,E.directiveEnd,o),Fy(o,_)),_}(ut,this.componentDef,ae,G,[cf]),Ed(Q,ae,null)}finally{oo()}return new rl(this.componentType,Oe,Ic(je,ae),ae,je)}}class rl extends class Zw{}{constructor(o,a,l,d,p){super(),this.location=l,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Lf(d),this.componentType=o}get injector(){return new _s(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Mc{}class tb{}const Hd=new Map;class Vf extends Mc{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new nl(this);const l=Mt(o);this._bootstrapComponents=_o(l.bootstrap),this._r3Injector=Bu(o,a,[{provide:Mc,useValue:this},{provide:Pf,useValue:this.componentFactoryResolver}],de(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=Do.THROW_IF_NOT_FOUND,l=ft.Default){return o===Do||o===Mc||o===sf?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Yg extends tb{constructor(o){super(),this.moduleType=o,null!==Mt(o)&&function hT(s){const o=new Set;!function a(l){const d=Mt(l,!0),p=d.id;null!==p&&(function xc(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${de(o)} vs ${de(o.name)}`)}(p,Hd.get(p),l),Hd.set(p,l));const _=_o(d.imports);for(const E of _)o.has(E)||(o.add(E),a(E))}(s)}(o)}create(o){return new Vf(this.moduleType,o)}}function U_(s,o,a,l){return j_(Te(),sr(),s,o,a,l)}function Ca(s,o){const a=s[o];return a===Ot?void 0:a}function j_(s,o,a,l,d,p){const _=o+a;return Lr(s,_,d)?Co(s,_+1,p?l.call(p,d):l(d)):Ca(s,_+1)}function ou(s,o,a,l,d,p,_){const E=o+a;return function ju(s,o,a,l){const d=Lr(s,o,a);return Lr(s,o+1,l)||d}(s,E,d,p)?Co(s,E+2,_?l.call(_,d,p):l(d,p)):Ca(s,E+2)}function sb(s,o){const a=$t();let l;const d=s+20;a.firstCreatePass?(l=function gT(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const p=l.factory||(l.factory=hi(l.type)),_=an(To);try{const E=Zi(!1),D=p();return Zi(E),function lC(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,Te(),d,D),D}finally{an(_)}}function ob(s,o,a){const l=s+20,d=Te(),p=fi(d,l);return Uf(d,l)?j_(d,sr(),o,p.transform,a,p):p.transform(a)}function ab(s,o,a,l){const d=s+20,p=Te(),_=fi(p,d);return Uf(p,d)?ou(p,sr(),o,_.transform,a,l,_):_.transform(a,l)}function Uf(s,o){return s[1].data[o].pure}function au(s){return o=>{setTimeout(s,void 0,o)}}const ss=class lb extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,p,_;let E=o,D=a||(()=>null),T=l;if(o&&"object"==typeof o){const F=o;E=null===(d=F.next)||void 0===d?void 0:d.bind(F),D=null===(p=F.error)||void 0===p?void 0:p.bind(F),T=null===(_=F.complete)||void 0===_?void 0:_.bind(F)}this.__isAsync&&(D=au(D),E&&(E=au(E)),T&&(T=au(T)));const x=super.subscribe({next:E,error:D,complete:T});return o instanceof $.w0&&o.add(x),x}};function cb(){return this._results[rc()]()}class em{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=rc(),l=em.prototype;l[a]||(l[a]=cb)}get changes(){return this._changes||(this._changes=new ss)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Wr(o);(this._changesDetected=!function Ga(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],p=o[l];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Bf=(()=>{class s{}return s.__NG_ELEMENT_ID__=G_,s})();const db=Bf,H_=class extends db{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=Ql(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),Ed(a,l,o),new Ac(l)}};function G_(){return ol(_n(),Te())}function ol(s,o){return 4&s.type?new H_(o,s,Ic(s,o)):null}let Nc=(()=>{class s{}return s.__NG_ELEMENT_ID__=z_,s})();function z_(){return K_(_n(),Te())}const yT=Nc,tm=class extends yT{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Ic(this._hostTNode,this._hostLView)}get injector(){return new _s(this._hostTNode,this._hostLView)}get parentInjector(){const o=zr(this._hostTNode,this._hostLView);if(zn(o)){const a=gs(o,this._hostLView),l=$s(o);return new _s(a[1].data[l+8],a)}return new _s(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=W_(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,p){const _=o&&!function Cu(s){return"function"==typeof s}(o);let E;if(_)E=a;else{const F=a||{};E=F.index,l=F.injector,d=F.projectableNodes,p=F.ngModuleRef}const D=_?o:new L_(Ye(o)),T=l||this.parentInjector;if(!p&&null==D.ngModule){const G=(_?T:this.parentInjector).get(Mc,null);G&&(p=G)}const x=D.create(T,d,void 0,p);return this.insert(x.hostView,E),x}insert(o,a){const l=o._lView,d=l[1];if(function zo(s){return Gi(s[3])}(l)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const F=l[3],G=new tm(F,F[6],F[3]);G.detach(G.indexOf(o))}}const p=this._adjustIndex(a),_=this._lContainer;!function Zl(s,o,a,l){const d=10+l,p=a.length;l>0&&(a[d-1][4]=o),l<p-10?(o[4]=a[d],aa(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const _=o[17];null!==_&&a!==_&&function fd(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,l,_,p);const E=_y(p,_),D=l[11],T=pa(D,_[7]);return null!==T&&function RI(s,o,a,l,d,p){l[0]=d,l[6]=o,Wp(s,l,a,1,d,p)}(d,_[6],D,l,T,E),o.attachToViewContainerRef(),aa(q_(_),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=W_(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=hy(this._lContainer,a);l&&(za(q_(this._lContainer),a),fy(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=hy(this._lContainer,a);return l&&null!=za(q_(this._lContainer),a)?new Ac(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function W_(s){return s[8]}function q_(s){return s[8]||(s[8]=[])}function K_(s,o){let a;const l=o[s.index];if(Gi(l))a=l;else{let d;if(8&s.type)d=fn(l);else{const p=o[11];d=p.createComment("");const _=Dr(s,o);bs(p,pa(p,_),d,function PI(s,o){return En(s)?s.nextSibling(o):o.nextSibling}(p,_),!1)}o[s.index]=a=_i(l,o,d,s),Qh(o,a)}return new tm(a,s,o)}class nm{constructor(o){this.queryList=o,this.matches=null}clone(){return new nm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Y_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);d.push(this.queries[_.indexInDeclarationView].clone())}return new Y_(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==yb(o,a).matches&&this.queries[a].setDirty()}}class Q_{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class J_{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(o,d);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new J_(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class al{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new al(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const p=l[d];this.matchTNodeWithReadOption(o,a,Wd(a,p)),this.matchTNodeWithReadOption(o,a,ys(a,o,p,!1,!1))}else l===Bf?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,ys(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===tl||d===Nc||d===Bf&&4&a.type)this.addMatch(a.index,-2);else{const p=ys(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Wd(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function rm(s,o,a,l){return-1===a?function X_(s,o){return 11&s.type?Ic(s,o):4&s.type?ol(s,o):null}(o,s):-2===a?function fb(s,o,a){return a===tl?Ic(o,s):a===Bf?ol(o,s):a===Nc?K_(o,s):void 0}(s,o,l):na(s,s[1],a,o)}function ev(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const p=s.data,_=a.matches,E=[];for(let D=0;D<_.length;D+=2){const T=_[D];E.push(T<0?null:rm(o,p[T],_[D+1],a.metadata.read))}d.matches=E}return d.matches}function im(s,o,a,l){const d=s.queries.getByIndex(a),p=d.matches;if(null!==p){const _=ev(s,o,d,a);for(let E=0;E<p.length;E+=2){const D=p[E];if(D>0)l.push(_[E/2]);else{const T=p[E+1],x=o[-D];for(let F=10;F<x.length;F++){const G=x[F];G[17]===G[3]&&im(G[1],G,T,l)}if(null!==x[9]){const F=x[9];for(let G=0;G<F.length;G++){const Q=F[G];im(Q[1],Q,T,l)}}}}}return l}function pb(s){const o=Te(),a=$t(),l=_h();bl(l+1);const d=yb(a,l);if(s.dirty&&hs(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?im(a,o,l,[]):ev(a,o,d,l);s.reset(p,Cc),s.notifyOnChanges()}return!0}return!1}function gb(s,o,a,l){const d=$t();if(d.firstCreatePass){const p=_n();(function om(s,o,a){null===s.queries&&(s.queries=new J_),s.queries.track(new al(o,a))})(d,new Q_(o,a,l),p.index),function Yr(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function mb(s,o,a){const l=new em(4==(4&a));dE(s,o,l,l.destroy),null===o[19]&&(o[19]=new Y_),o[19].queries.push(new nm(l))}(d,Te(),a)}function sm(){return function _T(s,o){return s[19].queries[o].queryList}(Te(),_h())}function yb(s,o){return s.queries.getByIndex(o)}function vm(...s){}const dv=new $n("Application Initializer");let hv=(()=>{class s{constructor(a){this.appInits=a,this.resolve=vm,this.reject=vm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Dg(p))a.push(p);else if(YE(p)){const _=new Promise((E,D)=>{p.subscribe({complete:E,error:D})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(Be(dv,8))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Em=new $n("AppId",{providedIn:"root",factory:function Tb(){return`${fv()}${fv()}${fv()}`}});function fv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const wm=new $n("Platform Initializer"),Sb=new $n("Platform ID"),bm=new $n("appBootstrapListener");let Dm=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})();const zf=new $n("LocaleId",{providedIn:"root",factory:()=>bt(zf,ft.Optional|ft.SkipSelf)||function pv(){return"undefined"!=typeof $localize&&$localize.locale||Zn}()}),Jd=new $n("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Xd{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let xb=(()=>{class s{compileModuleSync(a){return new Yg(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=_o(Mt(a).declarations).reduce((_,E)=>{const D=Ye(E);return D&&_.push(new L_(D)),_},[]);return new Xd(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const MT=(()=>Promise.resolve(0))();function qf(s){"undefined"==typeof Zone?MT.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ts{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ss(!1),this.onMicrotaskEmpty=new ss(!1),this.onStable=new ss(!1),this.onError=new ss(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function gv(){let s=Wt.requestAnimationFrame,o=Wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function _v(s){const o=()=>{!function xT(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Wt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Kf(s),s.isCheckStableRunning=!0,yv(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Kf(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,p,_,E)=>{try{return Rb(s),a.invokeTask(d,p,_,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),vv(s)}},onInvoke:(a,l,d,p,_,E,D)=>{try{return Rb(s),a.invoke(d,p,_,E,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),vv(s)}},onHasTask:(a,l,d,p)=>{a.hasTask(d,p),l===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,Kf(s),yv(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,d,p)=>(a.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ts.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ts.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+d,o,mv,vm,vm);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const mv={};function yv(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Kf(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Rb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function vv(s){s._nesting--,yv(s)}class RT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ss,this.onMicrotaskEmpty=new ss,this.onStable=new ss,this.onError=new ss}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let Ev=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ts.assertNotInAngularZone(),qf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())qf(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Be(Ts))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})(),wv=(()=>{class s{constructor(){this._applications=new Map,bv.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return bv.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})();class Nb{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function Ob(s){bv=s}let Ro,bv=new Nb;const Im=new $n("AllowMultipleToken");class Iv{constructor(o,a){this.name=o,this.token=a}}function Cm(s,o,a=[]){const l=`Platform: ${o}`,d=new $n(l);return(p=[])=>{let _=Cv();if(!_||_.injector.get(Im,!1))if(s)s(a.concat(p).concat({provide:d,useValue:!0}));else{const E=a.concat(p).concat({provide:d,useValue:!0},{provide:of,useValue:"platform"});!function OT(s){if(Ro&&!Ro.destroyed&&!Ro.injector.get(Im,!1))throw new ke(400,"");Ro=s.get(Tm);const o=s.get(wm,null);o&&o.forEach(a=>a())}(Do.create({providers:E,name:l}))}return function PT(s){const o=Cv();if(!o)throw new ke(401,"");return o}()}}function Cv(){return Ro&&!Ro.destroyed?Ro:null}let Tm=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function kb(s,o){let a;return a="noop"===s?new RT:("zone.js"===s?void 0:s)||new Ts({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),D=[{provide:Ts,useValue:E}];return E.run(()=>{const T=Do.create({providers:D,parent:this.injector,name:a.moduleType.name}),x=a.create(T),F=x.injector.get(Bp,null);if(!F)throw new ke(402,"");return E.runOutsideAngular(()=>{const G=E.onError.subscribe({next:Q=>{F.handleError(Q)}});x.onDestroy(()=>{Zf(this._modules,x),G.unsubscribe()})}),function kT(s,o,a){try{const l=a();return Dg(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(F,E,()=>{const G=x.injector.get(hv);return G.runInitializers(),G.donePromise.then(()=>(function Ys(s){on(s,"Expected localeId to be defined"),"string"==typeof s&&(Dw=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(zf,Zn)||Zn),this._moduleDoBootstrap(x),x))})})}bootstrapModule(a,l=[]){const d=Am({},l);return function NT(s,o,a){const l=new Yg(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const l=a.injector.get(Tv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ke(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Be(Do))},s.\u0275prov=nn({token:s,factory:s.\u0275fac}),s})();function Am(s,o){return Array.isArray(o)?o.reduce(Am,s):Object.assign(Object.assign({},s),o)}let Tv=(()=>{class s{constructor(a,l,d,p,_){this._zone=a,this._injector=l,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new N.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),D=new N.y(T=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Ts.assertNotInAngularZone(),qf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{Ts.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{x.unsubscribe(),F.unsubscribe()}});this.isStable=(0,re.T)(E,D.pipe((0,te.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new ke(405,"");let d;d=a instanceof jr?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(d.componentType);const p=function Dv(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Mc),E=d.create(Do.NULL,[],l||d.selector,p),D=E.location.nativeElement,T=E.injector.get(Ev,null),x=T&&E.injector.get(wv);return T&&x&&x.registerApplication(D,T),E.onDestroy(()=>{this.detachView(E.hostView),Zf(this.components,E),x&&x.unregisterApplication(D)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Zf(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(bm,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(Be(Ts),Be(Do),Be(Bp),Be(Pf),Be(hv))},s.\u0275prov=nn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Zf(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let Lb=!0,Sm=!1;function Sv(){return Sm=!0,Lb}function Mv(){if(Sm)throw new Error("Cannot enable prod mode after platform setup.");Lb=!1}let LT=(()=>{class s{}return s.__NG_ELEMENT_ID__=xv,s})();function xv(s){return function lu(s,o,a){if(Lo(s)&&!a){const l=Hr(s.index,o);return new Ac(l,l)}return 47&s.type?new Ac(o[16],o):null}(_n(),Te(),16==(16&s))}class Gb{constructor(){}supports(o){return Ad(o)}create(o){return new Wb(o)}}const zb=(s,o)=>o;class Wb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||zb}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<Jf(l,d,p)?a:l,E=Jf(_,d,p),D=_.currentIndex;if(_===l)d--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)d++;else{p||(p=[]);const T=E-d,x=D-d;if(T!=x){for(let G=0;G<T;G++){const Q=G<p.length?p[G]:p[G]=0,ae=Q+G;x<=ae&&ae<T&&(p[G]=Q+1)}p[_.previousIndex]=x-T}}E!==D&&o(_,E,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Ad(o))throw new ke(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,_,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),l=!0),a=a._next}else d=0,function Qy(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[rc()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{_=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new UT(a,l),p,d),o}_verifyReinsertion(o,a,l,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Fv),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Fv),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class UT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class kv{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Fv{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new kv,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Jf(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class qb{constructor(){}supports(o){return o instanceof Map||ic(o)}create(){return new BT}}class BT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||ic(o)))throw new ke(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,_=d._next;return p&&(p._next=_),_&&(_._prev=p),d._next=null,d._prev=null,d}const l=new jT(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class jT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Kb(){return new Pm([new Gb])}let Pm=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Kb()),deps:[[s,new Ni,new Ri]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new ke(901,"")}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Kb}),s})();function Lv(){return new Xf([new qb])}let Xf=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Lv()),deps:[[s,new Ni,new Ri]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new ke(901,"")}}return s.\u0275prov=nn({token:s,providedIn:"root",factory:Lv}),s})();const jv=Cm(null,"core",[{provide:Sb,useValue:"unknown"},{provide:Tm,deps:[Do]},{provide:wv,deps:[]},{provide:Dm,deps:[]}]);let Qb=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Be(Tv))},s.\u0275mod=O({type:s}),s.\u0275inj=rn({}),s})()},3942:(mt,Se,P)=>{P.d(Se,{Z:()=>ke});var h=P(2090),$=P(4859),N=P(9681),re=P(1877);class te{constructor(me,be){this._delegate=me,this.firebase=be,(0,N._addComponent)(me,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(me,be=N._DEFAULT_ENTRY_NAME){var nt;this._delegate.checkDestroyed();const $e=this._delegate.container.getProvider(me);return!$e.isInitialized()&&"EXPLICIT"===(null===(nt=$e.getComponent())||void 0===nt?void 0:nt.instantiationMode)&&$e.initialize(),$e.getImmediate({identifier:be})}_removeServiceInstance(me,be=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(be)}_addComponent(me){(0,N._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,N._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function ge(){const Le=function de(Le){const me={},be={__esModule:!0,initializeApp:function Re(ee,et={}){const Xe=N.initializeApp(ee,et);if((0,h.r3)(me,Xe.name))return me[Xe.name];const ie=new Le(Xe,be);return me[Xe.name]=ie,ie},app:$e,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Ee(ee){const et=ee.name,Xe=et.replace("-compat","");if(N._registerComponent(ee)&&"PUBLIC"===ee.type){const ie=(oe=$e())=>{if("function"!=typeof oe[Xe])throw ce.create("invalid-app-argument",{appName:et});return oe[Xe]()};void 0!==ee.serviceProps&&(0,h.ZB)(ie,ee.serviceProps),be[Xe]=ie,Le.prototype[Xe]=function(...oe){return this._getService.bind(this,et).apply(this,ee.multipleInstances?oe:[])}}return"PUBLIC"===ee.type?be[Xe]:null},removeApp:function nt(ee){delete me[ee]},useAsService:function Qe(ee,et){return"serverAuth"===et?null:et},modularAPIs:N}};function $e(ee){if(!(0,h.r3)(me,ee=ee||N._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:ee});return me[ee]}return be.default=be,Object.defineProperty(be,"apps",{get:function Me(){return Object.keys(me).map(ee=>me[ee])}}),$e.App=Le,be}(te);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function me(be){(0,h.ZB)(Le,be)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Le}(),z=new re.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=W;!function Ne(Le){(0,N.registerVersion)("@firebase/app-compat","0.1.22",Le)}()},9681:(mt,Se,P)=>{P.r(Se),P.d(Se,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>Bi,_DEFAULT_ENTRY_NAME:()=>Qt,_addComponent:()=>tr,_addOrOverwriteComponent:()=>xn,_apps:()=>Ge,_clearComponents:()=>Rn,_components:()=>Jt,_getProvider:()=>Xt,_registerComponent:()=>nn,_removeServiceInstance:()=>rn,deleteApp:()=>as,getApp:()=>pr,getApps:()=>br,initializeApp:()=>ci,onLog:()=>Fn,registerVersion:()=>Mr,setLogLevel:()=>an});var h=P(5861),$=P(4859),N=P(1877),re=P(2090);class te{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function ve(We){const Ce=We.getComponent();return"VERSION"===(null==Ce?void 0:Ce.type)}(rt)){const gt=rt.getImmediate();return`${gt.library}/${gt.version}`}return null}).filter(rt=>rt).join(" ")}}const ce="@firebase/app",ge=new N.Yd("@firebase/app"),Qt="[DEFAULT]",on={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ge=new Map,Jt=new Map;function tr(We,Ce){try{We.container.addComponent(Ce)}catch(rt){ge.debug(`Component ${Ce.name} failed to register with FirebaseApp ${We.name}`,rt)}}function xn(We,Ce){We.container.addOrOverwriteComponent(Ce)}function nn(We){const Ce=We.name;if(Jt.has(Ce))return ge.debug(`There were multiple attempts to register component ${Ce}.`),!1;Jt.set(Ce,We);for(const rt of Ge.values())tr(rt,We);return!0}function Xt(We,Ce){const rt=We.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),We.container.getProvider(Ce)}function rn(We,Ce,rt=Qt){Xt(We,Ce).clearInstance(rt)}function Rn(){Jt.clear()}const Sr=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class wr{constructor(Ce,rt,gt){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=gt,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}const Bi="9.6.11";function ci(We,Ce={}){"object"!=typeof Ce&&(Ce={name:Ce});const rt=Object.assign({name:Qt,automaticDataCollectionEnabled:!1},Ce),gt=rt.name;if("string"!=typeof gt||!gt)throw Sr.create("bad-app-name",{appName:String(gt)});const Ft=Ge.get(gt);if(Ft){if((0,re.vZ)(We,Ft.options)&&(0,re.vZ)(rt,Ft.config))return Ft;throw Sr.create("duplicate-app",{appName:gt})}const Lt=new $.H0(gt);for(const B of Jt.values())Lt.addComponent(B);const q=new wr(We,rt,Lt);return Ge.set(gt,q),q}function pr(We=Qt){const Ce=Ge.get(We);if(!Ce)throw Sr.create("no-app",{appName:We});return Ce}function br(){return Array.from(Ge.values())}function as(We){return ft.apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(We){const Ce=We.name;Ge.has(Ce)&&(Ge.delete(Ce),yield Promise.all(We.container.getProviders().map(rt=>rt.delete())),We.isDeleted=!0)})).apply(this,arguments)}function Mr(We,Ce,rt){var gt;let Ft=null!==(gt=on[We])&&void 0!==gt?gt:We;rt&&(Ft+=`-${rt}`);const Lt=Ft.match(/\s|\//),q=Ce.match(/\s|\//);if(Lt||q){const B=[`Unable to register library "${Ft}" with version "${Ce}":`];return Lt&&B.push(`library name "${Ft}" contains illegal characters (whitespace or "/")`),Lt&&q&&B.push("and"),q&&B.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void ge.warn(B.join(" "))}nn(new $.wA(`${Ft}-version`,()=>({library:Ft,version:Ce}),"VERSION"))}function Fn(We,Ce){if(null!==We&&"function"!=typeof We)throw Sr.create("invalid-log-argument");(0,N.Am)(We,Ce)}function an(We){(0,N.Ub)(We)}const Ln="firebase-heartbeat-store";let Nn=null;function $r(){return Nn||(Nn=(0,re.X3)("firebase-heartbeat-database",1,(We,Ce)=>{0===Ce&&We.createObjectStore(Ln)}).catch(We=>{throw Sr.create("storage-open",{originalErrorMessage:We.message})})),Nn}function Gt(){return(Gt=(0,h.Z)(function*(We){try{return(yield $r()).transaction(Ln).objectStore(Ln).get(Qr(We))}catch(Ce){throw Sr.create("storage-get",{originalErrorMessage:Ce.message})}})).apply(this,arguments)}function pt(We,Ce){return at.apply(this,arguments)}function at(){return(at=(0,h.Z)(function*(We,Ce){try{const gt=(yield $r()).transaction(Ln,"readwrite");return yield gt.objectStore(Ln).put(Ce,Qr(We)),gt.complete}catch(rt){throw Sr.create("storage-set",{originalErrorMessage:rt.message})}})).apply(this,arguments)}function Qr(We){return`${We.name}!${We.options.appId}`}class $i{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new yt(rt),this._heartbeatsCachePromise=this._storage.read().then(gt=>(this._heartbeatsCache=gt,gt))}triggerHeartbeat(){var Ce=this;return(0,h.Z)(function*(){const gt=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ft=Vn();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==Ft&&!Ce._heartbeatsCache.heartbeats.some(Lt=>Lt.date===Ft))return Ce._heartbeatsCache.heartbeats.push({date:Ft,agent:gt}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(Lt=>{const q=new Date(Lt.date).valueOf();return Date.now()-q<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,h.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const rt=Vn(),{heartbeatsToSend:gt,unsentEntries:Ft}=function ln(We,Ce=1024){const rt=[];let gt=We.slice();for(const Ft of We){const Lt=rt.find(q=>q.agent===Ft.agent);if(Lt){if(Lt.dates.push(Ft.date),Un(rt)>Ce){Lt.dates.pop();break}}else if(rt.push({agent:Ft.agent,dates:[Ft.date]}),Un(rt)>Ce){rt.pop();break}gt=gt.slice(1)}return{heartbeatsToSend:rt,unsentEntries:gt}}(Ce._heartbeatsCache.heartbeats),Lt=(0,re.L)(JSON.stringify({version:2,heartbeats:gt}));return Ce._heartbeatsCache.lastSentHeartbeatDate=rt,Ft.length>0?(Ce._heartbeatsCache.heartbeats=Ft,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),Lt})()}}function Vn(){return(new Date).toISOString().substring(0,10)}class yt{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,h.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function Js(We){return Gt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var rt=this;return(0,h.Z)(function*(){var gt;if(yield rt._canUseIndexedDBPromise){const Lt=yield rt.read();return pt(rt.app,{lastSentHeartbeatDate:null!==(gt=Ce.lastSentHeartbeatDate)&&void 0!==gt?gt:Lt.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var rt=this;return(0,h.Z)(function*(){var gt;if(yield rt._canUseIndexedDBPromise){const Lt=yield rt.read();return pt(rt.app,{lastSentHeartbeatDate:null!==(gt=Ce.lastSentHeartbeatDate)&&void 0!==gt?gt:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...Ce.heartbeats]})}})()}}function Un(We){return(0,re.L)(JSON.stringify({version:2,heartbeats:We})).length}!function qt(We){nn(new $.wA("platform-logger",Ce=>new te(Ce),"PRIVATE")),nn(new $.wA("heartbeat",Ce=>new $i(Ce),"PRIVATE")),Mr(ce,"0.7.21",We),Mr(ce,"0.7.21","esm2017"),Mr("fire-js","")}("")},4859:(mt,Se,P)=>{P.d(Se,{wA:()=>N,H0:()=>de});var h=P(5861),$=P(2090);class N{constructor(W,z,X){this.name=W,this.instanceFactory=z,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const re="[DEFAULT]";class te{constructor(W,z){this.name=W,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const z=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(z)){const X=new $.BH;if(this.instancesDeferred.set(z,X),this.isInitialized(z)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:z});Ke&&X.resolve(Ke)}catch(Ke){}}return this.instancesDeferred.get(z).promise}getImmediate(W){var z;const X=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),Ke=null!==(z=null==W?void 0:W.optional)&&void 0!==z&&z;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Ne){if(Ke)return null;throw Ne}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function ce(ge){return"EAGER"===ge.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:re})}catch(z){}for(const[z,X]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(z);try{const Ne=this.getOrInitializeService({instanceIdentifier:Ke});X.resolve(Ne)}catch(Ne){}}}}clearInstance(W=re){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,h.Z)(function*(){const z=Array.from(W.instances.values());yield Promise.all([...z.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...z.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=re){return this.instances.has(W)}getOptions(W=re){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:z={}}=W,X=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:X,options:z});for(const[Ne,ke]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Ne)&&ke.resolve(Ke);return Ke}onInit(W,z){var X;const Ke=this.normalizeInstanceIdentifier(z),Ne=null!==(X=this.onInitCallbacks.get(Ke))&&void 0!==X?X:new Set;Ne.add(W),this.onInitCallbacks.set(Ke,Ne);const ke=this.instances.get(Ke);return ke&&W(ke,Ke),()=>{Ne.delete(W)}}invokeOnInitCallbacks(W,z){const X=this.onInitCallbacks.get(z);if(X)for(const Ke of X)try{Ke(W,z)}catch(Ne){}}getOrInitializeService({instanceIdentifier:W,options:z={}}){let X=this.instances.get(W);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=W,ge===re?void 0:ge),options:z}),this.instances.set(W,X),this.instancesOptions.set(W,z),this.invokeOnInitCallbacks(X,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,X)}catch(Ke){}var ge;return X||null}normalizeInstanceIdentifier(W=re){return this.component?this.component.multipleInstances?W:re:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const z=this.getProvider(W.name);if(z.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);z.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const z=new te(W,this);return this.providers.set(W,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,Se,P)=>{P.d(Se,{in:()=>$,Yd:()=>ce,Ub:()=>de,Am:()=>ge});const h=[];var $=(()=>{return(W=$||($={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",$;var W})();const N={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},re=$.INFO,te={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},ve=(W,z,...X)=>{if(z<W.logLevel)return;const Ke=(new Date).toISOString(),Ne=te[z];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Ne](`[${Ke}]  ${W.name}:`,...X)};class ce{constructor(z){this.name=z,this._logLevel=re,this._logHandler=ve,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in $))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?N[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...z),this._logHandler(this,$.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...z),this._logHandler(this,$.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...z),this._logHandler(this,$.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...z),this._logHandler(this,$.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...z),this._logHandler(this,$.ERROR,...z)}}function de(W){h.forEach(z=>{z.setLogLevel(W)})}function ge(W,z){for(const X of h){let Ke=null;z&&z.level&&(Ke=N[z.level]),X.userLogHandler=null===W?null:(Ne,ke,...Le)=>{const me=Le.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(nt){return null}}).filter(be=>be).join(" ");ke>=(null!=Ke?Ke:Ne.logLevel)&&W({level:$[ke].toLowerCase(),message:me,args:Le,type:Ne.name})}}}},5861:(mt,Se,P)=>{function h(N,re,te,ve,ce,de,ge){try{var W=N[de](ge),z=W.value}catch(X){return void te(X)}W.done?re(z):Promise.resolve(z).then(ve,ce)}function $(N){return function(){var re=this,te=arguments;return new Promise(function(ve,ce){var de=N.apply(re,te);function ge(z){h(de,ve,ce,ge,W,"next",z)}function W(z){h(de,ve,ce,ge,W,"throw",z)}ge(void 0)})}}P.d(Se,{Z:()=>$})}},mt=>{mt(mt.s=6817)}]);